{"ast":null,"code":"import { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nvar _options_;\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useAdaptivity } from \"../../hooks/useAdaptivity\";\nimport { useCustomEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useId } from \"../../hooks/useId\";\nimport { SizeType } from \"../../lib/adaptivity\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { SegmentedControlOption } from \"./SegmentedControlOption/SegmentedControlOption\";\nvar sizeYClassNames = _define_property({\n  none: \"vkuiSegmentedControl--sizeY-none\"\n}, SizeType.REGULAR, \"vkuiSegmentedControl--sizeY-regular\");\nvar warn = warnOnce(\"SegmentedControl\");\n/**\n * @see https://vkcom.github.io/VKUI/#/SegmentedControl\n */\nexport var SegmentedControl = function (_param) {\n  var _param_size = _param.size,\n    size = _param_size === void 0 ? \"l\" : _param_size,\n    name = _param.name,\n    options = _param.options,\n    _param_defaultValue = _param.defaultValue,\n    defaultValue = _param_defaultValue === void 0 ? (_options_ = options[0]) === null || _options_ === void 0 ? void 0 : _options_.value : _param_defaultValue,\n    children = _param.children,\n    onChangeProp = _param.onChange,\n    valueProp = _param.value,\n    restProps = _object_without_properties(_param, [\"size\", \"name\", \"options\", \"defaultValue\", \"children\", \"onChange\", \"value\"]);\n  var id = useId();\n  var _useCustomEnsuredControl = _sliced_to_array(useCustomEnsuredControl({\n      onChange: onChangeProp,\n      value: valueProp,\n      defaultValue: defaultValue\n    }), 2),\n    value = _useCustomEnsuredControl[0],\n    onChange = _useCustomEnsuredControl[1];\n  var _useAdaptivity = useAdaptivity(),\n    _useAdaptivity_sizeY = _useAdaptivity.sizeY,\n    sizeY = _useAdaptivity_sizeY === void 0 ? \"none\" : _useAdaptivity_sizeY;\n  var actualIndex = options.findIndex(function (option) {\n    return option.value === value;\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (actualIndex === -1 && process.env.NODE_ENV === \"development\") {\n      warn(\"defaultValue: такого значения нет среди опций!\", \"error\");\n    }\n  }, [actualIndex]);\n  var translateX = \"translateX(\".concat(100 * actualIndex, \"%)\");\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    baseClassName: classNames(\"vkuiSegmentedControl\", sizeY !== SizeType.COMPACT && sizeYClassNames[sizeY], size === \"l\" && \"vkuiSegmentedControl--size-l\")\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    role: \"radiogroup\",\n    className: \"vkuiSegmentedControl__in\"\n  }, actualIndex > -1 && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"vkuiSegmentedControl__slider\",\n    style: {\n      width: \"\".concat(100 / options.length, \"%\"),\n      transform: translateX,\n      WebkitTransform: translateX\n    }\n  }), options.map(function (_param) /*#__PURE__*/{\n    var label = _param.label,\n      optionClassName = _param.className,\n      optionProps = _object_without_properties(_param, [\"label\", \"className\"]);\n    return React.createElement(SegmentedControlOption, _object_spread_props(_object_spread({\n      key: \"\".concat(optionProps.value)\n    }, optionProps), {\n      className: classNames(\"vkuiSegmentedControl__option\", optionClassName),\n      name: name !== null && name !== void 0 ? name : id,\n      checked: value === optionProps.value,\n      onChange: function () {\n        return onChange(optionProps.value);\n      }\n    }), label);\n  })));\n};","map":{"version":3,"names":["_options_","React","classNames","useAdaptivity","useCustomEnsuredControl","useId","SizeType","useIsomorphicLayoutEffect","warnOnce","RootComponent","SegmentedControlOption","sizeYClassNames","_define_property","none","REGULAR","warn","SegmentedControl","_param","size","_param_size","name","options","_param_defaultValue","defaultValue","value","children","onChangeProp","onChange","valueProp","restProps","_object_without_properties","id","_useCustomEnsuredControl","_sliced_to_array","_useAdaptivity","_useAdaptivity_sizeY","sizeY","actualIndex","findIndex","option","process","env","NODE_ENV","translateX","concat","createElement","_object_spread_props","_object_spread","baseClassName","COMPACT","role","className","style","width","length","transform","WebkitTransform","map","label","optionClassName","optionProps","key","checked"],"sources":["../../../src/components/SegmentedControl/SegmentedControl.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useCustomEnsuredControl } from '../../hooks/useEnsuredControl';\nimport { useId } from '../../hooks/useId';\nimport { SizeType } from '../../lib/adaptivity';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { SegmentedControlOption } from './SegmentedControlOption/SegmentedControlOption';\nimport styles from './SegmentedControl.module.css';\n\nconst sizeYClassNames = {\n  none: styles['SegmentedControl--sizeY-none'],\n  [SizeType.REGULAR]: styles['SegmentedControl--sizeY-regular'],\n};\n\nexport type SegmentedControlValue = string | number | undefined;\n\nexport interface SegmentedControlOptionInterface\n  extends Omit<React.HTMLAttributes<HTMLElement>, 'label'> {\n  label: React.ReactChild;\n  value: SegmentedControlValue;\n}\n\nexport interface SegmentedControlProps\n  extends Omit<HTMLAttributesWithRootRef<HTMLDivElement>, 'onChange'> {\n  options: SegmentedControlOptionInterface[];\n  size?: 'm' | 'l';\n  name?: string;\n  onChange?: (value: SegmentedControlValue) => void;\n  value?: SegmentedControlValue;\n  defaultValue?: SegmentedControlValue;\n}\n\nconst warn = warnOnce('SegmentedControl');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/SegmentedControl\n */\nexport const SegmentedControl = ({\n  size = 'l',\n  name,\n  options,\n  defaultValue = options[0]?.value,\n  children,\n  onChange: onChangeProp,\n  value: valueProp,\n  ...restProps\n}: SegmentedControlProps) => {\n  const id = useId();\n\n  const [value, onChange] = useCustomEnsuredControl({\n    onChange: onChangeProp,\n    value: valueProp,\n    defaultValue,\n  });\n\n  const { sizeY = 'none' } = useAdaptivity();\n\n  const actualIndex = options.findIndex((option) => option.value === value);\n\n  useIsomorphicLayoutEffect(() => {\n    if (actualIndex === -1 && process.env.NODE_ENV === 'development') {\n      warn('defaultValue: такого значения нет среди опций!', 'error');\n    }\n  }, [actualIndex]);\n\n  const translateX = `translateX(${100 * actualIndex}%)`;\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['SegmentedControl'],\n        sizeY !== SizeType.COMPACT && sizeYClassNames[sizeY],\n        size === 'l' && styles['SegmentedControl--size-l'],\n      )}\n    >\n      <div role=\"radiogroup\" className={styles['SegmentedControl__in']}>\n        {actualIndex > -1 && (\n          <div\n            aria-hidden\n            className={styles['SegmentedControl__slider']}\n            style={{\n              width: `${100 / options.length}%`,\n              transform: translateX,\n              WebkitTransform: translateX,\n            }}\n          />\n        )}\n        {options.map(({ label, className: optionClassName, ...optionProps }) => (\n          <SegmentedControlOption\n            key={`${optionProps.value}`}\n            {...optionProps}\n            className={classNames(styles['SegmentedControl__option'], optionClassName)}\n            name={name ?? id}\n            checked={value === optionProps.value}\n            onChange={() => onChange(optionProps.value)}\n          >\n            {label}\n          </SegmentedControlOption>\n        ))}\n      </div>\n    </RootComponent>\n  );\n};\n"],"mappings":";;;;;IA6CiBA,SAAA;AA7CjB,YAAYC,KAAA,MAAW;AACvB,SAASC,UAAU,QAAQ;AAC3B,SAASC,aAAa,QAAQ;AAC9B,SAASC,uBAAuB,QAAQ;AACxC,SAASC,KAAK,QAAQ;AACtB,SAASC,QAAQ,QAAQ;AACzB,SAASC,yBAAyB,QAAQ;AAC1C,SAASC,QAAQ,QAAQ;AAEzB,SAASC,aAAa,QAAQ;AAC9B,SAASC,sBAAsB,QAAQ;AAGvC,IAAMC,eAAA,GAAAC,gBAAA;EACJC,IAAI;GACHP,QAAA,CAASQ,OAAO;AAqBnB,IAAMC,IAAA,GAAOP,QAAA,CAAS;AAEtB;;;AAGA,OAAO,IAAMQ,gBAAA,GAAmB,SAAAA,CAAAC,MAAA;2BAC9BC,IAAA;IAAAA,IAAA,GAAAC,WAAA,cAAO,MAAAA,WAAA;IACPC,IAAA,GAAAH,MAAA,CAAAG,IAAA;IACAC,OAAA,GAAAJ,MAAA,CAAAI,OAAA;IAAAC,mBAAA,GAAAL,MAAA,CACAM,YAAA;IAAAA,YAAA,GAAAD,mBAAA,eAAetB,SAAA,GAAAqB,OAAO,CAAC,EAAE,cAAVrB,SAAA,uBAAAA,SAAA,CAAYwB,KAAK,GAAAF,mBAAA;IAChCG,QAAA,GAAAR,MAAA,CAAAQ,QAAA;IACAC,YAAU,GAAAT,MAAA,CAAVU,QAAA;IACAC,SAAO,GAAAX,MAAA,CAAPO,KAAA;IACGK,SAAA,GAAAC,0BAAA,CAAAb,MAAA,GAPH,QACA,QACA,WACA,gBACA,YACA,YACA,Q;EAGA,IAAMc,EAAA,GAAK1B,KAAA;EAEX,IAA0B2B,wBAAA,GAAAC,gBAAA,CAAA7B,uBAAA,CAAwB;MAChDuB,QAAA,EAAUD,YAAA;MACVF,KAAA,EAAOI,SAAA;MACPL,YAAA,EAAAA;IACF;IAJOC,KAAA,GAAmBQ,wBAAA;IAAZL,QAAA,GAAYK,wBAAA;EAM1B,IAA2BE,cAAA,GAAA/B,aAAA;IAAAgC,oBAAA,GAAAD,cAAA,CAAnBE,KAAA;IAAAA,KAAA,GAAAD,oBAAA,cAAQ,SAAAA,oBAAA;EAEhB,IAAME,WAAA,GAAchB,OAAA,CAAQiB,SAAS,CAAC,UAACC,MAAA;WAAWA,MAAA,CAAOf,KAAK,KAAKA,KAAA;;EAEnEjB,yBAAA,CAA0B;IACxB,IAAI8B,WAAA,KAAgB,CAAC,KAAKG,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;MAChE3B,IAAA,CAAK,kDAAkD;IACzD;EACF,GAAG,CAACsB,WAAA,CAAY;EAEhB,IAAMM,UAAA,GAAa,aAAC,CAA+BC,MAAA,CAAlB,MAAMP,WAAA,EAAY;EAEnD,oBACEpC,KAAA,CAAA4C,aAAA,CAACpC,aAAA,EAAAqC,oBAAA,CAAAC,cAAA,KACKlB,SAAA;IACJmB,aAAA,EAAe9C,UAAA,yBAEbkC,KAAA,KAAU9B,QAAA,CAAS2C,OAAO,IAAItC,eAAe,CAACyB,KAAA,CAAM,EACpDlB,IAAA,KAAS;mBAGXjB,KAAA,CAAA4C,aAAA,CAAC;IAAIK,IAAA,EAAK;IAAaC,SAAS;KAC7Bd,WAAA,GAAc,CAAC,kBACdpC,KAAA,CAAA4C,aAAA,CAAC;IACC;IACAM,SAAS;IACTC,KAAA,EAAO;MACLC,KAAA,EAAO,EAAC,CAAuBT,MAAA,CAArB,MAAMvB,OAAA,CAAQiC,MAAM,EAAC;MAC/BC,SAAA,EAAWZ,UAAA;MACXa,eAAA,EAAiBb;IACnB;MAGHtB,OAAA,CAAQoC,GAAG,CAAC,UAAAxC,MAAA;QAAGyC,KAAA,GAAAzC,MAAA,CAAAyC,KAAA;MAAOC,eAAW,GAAA1C,MAAA,CAAXkC,SAAA;MAA+BS,WAAA,GAAA9B,0BAAA,CAAAb,MAAA,GAAtC,SAAO,Y;WACrBhB,KAAA,CAAA4C,aAAA,CAACnC,sBAAA,EAAAoC,oBAAA,CAAAC,cAAA;MACCc,GAAA,EAAK,EAAC,CAAoBjB,MAAA,CAAlBgB,WAAA,CAAYpC,KAAK;OACrBoC,WAAA;MACJT,SAAA,EAAWjD,UAAA,iCAA+CyD,eAAA;MAC1DvC,IAAA,EAAMA,IAAA,aAAAA,IAAA,cAAAA,IAAA,GAAQW,EAAA;MACd+B,OAAA,EAAStC,KAAA,KAAUoC,WAAA,CAAYpC,KAAK;MACpCG,QAAA,EAAU,SAAAA,CAAA;eAAMA,QAAA,CAASiC,WAAA,CAAYpC,KAAK;;QAEzCkC,KAAA;EACqB;AAKlC"},"metadata":{},"sourceType":"module"}