{"ast":null,"code":"import { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport { _ as _to_consumable_array } from \"@swc/helpers/_/_to_consumable_array\";\nimport * as React from \"react\";\nimport { classNames, noop } from \"@vkontakte/vkjs\";\nimport { useAdaptivity } from \"../../hooks/useAdaptivity\";\nimport { useAppearance } from \"../../hooks/useAppearance\";\nimport { useInsets } from \"../../hooks/useInsets\";\nimport { useKeyboardInputTracker } from \"../../hooks/useKeyboardInputTracker\";\nimport { SizeType } from \"../../lib/adaptivity\";\nimport { useDOM } from \"../../lib/dom\";\nimport { isRefObject } from \"../../lib/isRefObject\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { AppRootContext } from \"./AppRootContext\";\nimport { ElementScrollController, GlobalScrollController } from \"./ScrollContext\";\nvar warn = warnOnce(\"AppRoot\");\nvar vkuiSizeXClassNames = _define_property({\n  none: \"vkui--sizeX-none\"\n}, SizeType.REGULAR, \"vkui--sizeX-regular\");\nvar vkuiLayoutClassNames = {\n  card: \"vkui--layout-card\",\n  plain: \"vkui--layout-plain\"\n};\nfunction containerClassNames(layout, sizeX) {\n  var classNames = [];\n  if (layout) {\n    classNames.push(vkuiLayoutClassNames[layout]);\n  }\n  if (sizeX !== SizeType.COMPACT) {\n    classNames.push(vkuiSizeXClassNames[sizeX]);\n  }\n  return classNames;\n}\nvar INSET_CUSTOM_PROPERTY_PREFIX = \"--vkui_internal--safe_area_inset_\";\n/**\n * @see https://vkcom.github.io/VKUI/#/AppRoot\n */\nexport var AppRoot = function (_param) {\n  var children = _param.children,\n    _param_mode = _param.mode,\n    mode = _param_mode === void 0 ? \"full\" : _param_mode,\n    _param_scroll = _param.scroll,\n    scroll = _param_scroll === void 0 ? \"global\" : _param_scroll,\n    tmp = _param.portalRoot,\n    portalRootProp = tmp === void 0 ? null : tmp,\n    disablePortal = _param.disablePortal,\n    disableParentTransformForPositionFixedElements = _param.disableParentTransformForPositionFixedElements,\n    className = _param.className,\n    safeAreaInsets = _param.safeAreaInsets,\n    layout = _param.layout,\n    props = _object_without_properties(_param, [\"children\", \"mode\", \"scroll\", \"portalRoot\", \"disablePortal\", \"disableParentTransformForPositionFixedElements\", \"className\", \"safeAreaInsets\", \"layout\"]);\n  var isKeyboardInputActive = useKeyboardInputTracker();\n  var rootRef = React.useRef(null);\n  var _React_useState = _sliced_to_array(React.useState(null), 2),\n    portalRoot = _React_useState[0],\n    setPortalRoot = _React_useState[1];\n  var document = useDOM().document;\n  var deprecatedInsets = useInsets(!safeAreaInsets);\n  var insets = safeAreaInsets ? safeAreaInsets : deprecatedInsets;\n  var appearance = useAppearance();\n  var _useAdaptivity = useAdaptivity(),\n    hasPointer = _useAdaptivity.hasPointer,\n    _useAdaptivity_sizeX = _useAdaptivity.sizeX,\n    sizeX = _useAdaptivity_sizeX === void 0 ? \"none\" : _useAdaptivity_sizeX;\n  if (process.env.NODE_ENV === \"development\") {\n    if (!safeAreaInsets) {\n      // TODO [>=6]: удалить warn\n      warn(\"[@vkontakte/vk-bridge] Интеграция VKUI с @vkontakte/vk-bridge устарела и будет удалена в v6. Используйте хук `useInsets()` из @vkontakte/vk-bridge-react и результат передайте в параметр `safeAreaInsets` (см. https://github.com/VKCOM/VKUI/issues/5049)\"); // prettier-ignore\n    }\n  }\n  // setup portal\n  useIsomorphicLayoutEffect(function () {\n    var portal = null;\n    if (portalRootProp) {\n      if (isRefObject(portalRootProp)) {\n        portal = portalRootProp.current;\n      } else {\n        portal = portalRootProp;\n      }\n    }\n    if (!portal) {\n      portal = document.createElement(\"div\");\n      document.body.appendChild(portal);\n    }\n    setPortalRoot(portal);\n    return function () {\n      if (!portalRootProp) {\n        var _portal_parentElement;\n        portal === null || portal === void 0 ? void 0 : (_portal_parentElement = portal.parentElement) === null || _portal_parentElement === void 0 ? void 0 : _portal_parentElement.removeChild(portal);\n      }\n    };\n  }, [portalRootProp]);\n  // setup root classes\n  useIsomorphicLayoutEffect(function () {\n    var _rootRef_current;\n    if (mode === \"partial\") {\n      return noop;\n    }\n    var parent = (_rootRef_current = rootRef.current) === null || _rootRef_current === void 0 ? void 0 : _rootRef_current.parentElement;\n    var classes = [\"vkui__root\"].concat(mode === \"embedded\" ? \"vkui__root--embedded\" : []);\n    if (parent) {\n      var _parent_classList;\n      if (mode === \"embedded\" && !disableParentTransformForPositionFixedElements) {\n        parent.style.transform = \"translate3d(0, 0, 0)\";\n      }\n      (_parent_classList = parent.classList).add.apply(_parent_classList, _to_consumable_array(classes));\n    }\n    return function () {\n      if (parent) {\n        var _parent_classList;\n        if (mode === \"embedded\" && !disableParentTransformForPositionFixedElements) {\n          parent.style.transform = \"\";\n        }\n        (_parent_classList = parent.classList).remove.apply(_parent_classList, _to_consumable_array(classes));\n      }\n    };\n  }, [disableParentTransformForPositionFixedElements]);\n  useIsomorphicLayoutEffect(function () {\n    if (mode === \"full\") {\n      document.documentElement.classList.add(\"vkui\");\n      return function () {\n        document.documentElement.classList.remove(\"vkui\");\n      };\n    }\n    return undefined;\n  }, [document, mode]);\n  // setup insets\n  useIsomorphicLayoutEffect(function () {\n    var _rootRef_current;\n    if (mode === \"partial\" || !((_rootRef_current = rootRef.current) === null || _rootRef_current === void 0 ? void 0 : _rootRef_current.parentElement)) {\n      return noop;\n    }\n    var parent = rootRef.current.parentElement;\n    var key;\n    for (key in insets) {\n      if (insets.hasOwnProperty(key) && typeof insets[key] === \"number\") {\n        var inset = insets[key];\n        parent.style.setProperty(INSET_CUSTOM_PROPERTY_PREFIX + key, \"\".concat(inset, \"px\"));\n        portalRoot && portalRoot.style.setProperty(INSET_CUSTOM_PROPERTY_PREFIX + key, \"\".concat(inset, \"px\"));\n      }\n    }\n    return function () {\n      var key;\n      for (key in insets) {\n        if (insets.hasOwnProperty(key)) {\n          parent.style.removeProperty(INSET_CUSTOM_PROPERTY_PREFIX + key);\n          portalRoot && portalRoot.style.removeProperty(INSET_CUSTOM_PROPERTY_PREFIX + key);\n        }\n      }\n    };\n  }, [insets, portalRoot]);\n  // adaptivity handler\n  useIsomorphicLayoutEffect(function () {\n    var _container_classList;\n    var _rootRef_current;\n    if (mode === \"partial\") {\n      return noop;\n    }\n    var _$classNames = containerClassNames(layout, sizeX);\n    var container = mode === \"embedded\" ? (_rootRef_current = rootRef.current) === null || _rootRef_current === void 0 ? void 0 : _rootRef_current.parentElement : document.body;\n    if (!_$classNames.length || !container) {\n      return noop;\n    }\n    (_container_classList = container.classList).add.apply(_container_classList, _to_consumable_array(_$classNames));\n    return function () {\n      var _container_classList;\n      (_container_classList = container.classList).remove.apply(_container_classList, _to_consumable_array(_$classNames));\n    };\n  }, [sizeX, layout]);\n  useIsomorphicLayoutEffect(function () {\n    if (mode !== \"full\" || appearance === undefined) {\n      return noop;\n    }\n    document.documentElement.style.setProperty(\"color-scheme\", appearance);\n    return function () {\n      return document.documentElement.style.removeProperty(\"color-scheme\");\n    };\n  }, [appearance]);\n  var ScrollController = React.useMemo(function () {\n    return scroll === \"contain\" ? ElementScrollController : GlobalScrollController;\n  }, [scroll]);\n  var content = /*#__PURE__*/React.createElement(AppRootContext.Provider, {\n    value: {\n      appRoot: rootRef,\n      portalRoot: portalRoot,\n      embedded: mode === \"embedded\",\n      keyboardInput: isKeyboardInputActive,\n      mode: mode,\n      disablePortal: disablePortal,\n      layout: layout\n    }\n  }, /*#__PURE__*/React.createElement(ScrollController, {\n    elRef: rootRef\n  }, children));\n  return mode === \"partial\" ? content : /*#__PURE__*/React.createElement(\"div\", _object_spread({\n    ref: rootRef,\n    className: classNames(\"vkuiAppRoot\", hasPointer === undefined ? \"vkuiAppRoot--pointer-none\" : !hasPointer && \"vkuiAppRoot--pointer-has-not\", className)\n  }, props), content);\n};","map":{"version":3,"names":["React","classNames","noop","useAdaptivity","useAppearance","useInsets","useKeyboardInputTracker","SizeType","useDOM","isRefObject","useIsomorphicLayoutEffect","warnOnce","AppRootContext","ElementScrollController","GlobalScrollController","warn","vkuiSizeXClassNames","_define_property","none","REGULAR","vkuiLayoutClassNames","card","plain","containerClassNames","layout","sizeX","push","COMPACT","INSET_CUSTOM_PROPERTY_PREFIX","AppRoot","_param","children","_param_mode","mode","_param_scroll","scroll","tmp","portalRoot","portalRootProp","disablePortal","disableParentTransformForPositionFixedElements","className","safeAreaInsets","props","_object_without_properties","isKeyboardInputActive","rootRef","useRef","_React_useState","_sliced_to_array","useState","setPortalRoot","document","deprecatedInsets","insets","appearance","_useAdaptivity","hasPointer","_useAdaptivity_sizeX","process","env","NODE_ENV","portal","current","createElement","body","appendChild","_portal_parentElement","parentElement","removeChild","_rootRef_current","parent","classes","concat","_parent_classList","style","transform","classList","add","apply","_to_consumable_array","remove","documentElement","undefined","key","hasOwnProperty","inset","setProperty","removeProperty","_container_classList","_$classNames","container","length","ScrollController","useMemo","content","Provider","value","appRoot","embedded","keyboardInput","elRef","_object_spread","ref"],"sources":["../../../src/components/AppRoot/AppRoot.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useAppearance } from '../../hooks/useAppearance';\nimport { useInsets } from '../../hooks/useInsets';\nimport { useKeyboardInputTracker } from '../../hooks/useKeyboardInputTracker';\nimport { SizeType } from '../../lib/adaptivity';\nimport { useDOM } from '../../lib/dom';\nimport { isRefObject } from '../../lib/isRefObject';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { AppRootContext } from './AppRootContext';\nimport { ElementScrollController, GlobalScrollController } from './ScrollContext';\nimport styles from './AppRoot.module.css';\n\nconst warn = warnOnce('AppRoot');\n\nexport type SafeAreaInsets = {\n  top?: number;\n  right?: number;\n  bottom?: number;\n  left?: number;\n};\n\nconst vkuiSizeXClassNames = {\n  none: 'vkui--sizeX-none',\n  [SizeType.REGULAR]: 'vkui--sizeX-regular',\n};\n\nconst vkuiLayoutClassNames = {\n  card: 'vkui--layout-card',\n  plain: 'vkui--layout-plain',\n};\n\nfunction containerClassNames(layout: AppRootProps['layout'], sizeX: SizeType | 'none'): string[] {\n  const classNames: string[] = [];\n\n  if (layout) {\n    classNames.push(vkuiLayoutClassNames[layout]);\n  }\n\n  if (sizeX !== SizeType.COMPACT) {\n    classNames.push(vkuiSizeXClassNames[sizeX]);\n  }\n\n  return classNames;\n}\n\nconst INSET_CUSTOM_PROPERTY_PREFIX = `--vkui_internal--safe_area_inset_`;\n\n// Используйте classList, но будьте осторожны\n/* eslint-disable no-restricted-properties */\n\nexport interface AppRootProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** Режим встраивания */\n  mode?: 'partial' | 'embedded' | 'full';\n  window?: Window;\n  scroll?: 'global' | 'contain';\n  safeAreaInsets?: SafeAreaInsets;\n  /**\n   * Кастомный root-элемент портала\n   */\n  portalRoot?: HTMLElement | React.RefObject<HTMLElement> | null;\n  /**\n   * Отключает рендер всплывающих компонентов в отдельном контейнере\n   */\n  disablePortal?: boolean;\n  /**\n   * По умолчанию, mode=\"embedded\" переносит систему координат элементов с `position: fixed` на\n   * свой контейнер через `transform: translate3d(0, 0, 0)`.\n   *\n   * Это поведение можно отключить с помощью этого параметра.\n   */\n  disableParentTransformForPositionFixedElements?: boolean;\n  layout?: 'card' | 'plain';\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/AppRoot\n */\nexport const AppRoot = ({\n  children,\n  mode = 'full',\n  scroll = 'global',\n  portalRoot: portalRootProp = null,\n  disablePortal,\n  disableParentTransformForPositionFixedElements,\n  className,\n  safeAreaInsets,\n  layout,\n  ...props\n}: AppRootProps) => {\n  const isKeyboardInputActive = useKeyboardInputTracker();\n  const rootRef = React.useRef<HTMLDivElement | null>(null);\n  const [portalRoot, setPortalRoot] = React.useState<HTMLElement | null>(null);\n  const { document } = useDOM();\n  const deprecatedInsets = useInsets(!safeAreaInsets);\n  const insets = safeAreaInsets ? safeAreaInsets : deprecatedInsets;\n  const appearance = useAppearance();\n\n  const { hasPointer, sizeX = 'none' } = useAdaptivity();\n\n  if (process.env.NODE_ENV === 'development') {\n    if (!safeAreaInsets) {\n      // TODO [>=6]: удалить warn\n      warn(\"[@vkontakte/vk-bridge] Интеграция VKUI с @vkontakte/vk-bridge устарела и будет удалена в v6. Используйте хук `useInsets()` из @vkontakte/vk-bridge-react и результат передайте в параметр `safeAreaInsets` (см. https://github.com/VKCOM/VKUI/issues/5049)\"); // prettier-ignore\n    }\n  }\n\n  // setup portal\n  useIsomorphicLayoutEffect(() => {\n    let portal: HTMLElement | null = null;\n    if (portalRootProp) {\n      if (isRefObject(portalRootProp)) {\n        portal = portalRootProp.current;\n      } else {\n        portal = portalRootProp;\n      }\n    }\n    if (!portal) {\n      portal = document!.createElement('div');\n      document!.body.appendChild(portal);\n    }\n    setPortalRoot(portal);\n    return () => {\n      if (!portalRootProp) {\n        portal?.parentElement?.removeChild(portal);\n      }\n    };\n  }, [portalRootProp]);\n\n  // setup root classes\n  useIsomorphicLayoutEffect(() => {\n    if (mode === 'partial') {\n      return noop;\n    }\n\n    const parent = rootRef.current?.parentElement;\n    const classes = ['vkui__root'].concat(mode === 'embedded' ? 'vkui__root--embedded' : []);\n    if (parent) {\n      if (mode === 'embedded' && !disableParentTransformForPositionFixedElements) {\n        parent.style.transform = 'translate3d(0, 0, 0)';\n      }\n      parent.classList.add(...classes);\n    }\n\n    return () => {\n      if (parent) {\n        if (mode === 'embedded' && !disableParentTransformForPositionFixedElements) {\n          parent.style.transform = '';\n        }\n        parent.classList.remove(...classes);\n      }\n    };\n  }, [disableParentTransformForPositionFixedElements]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (mode === 'full') {\n      document!.documentElement.classList.add('vkui');\n\n      return () => {\n        document!.documentElement.classList.remove('vkui');\n      };\n    }\n\n    return undefined;\n  }, [document, mode]);\n\n  // setup insets\n  useIsomorphicLayoutEffect(() => {\n    if (mode === 'partial' || !rootRef.current?.parentElement) {\n      return noop;\n    }\n\n    const parent = rootRef.current.parentElement;\n\n    let key: keyof SafeAreaInsets;\n    for (key in insets) {\n      if (insets.hasOwnProperty(key) && typeof insets[key] === 'number') {\n        const inset = insets[key];\n        parent.style.setProperty(INSET_CUSTOM_PROPERTY_PREFIX + key, `${inset}px`);\n        portalRoot &&\n          portalRoot.style.setProperty(INSET_CUSTOM_PROPERTY_PREFIX + key, `${inset}px`);\n      }\n    }\n\n    return () => {\n      let key: keyof SafeAreaInsets;\n      for (key in insets) {\n        if (insets.hasOwnProperty(key)) {\n          parent.style.removeProperty(INSET_CUSTOM_PROPERTY_PREFIX + key);\n          portalRoot && portalRoot.style.removeProperty(INSET_CUSTOM_PROPERTY_PREFIX + key);\n        }\n      }\n    };\n  }, [insets, portalRoot]);\n\n  // adaptivity handler\n  useIsomorphicLayoutEffect(() => {\n    if (mode === 'partial') {\n      return noop;\n    }\n\n    const classNames = containerClassNames(layout, sizeX);\n\n    const container = mode === 'embedded' ? rootRef.current?.parentElement : document!.body;\n\n    if (!classNames.length || !container) {\n      return noop;\n    }\n\n    container.classList.add(...classNames);\n    return () => {\n      container.classList.remove(...classNames);\n    };\n  }, [sizeX, layout]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (mode !== 'full' || appearance === undefined) {\n      return noop;\n    }\n    document!.documentElement.style.setProperty('color-scheme', appearance);\n\n    return () => document!.documentElement.style.removeProperty('color-scheme');\n  }, [appearance]);\n\n  const ScrollController = React.useMemo(\n    () => (scroll === 'contain' ? ElementScrollController : GlobalScrollController),\n    [scroll],\n  );\n\n  const content = (\n    <AppRootContext.Provider\n      value={{\n        appRoot: rootRef,\n        portalRoot,\n        embedded: mode === 'embedded',\n        keyboardInput: isKeyboardInputActive,\n        mode,\n        disablePortal,\n        layout,\n      }}\n    >\n      <ScrollController elRef={rootRef}>{children}</ScrollController>\n    </AppRootContext.Provider>\n  );\n\n  return mode === 'partial' ? (\n    content\n  ) : (\n    <div\n      ref={rootRef}\n      className={classNames(\n        styles['AppRoot'],\n        hasPointer === undefined\n          ? styles['AppRoot--pointer-none']\n          : !hasPointer && styles['AppRoot--pointer-has-not'],\n        className,\n      )}\n      {...props}\n    >\n      {content}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}