{"ast":null,"code":"import _asyncToGenerator from\"/Users/mirustal/Documents/project/rooms/front/rooms/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/mirustal/Documents/project/rooms/front/rooms/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext}from\"react\";import{Icon28DeleteOutline,Icon28DoorArrowRightOutline,Icon28EditOutline,Icon28ShareOutline}from\"@vkontakte/icons\";import{PanelHeaderContext,SimpleCell}from\"@vkontakte/vkui\";import{getFromStorage,pushToStorage,shareInviteLink}from\"../../../bridge/bridgeLib\";import{Locales}from\"../../../locales/locales\";import{VkStorageKeys}from\"../../../bridge/storageKeys\";import{AlertManagerContext,AreYouShureAlert}from\"../../contexts/AlertProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AlterActionSheet(_ref){var roomInfo=_ref.roomInfo,returnBack=_ref.returnBack,handleActiveEditMode=_ref.handleActiveEditMode,userIsAdmin=_ref.userIsAdmin,deleteRoom=_ref.deleteRoom,contextOpened=_ref.contextOpened,toggleContext=_ref.toggleContext;var alertManager=useContext(AlertManagerContext);var handleExitRoom=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:alertManager.showAlert(AreYouShureAlert({alertManager:alertManager,onYes:function(){var _onYes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var idFromStorage,updatedString;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getFromStorage(VkStorageKeys.JoinedRooms);case 2:idFromStorage=_context.sent;updatedString=idFromStorage.replace(new RegExp(\",\"+roomInfo.id,'g'),\"\");pushToStorage(VkStorageKeys.JoinedRooms,updatedString);returnBack();case 6:case\"end\":return _context.stop();}}},_callee);}));function onYes(){return _onYes.apply(this,arguments);}return onYes;}(),yesTitle:Locales.Alerts.Exit,noTitle:Locales.Alerts.Cancel,title:Locales.Alerts.ConfirmExitRoomTitle}));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleExitRoom(){return _ref2.apply(this,arguments);};}();var handleShareRoom=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return shareInviteLink(roomInfo.id);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function handleShareRoom(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(PanelHeaderContext,{opened:contextOpened,onClose:toggleContext,children:[/*#__PURE__*/_jsx(SimpleCell,{before:/*#__PURE__*/_jsx(Icon28ShareOutline,{}),onClick:handleShareRoom,\"data-mode\":\"all\",children:Locales.ActionSheetName.ShareRoom}),userIsAdmin&&/*#__PURE__*/_jsx(SimpleCell,{before:/*#__PURE__*/_jsx(Icon28EditOutline,{}),onClick:handleActiveEditMode,\"data-mode\":\"all\",children:Locales.ActionSheetName.EditRoom}),userIsAdmin?/*#__PURE__*/_jsx(SimpleCell,{before:/*#__PURE__*/_jsx(Icon28DeleteOutline,{fill:\"red\"}),onClick:function onClick(){return alertManager.showAlert(AreYouShureAlert({alertManager:alertManager,onYes:deleteRoom,yesTitle:Locales.Alerts.Delete,noTitle:Locales.Alerts.Cancel,title:Locales.Alerts.ConfirmDeleteRoomTitle}));},\"data-mode\":\"all\",children:Locales.ActionSheetName.DeleteRoom}):/*#__PURE__*/_jsx(SimpleCell,{before:/*#__PURE__*/_jsx(Icon28DoorArrowRightOutline,{}),onClick:handleExitRoom,\"data-mode\":\"all\",children:Locales.ActionSheetName.ExitRoom})]});}export default AlterActionSheet;","map":{"version":3,"names":["React","useContext","Icon28DeleteOutline","Icon28DoorArrowRightOutline","Icon28EditOutline","Icon28ShareOutline","PanelHeaderContext","SimpleCell","getFromStorage","pushToStorage","shareInviteLink","Locales","VkStorageKeys","AlertManagerContext","AreYouShureAlert","AlterActionSheet","roomInfo","returnBack","handleActiveEditMode","userIsAdmin","deleteRoom","contextOpened","toggleContext","alertManager","handleExitRoom","showAlert","onYes","JoinedRooms","idFromStorage","updatedString","replace","RegExp","id","yesTitle","Alerts","Exit","noTitle","Cancel","title","ConfirmExitRoomTitle","handleShareRoom","ActionSheetName","ShareRoom","EditRoom","Delete","ConfirmDeleteRoomTitle","DeleteRoom","ExitRoom"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/AlterActionSheet.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport {\n  Icon28DeleteOutline,\n  Icon28DoorArrowRightOutline,\n  Icon28EditOutline,\n  Icon28ShareOutline,\n} from \"@vkontakte/icons\";\n\nimport { PanelHeaderContext, SimpleCell } from \"@vkontakte/vkui\";\nimport {\n  getFromStorage,\n  pushToStorage,\n  shareInviteLink,\n} from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { VkStorageKeys } from \"../../../bridge/storageKeys\";\nimport {\n  AlertManagerContext, AreYouShureAlert,\n} from \"../../contexts/AlertProvider\";\n\nfunction AlterActionSheet({ roomInfo, returnBack, handleActiveEditMode, userIsAdmin, deleteRoom, contextOpened, toggleContext }) {\n  const alertManager = useContext(AlertManagerContext);\n\n  const handleExitRoom = async () => {\n    alertManager.showAlert(AreYouShureAlert({alertManager: alertManager, onYes: async () => {\n      const idFromStorage = await getFromStorage(VkStorageKeys.JoinedRooms);\n      const updatedString = idFromStorage.replace(new RegExp(\",\" + roomInfo.id, 'g'), \"\");\n      pushToStorage(VkStorageKeys.JoinedRooms, updatedString);\n      returnBack();\n    }, yesTitle: Locales.Alerts.Exit, noTitle: Locales.Alerts.Cancel, title: Locales.Alerts.ConfirmExitRoomTitle}))\n  };\n\n  const handleShareRoom = async () => {\n    await shareInviteLink(roomInfo.id);\n  };\n\n  return (\n    <PanelHeaderContext opened={contextOpened} onClose={toggleContext}>\n      <SimpleCell\n        before={<Icon28ShareOutline />}\n        onClick={handleShareRoom}\n        data-mode=\"all\"\n      >\n        {Locales.ActionSheetName.ShareRoom}\n      </SimpleCell>\n      {userIsAdmin && (\n        <SimpleCell\n          before={<Icon28EditOutline />}\n          onClick={handleActiveEditMode}\n          data-mode=\"all\"\n        >\n          {Locales.ActionSheetName.EditRoom}\n        </SimpleCell>\n      )}\n      {\n        userIsAdmin ? (\n          <SimpleCell\n            before={<Icon28DeleteOutline  fill=\"red\"/>}\n            onClick={() => alertManager.showAlert(AreYouShureAlert({alertManager: alertManager, onYes: deleteRoom, yesTitle: Locales.Alerts.Delete, noTitle: Locales.Alerts.Cancel, title: Locales.Alerts.ConfirmDeleteRoomTitle}))}\n            data-mode=\"all\"\n          >\n            {Locales.ActionSheetName.DeleteRoom}\n          </SimpleCell>\n        ) : (\n          <SimpleCell\n            before={<Icon28DoorArrowRightOutline />}\n            onClick={handleExitRoom}\n            data-mode=\"all\"\n          >\n            {Locales.ActionSheetName.ExitRoom}\n          </SimpleCell>\n        )\n      }\n    </PanelHeaderContext>\n  )\n}\n\nexport default AlterActionSheet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}