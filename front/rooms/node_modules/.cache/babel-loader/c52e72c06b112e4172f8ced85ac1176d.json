{"ast":null,"code":"var _jsxFileName = \"/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/AlterActionSheet.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useRef } from \"react\";\nimport { Icon28ShareOutline, Icon28EditOutline, Icon28DeleteOutline, Icon28DoorArrowRightOutline } from \"@vkontakte/icons\";\nimport { ActionSheet, ActionSheetItem } from \"@vkontakte/vkui\";\nimport { getFromStorage, pushToStorage, shareInviteLink, deleteRoom } from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { VkStorageKeys } from \"../../../bridge/storageKeys\";\nimport { AlertManagerContext, DeleteErrorAlert } from \"../../contexts/AlertProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AlterActionSheet(_ref) {\n  _s();\n\n  let {\n    roomInfo,\n    returnBack,\n    handleActiveEditMode,\n    userIsAdmin\n  } = _ref;\n  const [actionSheetVisible, setActionSheetVisible] = useState(false);\n  const alertManager = useContext(AlertManagerContext);\n  const nameTargetRef = useRef();\n\n  const handleExitRoom = async () => {\n    const idFromStorage = await getFromStorage(VkStorageKeys.JoinedRooms);\n    const updatedString = idFromStorage.replace(new RegExp(\",\" + roomInfo.id, 'g'), \"\");\n    pushToStorage(VkStorageKeys.JoinedRooms, updatedString);\n    returnBack();\n  };\n\n  const handleShareRoom = async () => {\n    await shareInviteLink(roomInfo.id);\n  };\n\n  const handleDeleteRoom = () => {\n    alertManager.showAlert(DeleteErrorAlert({\n      alertManager: alertManager,\n      deleteRoom: () => {\n        deleteRoom(roomInfo.id);\n        returnBack();\n      }\n    }));\n  };\n\n  const renderActionSheetItem = (onClick, icon, text, mode) => /*#__PURE__*/_jsxDEV(ActionSheetItem, {\n    onClick: onClick,\n    autoClose: true,\n    before: icon,\n    mode: mode,\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n\n  const actionSheetItems = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [renderActionSheetItem(handleShareRoom, /*#__PURE__*/_jsxDEV(Icon28ShareOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 49\n      }, this), Locales.ActionSheetName.ShareRoom), userIsAdmin && renderActionSheetItem(handleActiveEditMode, /*#__PURE__*/_jsxDEV(Icon28EditOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 69\n      }, this), Locales.ActionSheetName.EditRoom), userIsAdmin ? renderActionSheetItem(handleDeleteRoom, /*#__PURE__*/_jsxDEV(Icon28DeleteOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 64\n      }, this), Locales.ActionSheetName.DeleteRoom, \"destructive\") : renderActionSheetItem(handleExitRoom, /*#__PURE__*/_jsxDEV(Icon28DoorArrowRightOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 49\n      }, this), Locales.ActionSheetName.ExitRoom)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: nameTargetRef,\n      onClick: () => setActionSheetVisible(true),\n      style: {\n        marginRight: '10px'\n      },\n      children: roomInfo.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), actionSheetVisible && /*#__PURE__*/_jsxDEV(ActionSheet, {\n      onClose: () => setActionSheetVisible(false),\n      placement: \"center\",\n      toggleRef: nameTargetRef,\n      children: actionSheetItems()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AlterActionSheet, \"AJ9yNYNVsYgi9RrOEmuJVP3HuG0=\");\n\n_c = AlterActionSheet;\nexport default AlterActionSheet;\n\nvar _c;\n\n$RefreshReg$(_c, \"AlterActionSheet\");","map":{"version":3,"names":["React","useContext","useState","useRef","Icon28ShareOutline","Icon28EditOutline","Icon28DeleteOutline","Icon28DoorArrowRightOutline","ActionSheet","ActionSheetItem","getFromStorage","pushToStorage","shareInviteLink","deleteRoom","Locales","VkStorageKeys","AlertManagerContext","DeleteErrorAlert","AlterActionSheet","roomInfo","returnBack","handleActiveEditMode","userIsAdmin","actionSheetVisible","setActionSheetVisible","alertManager","nameTargetRef","handleExitRoom","idFromStorage","JoinedRooms","updatedString","replace","RegExp","id","handleShareRoom","handleDeleteRoom","showAlert","renderActionSheetItem","onClick","icon","text","mode","actionSheetItems","ActionSheetName","ShareRoom","EditRoom","DeleteRoom","ExitRoom","marginRight","name"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/AlterActionSheet.jsx"],"sourcesContent":["import React, { useContext, useState, useRef } from \"react\";\nimport {\n  Icon28ShareOutline,\n  Icon28EditOutline,\n  Icon28DeleteOutline,\n  Icon28DoorArrowRightOutline,\n} from \"@vkontakte/icons\";\nimport { ActionSheet, ActionSheetItem } from \"@vkontakte/vkui\";\nimport { getFromStorage, pushToStorage, shareInviteLink, deleteRoom } from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { VkStorageKeys } from \"../../../bridge/storageKeys\";\nimport { AlertManagerContext, DeleteErrorAlert } from \"../../contexts/AlertProvider\";\n\nfunction AlterActionSheet({ roomInfo, returnBack, handleActiveEditMode, userIsAdmin }) {\n  const [actionSheetVisible, setActionSheetVisible] = useState(false);\n  const alertManager = useContext(AlertManagerContext);\n  const nameTargetRef = useRef();\n\n  const handleExitRoom = async () => {\n    const idFromStorage = await getFromStorage(VkStorageKeys.JoinedRooms);\n    const updatedString = idFromStorage.replace(new RegExp(\",\" + roomInfo.id, 'g'), \"\");\n    pushToStorage(VkStorageKeys.JoinedRooms, updatedString);\n    returnBack();\n  };\n\n  const handleShareRoom = async () => {\n    await shareInviteLink(roomInfo.id);\n  };\n\n  const handleDeleteRoom = () => {\n    alertManager.showAlert(\n      DeleteErrorAlert({\n        alertManager: alertManager,\n        deleteRoom: () => {\n          deleteRoom(roomInfo.id);\n          returnBack();\n        },\n      })\n    );\n  };\n\n  const renderActionSheetItem = (onClick, icon, text, mode) => (\n    <ActionSheetItem onClick={onClick} autoClose before={icon} mode={mode}>\n      {text}\n    </ActionSheetItem>\n  );\n\n  const actionSheetItems = () => {\n    return (\n      <>\n        {renderActionSheetItem(handleShareRoom, <Icon28ShareOutline />, Locales.ActionSheetName.ShareRoom)}\n        {userIsAdmin && renderActionSheetItem(handleActiveEditMode, <Icon28EditOutline />, Locales.ActionSheetName.EditRoom)}\n        {userIsAdmin ? renderActionSheetItem(handleDeleteRoom, <Icon28DeleteOutline />, Locales.ActionSheetName.DeleteRoom, \"destructive\") :\n          renderActionSheetItem(handleExitRoom, <Icon28DoorArrowRightOutline />, Locales.ActionSheetName.ExitRoom)}\n      </>\n    );\n  };\n\n  return (\n    <>\n      <div ref={nameTargetRef} onClick={() => setActionSheetVisible(true)} style={{ marginRight: '10px' }}> \n        {roomInfo.name}\n      </div>\n\n      {actionSheetVisible && (\n        <ActionSheet onClose={() => setActionSheetVisible(false)} placement=\"center\" toggleRef={nameTargetRef}>\n          {actionSheetItems()}\n        </ActionSheet>\n      )}\n    </>\n  );\n}\n\nexport default AlterActionSheet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}