{"ast":null,"code":"import { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useAdaptivity } from \"../../hooks/useAdaptivity\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { SizeType } from \"../../lib/adaptivity\";\nimport { getFormFieldModeFromSelectType } from \"../../lib/select\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField } from \"../FormField/FormField\";\nimport { SelectTypography } from \"../SelectTypography/SelectTypography\";\nvar sizeYClassNames = _define_property({\n  none: \"vkuiSelect--sizeY-none\"\n}, SizeType.COMPACT, \"vkuiSelect--sizeY-compact\");\n/**\n * @see https://vkcom.github.io/VKUI/#/NativeSelect\n */\nvar NativeSelect = function (_param) {\n  var style = _param.style,\n    _param_defaultValue = _param.defaultValue,\n    defaultValue = _param_defaultValue === void 0 ? \"\" : _param_defaultValue,\n    align = _param.align,\n    placeholder = _param.placeholder,\n    children = _param.children,\n    className = _param.className,\n    getRef = _param.getRef,\n    getRootRef = _param.getRootRef,\n    disabled = _param.disabled,\n    multiline = _param.multiline,\n    _param_selectType = _param.selectType,\n    selectType = _param_selectType === void 0 ? \"default\" : _param_selectType,\n    status = _param.status,\n    _param_icon = _param.icon,\n    icon = _param_icon === void 0 ? /*#__PURE__*/React.createElement(DropdownIcon, null) : _param_icon,\n    before = _param.before,\n    onChangeProp = _param.onChange,\n    valueProp = _param.value,\n    restProps = _object_without_properties(_param, [\"style\", \"defaultValue\", \"align\", \"placeholder\", \"children\", \"className\", \"getRef\", \"getRootRef\", \"disabled\", \"multiline\", \"selectType\", \"status\", \"icon\", \"before\", \"onChange\", \"value\"]);\n  var _React_useState = _sliced_to_array(React.useState(\"\"), 2),\n    title = _React_useState[0],\n    setTitle = _React_useState[1];\n  var _React_useState1 = _sliced_to_array(React.useState(false), 2),\n    empty = _React_useState1[0],\n    setEmpty = _React_useState1[1];\n  var _useEnsuredControl = _sliced_to_array(useEnsuredControl({\n      defaultValue: defaultValue,\n      disabled: disabled,\n      onChange: onChangeProp,\n      value: valueProp\n    }), 2),\n    value = _useEnsuredControl[0],\n    onChange = _useEnsuredControl[1];\n  var selectRef = useExternRef(getRef);\n  var _useAdaptivity = useAdaptivity(),\n    _useAdaptivity_sizeY = _useAdaptivity.sizeY,\n    sizeY = _useAdaptivity_sizeY === void 0 ? \"none\" : _useAdaptivity_sizeY;\n  useIsomorphicLayoutEffect(function () {\n    var _selectRef_current;\n    var selectedOption = (_selectRef_current = selectRef.current) === null || _selectRef_current === void 0 ? void 0 : _selectRef_current.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setEmpty(selectedOption.value === \"\" && placeholder != null);\n    }\n  }, [value, children]);\n  return /*#__PURE__*/React.createElement(FormField, {\n    Component: \"label\",\n    className: classNames(\"vkuiSelect\", \"vkuiInternalNativeSelect\", before && \"vkuiSelect--hasBefore\", empty && \"vkuiSelect--empty\", multiline && \"vkuiSelect--multiline\", align === \"center\" && \"vkuiSelect--align-center\", align === \"right\" && \"vkuiSelect--align-right\", sizeY !== SizeType.REGULAR && sizeYClassNames[sizeY], className),\n    style: style,\n    getRootRef: getRootRef,\n    disabled: disabled,\n    before: before,\n    after: icon,\n    status: status,\n    mode: getFormFieldModeFromSelectType(selectType)\n  }, /*#__PURE__*/React.createElement(\"select\", _object_spread_props(_object_spread({}, restProps), {\n    disabled: disabled,\n    className: \"vkuiSelect__el\",\n    onChange: onChange,\n    value: value,\n    ref: selectRef\n  }), placeholder && /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\"\n  }, placeholder), children), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiSelect__container\",\n    \"aria-hidden\": true\n  }, /*#__PURE__*/React.createElement(SelectTypography, {\n    className: \"vkuiSelect__title\",\n    selectType: selectType\n  }, title)));\n};\nexport { NativeSelect };","map":{"version":3,"names":["React","classNames","useAdaptivity","useEnsuredControl","useExternRef","SizeType","getFormFieldModeFromSelectType","useIsomorphicLayoutEffect","DropdownIcon","FormField","SelectTypography","sizeYClassNames","_define_property","none","COMPACT","NativeSelect","_param","style","_param_defaultValue","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","multiline","_param_selectType","selectType","status","_param_icon","icon","createElement","before","onChangeProp","onChange","valueProp","value","restProps","_object_without_properties","_React_useState","_sliced_to_array","useState","title","setTitle","_React_useState1","empty","setEmpty","_useEnsuredControl","selectRef","_useAdaptivity","_useAdaptivity_sizeY","sizeY","_selectRef_current","selectedOption","current","options","selectedIndex","text","Component","REGULAR","after","mode","_object_spread_props","_object_spread","ref"],"sources":["../../../src/components/NativeSelect/NativeSelect.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useEnsuredControl } from '../../hooks/useEnsuredControl';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { SizeType } from '../../lib/adaptivity';\nimport { getFormFieldModeFromSelectType } from '../../lib/select';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { HasAlign, HasRef, HasRootRef } from '../../types';\nimport { DropdownIcon } from '../DropdownIcon/DropdownIcon';\nimport { FormField, FormFieldProps } from '../FormField/FormField';\nimport type { SelectType } from '../Select/Select';\nimport { SelectTypography } from '../SelectTypography/SelectTypography';\nimport styles from '../Select/Select.module.css';\n\nconst sizeYClassNames = {\n  none: styles['Select--sizeY-none'],\n  [SizeType.COMPACT]: styles['Select--sizeY-compact'],\n};\n\nexport interface NativeSelectProps\n  extends Omit<React.SelectHTMLAttributes<HTMLSelectElement>, 'multiple'>,\n    HasRef<HTMLSelectElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasAlign,\n    Pick<FormFieldProps, 'before' | 'status'> {\n  placeholder?: string;\n  multiline?: boolean;\n  selectType?: SelectType;\n  /**\n   * Иконка раскрывающегося списка\n   */\n  icon?: React.ReactNode;\n}\n\nexport interface SelectState {\n  value?: React.SelectHTMLAttributes<HTMLSelectElement>['value'];\n  title?: string;\n  notSelected?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/NativeSelect\n */\nconst NativeSelect = ({\n  style,\n  defaultValue = '',\n  align,\n  placeholder,\n  children,\n  className,\n  getRef,\n  getRootRef,\n  disabled,\n  multiline,\n  selectType = 'default',\n  status,\n  icon = <DropdownIcon />,\n  before,\n  onChange: onChangeProp,\n  value: valueProp,\n  ...restProps\n}: NativeSelectProps) => {\n  const [title, setTitle] = React.useState('');\n  const [empty, setEmpty] = React.useState(false);\n  const [value, onChange] = useEnsuredControl({\n    defaultValue,\n    disabled,\n    onChange: onChangeProp,\n    value: valueProp,\n  });\n  const selectRef = useExternRef(getRef);\n  const { sizeY = 'none' } = useAdaptivity();\n\n  useIsomorphicLayoutEffect(() => {\n    const selectedOption = selectRef.current?.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setEmpty(selectedOption.value === '' && placeholder != null);\n    }\n  }, [value, children]);\n\n  return (\n    <FormField\n      Component=\"label\"\n      className={classNames(\n        styles['Select'],\n        'vkuiInternalNativeSelect',\n        before && styles['Select--hasBefore'],\n        empty && styles['Select--empty'],\n        multiline && styles['Select--multiline'],\n        align === 'center' && styles['Select--align-center'],\n        align === 'right' && styles['Select--align-right'],\n        sizeY !== SizeType.REGULAR && sizeYClassNames[sizeY],\n        className,\n      )}\n      style={style}\n      getRootRef={getRootRef}\n      disabled={disabled}\n      before={before}\n      after={icon}\n      status={status}\n      mode={getFormFieldModeFromSelectType(selectType)}\n    >\n      <select\n        {...restProps}\n        disabled={disabled}\n        className={styles['Select__el']}\n        onChange={onChange}\n        value={value}\n        ref={selectRef}\n      >\n        {placeholder && <option value=\"\">{placeholder}</option>}\n        {children}\n      </select>\n      <div className={styles['Select__container']} aria-hidden>\n        <SelectTypography className={styles['Select__title']} selectType={selectType}>\n          {title}\n        </SelectTypography>\n      </div>\n    </FormField>\n  );\n};\n\nexport { NativeSelect };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}