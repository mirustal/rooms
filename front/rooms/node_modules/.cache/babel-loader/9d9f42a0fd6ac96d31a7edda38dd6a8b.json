{"ast":null,"code":"import * as React from \"react\";\nimport { hasMouse as _hasPointer } from \"@vkontakte/vkjs\";\nimport { useBridgeAdaptivity } from \"../../hooks/useBridgeAdaptivity\";\nimport { BREAKPOINTS, SizeType, ViewHeight, ViewWidth } from \"../../lib/adaptivity\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { AdaptivityContext } from \"./AdaptivityContext\";\nvar warn = warnOnce(\"AdaptivityProvider\");\n/**\n * @see https://vkcom.github.io/VKUI/#/AdaptivityProvider\n */\nexport var AdaptivityProvider = function (param) {\n  var viewWidth = param.viewWidth,\n    viewHeight = param.viewHeight,\n    sizeX = param.sizeX,\n    sizeY = param.sizeY,\n    hasPointer = param.hasPointer,\n    hasHover = param.hasHover,\n    children = param.children;\n  // TODO [>=6]: удалить использование хука (#5049)\n  /* eslint-disable @typescript-eslint/naming-convention */\n  var LEGACY_isPerhapsPropsByBridgeTypeAdaptive = viewWidth !== undefined && viewHeight !== undefined;\n  var LEGACY_isPerhapsPropsByBridgeTypeForceMobile = viewWidth !== undefined && sizeX !== undefined && sizeY !== undefined;\n  var LEGACY_disableInternalUseBridgeAdaptivity = LEGACY_isPerhapsPropsByBridgeTypeAdaptive || LEGACY_isPerhapsPropsByBridgeTypeForceMobile;\n  var LEGACY_bridge = useBridgeAdaptivity(LEGACY_disableInternalUseBridgeAdaptivity);\n  /* eslint-enable @typescript-eslint/naming-convention */\n  if (process.env.NODE_ENV === \"development\") {\n    // TODO [>=6]: удалить warn\n    if (!LEGACY_disableInternalUseBridgeAdaptivity) {\n      warn(\"[@vkontakte/vk-bridge] Интеграция VKUI с @vkontakte/vk-bridge устарела и будет удалена в v6. Используйте хук `useAdaptivity()` из @vkontakte/vk-bridge-react и результат передайте в компонент (см. https://github.com/VKCOM/VKUI/issues/5049)\"); // prettier-ignore\n    }\n  }\n\n  var adaptivity = React.useMemo(function () {\n    return calculateAdaptivity({\n      viewWidth: viewWidth,\n      viewHeight: viewHeight,\n      sizeX: sizeX,\n      sizeY: sizeY,\n      hasPointer: hasPointer,\n      hasHover: hasHover\n    }, LEGACY_bridge);\n  }, [viewWidth, viewHeight, sizeX, sizeY, hasPointer, hasHover, LEGACY_bridge]);\n  return /*#__PURE__*/React.createElement(AdaptivityContext.Provider, {\n    value: adaptivity\n  }, children);\n};\nfunction calculateAdaptivity(param, LEGACY_bridge) {\n  var viewWidth = param.viewWidth,\n    viewHeight = param.viewHeight,\n    sizeX = param.sizeX,\n    sizeY = param.sizeY,\n    hasPointer = param.hasPointer,\n    hasHover = param.hasHover;\n  // TODO [>=6]: удалить блок кода c использованием LEGACY_bridge (#5049)\n  //  https://github.com/VKCOM/VKUI/blob/v5.5.5/packages/vkui/src/components/AdaptivityProvider/AdaptivityProvider.tsx#L46-L92\n  if (LEGACY_bridge.type === \"adaptive\") {\n    var viewportWidth = LEGACY_bridge.viewportWidth,\n      viewportHeight = LEGACY_bridge.viewportHeight;\n    if (viewportWidth >= BREAKPOINTS.DESKTOP) {\n      viewWidth = ViewWidth.DESKTOP;\n    } else if (viewportWidth >= BREAKPOINTS.TABLET) {\n      viewWidth = ViewWidth.TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.SMALL_TABLET) {\n      viewWidth = ViewWidth.SMALL_TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.MOBILE) {\n      viewWidth = ViewWidth.MOBILE;\n    } else {\n      viewWidth = ViewWidth.SMALL_MOBILE;\n    }\n    if (viewportHeight >= BREAKPOINTS.MEDIUM_HEIGHT) {\n      viewHeight = ViewHeight.MEDIUM;\n    } else if (viewportHeight >= BREAKPOINTS.MOBILE_LANDSCAPE_HEIGHT) {\n      viewHeight = ViewHeight.SMALL;\n    } else {\n      viewHeight = ViewHeight.EXTRA_SMALL;\n    }\n    if (viewWidth <= ViewWidth.MOBILE) {\n      sizeX = SizeType.COMPACT;\n    } else {\n      sizeX = SizeType.REGULAR;\n    }\n    if (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer || viewHeight <= ViewHeight.EXTRA_SMALL) {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else if (LEGACY_bridge.type === \"force_mobile\" || LEGACY_bridge.type === \"force_mobile_compact\") {\n    viewWidth = ViewWidth.MOBILE;\n    sizeX = SizeType.COMPACT;\n    if (LEGACY_bridge.type === \"force_mobile_compact\") {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else {\n    if (sizeX === undefined && viewWidth !== undefined) {\n      if (viewWidth <= ViewWidth.MOBILE) {\n        sizeX = SizeType.COMPACT;\n      } else {\n        sizeX = SizeType.REGULAR;\n      }\n    }\n    if (sizeY === undefined && viewWidth !== undefined && viewHeight !== undefined) {\n      if (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer || viewHeight <= ViewHeight.EXTRA_SMALL) {\n        sizeY = SizeType.COMPACT;\n      } else {\n        sizeY = SizeType.REGULAR;\n      }\n    }\n  }\n  return {\n    viewWidth: viewWidth,\n    viewHeight: viewHeight,\n    sizeX: sizeX,\n    sizeY: sizeY,\n    hasPointer: hasPointer,\n    hasHover: hasHover\n  };\n}","map":{"version":3,"names":["React","hasMouse","_hasPointer","useBridgeAdaptivity","BREAKPOINTS","SizeType","ViewHeight","ViewWidth","warnOnce","AdaptivityContext","warn","AdaptivityProvider","param","viewWidth","viewHeight","sizeX","sizeY","hasPointer","hasHover","children","LEGACY_isPerhapsPropsByBridgeTypeAdaptive","undefined","LEGACY_isPerhapsPropsByBridgeTypeForceMobile","LEGACY_disableInternalUseBridgeAdaptivity","LEGACY_bridge","process","env","NODE_ENV","adaptivity","useMemo","calculateAdaptivity","createElement","Provider","value","type","viewportWidth","viewportHeight","DESKTOP","TABLET","SMALL_TABLET","MOBILE","SMALL_MOBILE","MEDIUM_HEIGHT","MEDIUM","MOBILE_LANDSCAPE_HEIGHT","SMALL","EXTRA_SMALL","COMPACT","REGULAR"],"sources":["../../../src/components/AdaptivityProvider/AdaptivityProvider.tsx"],"sourcesContent":["import * as React from 'react';\nimport { hasMouse as _hasPointer } from '@vkontakte/vkjs';\nimport { BridgeAdaptivity, useBridgeAdaptivity } from '../../hooks/useBridgeAdaptivity';\nimport { BREAKPOINTS, SizeType, ViewHeight, ViewWidth } from '../../lib/adaptivity';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HasChildren } from '../../types';\nimport { AdaptivityContext, type AdaptivityProps } from './AdaptivityContext';\n\nconst warn = warnOnce('AdaptivityProvider');\n\nexport interface AdaptivityProviderProps extends AdaptivityProps, HasChildren {}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/AdaptivityProvider\n */\nexport const AdaptivityProvider = ({\n  viewWidth,\n  viewHeight,\n  sizeX,\n  sizeY,\n  hasPointer,\n  hasHover,\n  children,\n}: AdaptivityProviderProps) => {\n  // TODO [>=6]: удалить использование хука (#5049)\n  /* eslint-disable @typescript-eslint/naming-convention */\n  const LEGACY_isPerhapsPropsByBridgeTypeAdaptive =\n    viewWidth !== undefined && viewHeight !== undefined;\n  const LEGACY_isPerhapsPropsByBridgeTypeForceMobile =\n    viewWidth !== undefined && sizeX !== undefined && sizeY !== undefined;\n  const LEGACY_disableInternalUseBridgeAdaptivity =\n    LEGACY_isPerhapsPropsByBridgeTypeAdaptive || LEGACY_isPerhapsPropsByBridgeTypeForceMobile;\n  const LEGACY_bridge = useBridgeAdaptivity(LEGACY_disableInternalUseBridgeAdaptivity);\n  /* eslint-enable @typescript-eslint/naming-convention */\n\n  if (process.env.NODE_ENV === 'development') {\n    // TODO [>=6]: удалить warn\n    if (!LEGACY_disableInternalUseBridgeAdaptivity) {\n      warn(\"[@vkontakte/vk-bridge] Интеграция VKUI с @vkontakte/vk-bridge устарела и будет удалена в v6. Используйте хук `useAdaptivity()` из @vkontakte/vk-bridge-react и результат передайте в компонент (см. https://github.com/VKCOM/VKUI/issues/5049)\"); // prettier-ignore\n    }\n  }\n\n  const adaptivity = React.useMemo(\n    () =>\n      calculateAdaptivity(\n        {\n          viewWidth,\n          viewHeight,\n          sizeX,\n          sizeY,\n          hasPointer,\n          hasHover,\n        },\n        LEGACY_bridge,\n      ),\n    [viewWidth, viewHeight, sizeX, sizeY, hasPointer, hasHover, LEGACY_bridge],\n  );\n\n  return <AdaptivityContext.Provider value={adaptivity}>{children}</AdaptivityContext.Provider>;\n};\n\nfunction calculateAdaptivity(\n  { viewWidth, viewHeight, sizeX, sizeY, hasPointer, hasHover }: AdaptivityProps,\n  LEGACY_bridge: BridgeAdaptivity, // eslint-disable-line @typescript-eslint/naming-convention\n) {\n  // TODO [>=6]: удалить блок кода c использованием LEGACY_bridge (#5049)\n  //  https://github.com/VKCOM/VKUI/blob/v5.5.5/packages/vkui/src/components/AdaptivityProvider/AdaptivityProvider.tsx#L46-L92\n  if (LEGACY_bridge.type === 'adaptive') {\n    const { viewportWidth, viewportHeight } = LEGACY_bridge;\n\n    if (viewportWidth >= BREAKPOINTS.DESKTOP) {\n      viewWidth = ViewWidth.DESKTOP;\n    } else if (viewportWidth >= BREAKPOINTS.TABLET) {\n      viewWidth = ViewWidth.TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.SMALL_TABLET) {\n      viewWidth = ViewWidth.SMALL_TABLET;\n    } else if (viewportWidth >= BREAKPOINTS.MOBILE) {\n      viewWidth = ViewWidth.MOBILE;\n    } else {\n      viewWidth = ViewWidth.SMALL_MOBILE;\n    }\n\n    if (viewportHeight >= BREAKPOINTS.MEDIUM_HEIGHT) {\n      viewHeight = ViewHeight.MEDIUM;\n    } else if (viewportHeight >= BREAKPOINTS.MOBILE_LANDSCAPE_HEIGHT) {\n      viewHeight = ViewHeight.SMALL;\n    } else {\n      viewHeight = ViewHeight.EXTRA_SMALL;\n    }\n\n    if (viewWidth <= ViewWidth.MOBILE) {\n      sizeX = SizeType.COMPACT;\n    } else {\n      sizeX = SizeType.REGULAR;\n    }\n\n    if (\n      (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer) ||\n      viewHeight <= ViewHeight.EXTRA_SMALL\n    ) {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else if (\n    LEGACY_bridge.type === 'force_mobile' ||\n    LEGACY_bridge.type === 'force_mobile_compact'\n  ) {\n    viewWidth = ViewWidth.MOBILE;\n    sizeX = SizeType.COMPACT;\n\n    if (LEGACY_bridge.type === 'force_mobile_compact') {\n      sizeY = SizeType.COMPACT;\n    } else {\n      sizeY = SizeType.REGULAR;\n    }\n  } else {\n    if (sizeX === undefined && viewWidth !== undefined) {\n      if (viewWidth <= ViewWidth.MOBILE) {\n        sizeX = SizeType.COMPACT;\n      } else {\n        sizeX = SizeType.REGULAR;\n      }\n    }\n    if (sizeY === undefined && viewWidth !== undefined && viewHeight !== undefined) {\n      if (\n        (viewWidth >= ViewWidth.SMALL_TABLET && _hasPointer) ||\n        viewHeight <= ViewHeight.EXTRA_SMALL\n      ) {\n        sizeY = SizeType.COMPACT;\n      } else {\n        sizeY = SizeType.REGULAR;\n      }\n    }\n  }\n\n  return {\n    viewWidth,\n    viewHeight,\n    sizeX,\n    sizeY,\n    hasPointer,\n    hasHover,\n  };\n}\n"],"mappings":"AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,QAAA,IAAYC,WAAW,QAAQ;AACxC,SAA2BC,mBAAmB,QAAQ;AACtD,SAASC,WAAW,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ;AAC7D,SAASC,QAAQ,QAAQ;AAEzB,SAASC,iBAAiB,QAA8B;AAExD,IAAMC,IAAA,GAAOF,QAAA,CAAS;AAItB;;;AAGA,OAAO,IAAMG,kBAAA,GAAqB,SAAAA,CAAAC,KAAA;MAChCC,SAAA,GAAAD,KAAA,CAAAC,SAAA;IACAC,UAAA,GAAAF,KAAA,CAAAE,UAAA;IACAC,KAAA,GAAAH,KAAA,CAAAG,KAAA;IACAC,KAAA,GAAAJ,KAAA,CAAAI,KAAA;IACAC,UAAA,GAAAL,KAAA,CAAAK,UAAA;IACAC,QAAA,GAAAN,KAAA,CAAAM,QAAA;IACAC,QAAA,GAAAP,KAAA,CAAAO,QAAA;EAEA;EACA;EACA,IAAMC,yCAAA,GACJP,SAAA,KAAcQ,SAAA,IAAaP,UAAA,KAAeO,SAAA;EAC5C,IAAMC,4CAAA,GACJT,SAAA,KAAcQ,SAAA,IAAaN,KAAA,KAAUM,SAAA,IAAaL,KAAA,KAAUK,SAAA;EAC9D,IAAME,yCAAA,GACJH,yCAAA,IAA6CE,4CAAA;EAC/C,IAAME,aAAA,GAAgBrB,mBAAA,CAAoBoB,yCAAA;EAC1C;EAEA,IAAIE,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;IAC1C;IACA,IAAI,CAACJ,yCAAA,EAA2C;MAC9Cb,IAAA,CAAK,mPAAmP;IAC1P;EACF;;EAEA,IAAMkB,UAAA,GAAa5B,KAAA,CAAM6B,OAAO,CAC9B;WACEC,mBAAA,CACE;MACEjB,SAAA,EAAAA,SAAA;MACAC,UAAA,EAAAA,UAAA;MACAC,KAAA,EAAAA,KAAA;MACAC,KAAA,EAAAA,KAAA;MACAC,UAAA,EAAAA,UAAA;MACAC,QAAA,EAAAA;IACF,GACAM,aAAA;KAEJ,CAACX,SAAA,EAAWC,UAAA,EAAYC,KAAA,EAAOC,KAAA,EAAOC,UAAA,EAAYC,QAAA,EAAUM,aAAA,CAAc;EAG5E,oBAAOxB,KAAA,CAAA+B,aAAA,CAACtB,iBAAA,CAAkBuB,QAAQ;IAACC,KAAA,EAAOL;KAAaT,QAAA;AACzD;AAEA,SAASW,oBACPlB,KAA8E,EAC9EY,aAA+B;MAD7BX,SAAA,GAAFD,KAAA,CAAEC,SAAA;IAAWC,UAAA,GAAbF,KAAA,CAAaE,UAAA;IAAYC,KAAA,GAAzBH,KAAA,CAAyBG,KAAA;IAAOC,KAAA,GAAhCJ,KAAA,CAAgCI,KAAA;IAAOC,UAAA,GAAvCL,KAAA,CAAuCK,UAAA;IAAYC,QAAA,GAAnDN,KAAA,CAAmDM,QAAA;EAGnD;EACA;EACA,IAAIM,aAAA,CAAcU,IAAI,KAAK,YAAY;IACrC,IAAQC,aAAA,GAAkCX,aAAA,CAAlCW,aAAA;MAAeC,cAAA,GAAmBZ,aAAA,CAAnBY,cAAA;IAEvB,IAAID,aAAA,IAAiB/B,WAAA,CAAYiC,OAAO,EAAE;MACxCxB,SAAA,GAAYN,SAAA,CAAU8B,OAAO;IAC/B,OAAO,IAAIF,aAAA,IAAiB/B,WAAA,CAAYkC,MAAM,EAAE;MAC9CzB,SAAA,GAAYN,SAAA,CAAU+B,MAAM;IAC9B,OAAO,IAAIH,aAAA,IAAiB/B,WAAA,CAAYmC,YAAY,EAAE;MACpD1B,SAAA,GAAYN,SAAA,CAAUgC,YAAY;IACpC,OAAO,IAAIJ,aAAA,IAAiB/B,WAAA,CAAYoC,MAAM,EAAE;MAC9C3B,SAAA,GAAYN,SAAA,CAAUiC,MAAM;IAC9B,OAAO;MACL3B,SAAA,GAAYN,SAAA,CAAUkC,YAAY;IACpC;IAEA,IAAIL,cAAA,IAAkBhC,WAAA,CAAYsC,aAAa,EAAE;MAC/C5B,UAAA,GAAaR,UAAA,CAAWqC,MAAM;IAChC,OAAO,IAAIP,cAAA,IAAkBhC,WAAA,CAAYwC,uBAAuB,EAAE;MAChE9B,UAAA,GAAaR,UAAA,CAAWuC,KAAK;IAC/B,OAAO;MACL/B,UAAA,GAAaR,UAAA,CAAWwC,WAAW;IACrC;IAEA,IAAIjC,SAAA,IAAaN,SAAA,CAAUiC,MAAM,EAAE;MACjCzB,KAAA,GAAQV,QAAA,CAAS0C,OAAO;IAC1B,OAAO;MACLhC,KAAA,GAAQV,QAAA,CAAS2C,OAAO;IAC1B;IAEA,IACEnC,SAAC,IAAaN,SAAA,CAAUgC,YAAY,IAAIrC,WAAA,IACxCY,UAAA,IAAcR,UAAA,CAAWwC,WAAW,EACpC;MACA9B,KAAA,GAAQX,QAAA,CAAS0C,OAAO;IAC1B,OAAO;MACL/B,KAAA,GAAQX,QAAA,CAAS2C,OAAO;IAC1B;EACF,OAAO,IACLxB,aAAA,CAAcU,IAAI,KAAK,kBACvBV,aAAA,CAAcU,IAAI,KAAK,wBACvB;IACArB,SAAA,GAAYN,SAAA,CAAUiC,MAAM;IAC5BzB,KAAA,GAAQV,QAAA,CAAS0C,OAAO;IAExB,IAAIvB,aAAA,CAAcU,IAAI,KAAK,wBAAwB;MACjDlB,KAAA,GAAQX,QAAA,CAAS0C,OAAO;IAC1B,OAAO;MACL/B,KAAA,GAAQX,QAAA,CAAS2C,OAAO;IAC1B;EACF,OAAO;IACL,IAAIjC,KAAA,KAAUM,SAAA,IAAaR,SAAA,KAAcQ,SAAA,EAAW;MAClD,IAAIR,SAAA,IAAaN,SAAA,CAAUiC,MAAM,EAAE;QACjCzB,KAAA,GAAQV,QAAA,CAAS0C,OAAO;MAC1B,OAAO;QACLhC,KAAA,GAAQV,QAAA,CAAS2C,OAAO;MAC1B;IACF;IACA,IAAIhC,KAAA,KAAUK,SAAA,IAAaR,SAAA,KAAcQ,SAAA,IAAaP,UAAA,KAAeO,SAAA,EAAW;MAC9E,IACER,SAAC,IAAaN,SAAA,CAAUgC,YAAY,IAAIrC,WAAA,IACxCY,UAAA,IAAcR,UAAA,CAAWwC,WAAW,EACpC;QACA9B,KAAA,GAAQX,QAAA,CAAS0C,OAAO;MAC1B,OAAO;QACL/B,KAAA,GAAQX,QAAA,CAAS2C,OAAO;MAC1B;IACF;EACF;EAEA,OAAO;IACLnC,SAAA,EAAAA,SAAA;IACAC,UAAA,EAAAA,UAAA;IACAC,KAAA,EAAAA,KAAA;IACAC,KAAA,EAAAA,KAAA;IACAC,UAAA,EAAAA,UAAA;IACAC,QAAA,EAAAA;EACF;AACF"},"metadata":{},"sourceType":"module"}