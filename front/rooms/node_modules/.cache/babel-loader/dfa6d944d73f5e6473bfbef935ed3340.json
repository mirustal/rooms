{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { pressedKey } from \"../../lib/accessibility\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nexport var TabsModeContext = /*#__PURE__*/React.createContext({\n  mode: \"default\",\n  withGaps: false\n});\n/**\n * @see https://vkcom.github.io/VKUI/#/Tabs\n */\nexport var Tabs = function (_param) {\n  var children = _param.children,\n    _param_mode = _param.mode,\n    mode = _param_mode === void 0 ? \"default\" : _param_mode,\n    _param_role = _param.role,\n    role = _param_role === void 0 ? \"tablist\" : _param_role,\n    restProps = _object_without_properties(_param, [\"children\", \"mode\", \"role\"]);\n  var platform = usePlatform();\n  var document = useDOM().document;\n  var isTabFlow = role === \"tablist\";\n  var tabsRef = React.useRef(null);\n  var withGaps = mode === \"accent\" || mode === \"secondary\";\n  var getTabEls = function () {\n    if (!tabsRef.current) {\n      return [];\n    }\n    return Array.from(\n    // eslint-disable-next-line no-restricted-properties\n    tabsRef.current.querySelectorAll(\"[role=tab]:not([disabled])\"));\n  };\n  var handleDocumentKeydown = function (event) {\n    if (!document || !tabsRef.current || !isTabFlow) {\n      return;\n    }\n    var key = pressedKey(event);\n    switch (key) {\n      case \"ArrowLeft\":\n      case \"ArrowRight\":\n      case \"End\":\n      case \"Home\":\n        {\n          var tabEls = getTabEls();\n          var currentFocusedElIndex = tabEls.findIndex(function (el) {\n            return document.activeElement === el;\n          });\n          if (currentFocusedElIndex === -1) {\n            return;\n          }\n          var nextIndex = 0;\n          if (key === \"Home\") {\n            nextIndex = 0;\n          } else if (key === \"End\") {\n            nextIndex = tabEls.length - 1;\n          } else {\n            var offset = key === \"ArrowRight\" ? 1 : -1;\n            nextIndex = currentFocusedElIndex + offset;\n          }\n          var nextTabEl = tabEls[nextIndex];\n          if (nextTabEl) {\n            event.preventDefault();\n            nextTabEl.focus();\n          }\n          break;\n        }\n      /*\n      В JAWS и NVDA стрелка вниз активирует контент.\n      Это не прописано в стандартах, но по ссылке ниже это рекомендуется делать.\n      https://inclusive-components.design/tabbed-interfaces/\n      */\n      case \"ArrowDown\":\n        {\n          var tabEls1 = getTabEls();\n          var currentFocusedEl = tabEls1.find(function (el) {\n            return document.activeElement === el;\n          });\n          if (!currentFocusedEl || currentFocusedEl.getAttribute(\"aria-selected\") !== \"true\") {\n            return;\n          }\n          var relatedContentElId = currentFocusedEl.getAttribute(\"aria-controls\");\n          if (!relatedContentElId) {\n            return;\n          }\n          // eslint-disable-next-line no-restricted-properties\n          var relatedContentEl = document.getElementById(relatedContentElId);\n          if (!relatedContentEl) {\n            return;\n          }\n          event.preventDefault();\n          relatedContentEl.focus();\n          break;\n        }\n      case \"Space\":\n      case \"Enter\":\n        {\n          var tabEls2 = getTabEls();\n          var currentFocusedEl1 = tabEls2.find(function (el) {\n            return document.activeElement === el;\n          });\n          if (currentFocusedEl1) {\n            currentFocusedEl1.click();\n          }\n        }\n    }\n  };\n  useGlobalEventListener(document, \"keydown\", handleDocumentKeydown, {\n    capture: true\n  });\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    baseClassName: classNames(\"vkuiTabs\", \"vkuiInternalTabs\", platform === Platform.VKCOM && \"vkuiInternalTabs--vkcom\", withGaps && classNames(\"vkuiTabs--withGaps\", \"vkuiInternalTabs--withGaps\"), mode === \"default\" && \"vkuiTabs--mode-default\"),\n    role: role\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiTabs__in\",\n    ref: tabsRef\n  }, /*#__PURE__*/React.createElement(TabsModeContext.Provider, {\n    value: {\n      mode: mode,\n      withGaps: withGaps\n    }\n  }, children)));\n};","map":{"version":3,"names":["React","classNames","useGlobalEventListener","usePlatform","pressedKey","useDOM","Platform","RootComponent","TabsModeContext","createContext","mode","withGaps","Tabs","_param","children","_param_mode","_param_role","role","restProps","_object_without_properties","platform","document","isTabFlow","tabsRef","useRef","getTabEls","current","Array","from","querySelectorAll","handleDocumentKeydown","event","key","tabEls","currentFocusedElIndex","findIndex","el","activeElement","nextIndex","length","offset","nextTabEl","preventDefault","focus","tabEls1","currentFocusedEl","find","getAttribute","relatedContentElId","relatedContentEl","getElementById","tabEls2","currentFocusedEl1","click","capture","createElement","_object_spread_props","_object_spread","baseClassName","VKCOM","className","ref","Provider","value"],"sources":["../../../src/components/Tabs/Tabs.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { pressedKey } from '../../lib/accessibility';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './Tabs.module.css';\n\nexport interface TabsProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  mode?: 'default' | 'accent' | 'secondary';\n}\n\nexport interface TabsContextProps {\n  mode: TabsProps['mode'];\n  withGaps: boolean;\n}\n\nexport const TabsModeContext = React.createContext<TabsContextProps>({\n  mode: 'default',\n  withGaps: false,\n});\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Tabs\n */\nexport const Tabs = ({ children, mode = 'default', role = 'tablist', ...restProps }: TabsProps) => {\n  const platform = usePlatform();\n  const { document } = useDOM();\n\n  const isTabFlow = role === 'tablist';\n\n  const tabsRef = React.useRef<HTMLDivElement>(null);\n\n  const withGaps = mode === 'accent' || mode === 'secondary';\n\n  const getTabEls = () => {\n    if (!tabsRef.current) {\n      return [];\n    }\n\n    return Array.from(\n      // eslint-disable-next-line no-restricted-properties\n      tabsRef.current.querySelectorAll<HTMLDivElement>('[role=tab]:not([disabled])'),\n    );\n  };\n\n  const handleDocumentKeydown = (event: KeyboardEvent) => {\n    if (!document || !tabsRef.current || !isTabFlow) {\n      return;\n    }\n\n    const key = pressedKey(event);\n\n    switch (key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'End':\n      case 'Home': {\n        const tabEls = getTabEls();\n        const currentFocusedElIndex = tabEls.findIndex((el) => document.activeElement === el);\n        if (currentFocusedElIndex === -1) {\n          return;\n        }\n\n        let nextIndex = 0;\n        if (key === 'Home') {\n          nextIndex = 0;\n        } else if (key === 'End') {\n          nextIndex = tabEls.length - 1;\n        } else {\n          const offset = key === 'ArrowRight' ? 1 : -1;\n          nextIndex = currentFocusedElIndex + offset;\n        }\n\n        const nextTabEl = tabEls[nextIndex];\n\n        if (nextTabEl) {\n          event.preventDefault();\n          nextTabEl.focus();\n        }\n\n        break;\n      }\n      /*\n       В JAWS и NVDA стрелка вниз активирует контент.\n       Это не прописано в стандартах, но по ссылке ниже это рекомендуется делать.\n       https://inclusive-components.design/tabbed-interfaces/\n      */\n      case 'ArrowDown': {\n        const tabEls = getTabEls();\n        const currentFocusedEl = tabEls.find((el) => document.activeElement === el);\n\n        if (!currentFocusedEl || currentFocusedEl.getAttribute('aria-selected') !== 'true') {\n          return;\n        }\n\n        const relatedContentElId = currentFocusedEl.getAttribute('aria-controls');\n        if (!relatedContentElId) {\n          return;\n        }\n\n        // eslint-disable-next-line no-restricted-properties\n        const relatedContentEl = document.getElementById(relatedContentElId);\n        if (!relatedContentEl) {\n          return;\n        }\n\n        event.preventDefault();\n        relatedContentEl.focus();\n\n        break;\n      }\n      case 'Space':\n      case 'Enter': {\n        const tabEls = getTabEls();\n        const currentFocusedEl = tabEls.find((el) => document.activeElement === el);\n        if (currentFocusedEl) {\n          currentFocusedEl.click();\n        }\n      }\n    }\n  };\n\n  useGlobalEventListener(document, 'keydown', handleDocumentKeydown, {\n    capture: true,\n  });\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['Tabs'],\n        'vkuiInternalTabs',\n        platform === Platform.VKCOM && 'vkuiInternalTabs--vkcom',\n        withGaps && classNames(styles['Tabs--withGaps'], 'vkuiInternalTabs--withGaps'),\n        mode === 'default' && styles['Tabs--mode-default'],\n      )}\n      role={role}\n    >\n      <div className={styles['Tabs__in']} ref={tabsRef}>\n        <TabsModeContext.Provider value={{ mode, withGaps }}>{children}</TabsModeContext.Provider>\n      </div>\n    </RootComponent>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}