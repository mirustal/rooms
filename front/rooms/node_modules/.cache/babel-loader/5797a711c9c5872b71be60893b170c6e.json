{"ast":null,"code":"import _slicedToArray from\"/Users/mirustal/Documents/project/rooms/front/rooms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Icon16DeleteOutline,Icon16PenOutline,Icon24RefreshOutline,Icon28CheckCircleOutline,Icon28VolumeOutline}from\"@vkontakte/icons\";import{Div,Group,IconButton,SimpleCell,Snackbar,Tooltip}from\"@vkontakte/vkui\";import{joinCall}from\"../../../bridge/bridgeLib\";import{Locales}from\"../../../locales/locales\";import{useContext,useEffect,useState}from\"react\";import{AlertManagerContext,TipAlert}from\"../../contexts/AlertProvider\";import useChannelTip from'./hooks/ChannelTip';// Предполагается, что этот хук будет создан\nimport{openSuccess}from\"../../Snackbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ChannelView(_ref){var channel=_ref.channel,channelIndex=_ref.channelIndex,editModeActive=_ref.editModeActive,renameToChannel=_ref.renameToChannel,refreshChannel=_ref.refreshChannel,deleteToChannel=_ref.deleteToChannel,userIsAdmin=_ref.userIsAdmin;var alerts=useContext(AlertManagerContext);var _useChannelTip=useChannelTip(channelIndex),isTipShown=_useChannelTip.isTipShown,setTipShown=_useChannelTip.setTipShown;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),snackbar=_useState4[0],setSnackbar=_useState4[1];var joinChannel=function joinChannel(){var isFirstCall=localStorage.getItem(\"isFirstCall\");if(!userIsAdmin||isFirstCall!==null){joinCall(channel.joinlink,function(){});return;}localStorage.setItem(\"isFirstCall\",\"false\");alerts.showAlert(TipAlert({message:Locales.Hints.DontKillCall,alertManager:alerts,onClose:joinChannel}));};var handleIconButtonClick=function handleIconButtonClick(action){return function(e){e.preventDefault();e.stopPropagation();action();};};return/*#__PURE__*/_jsxs(SimpleCell,{before:/*#__PURE__*/_jsx(Icon28VolumeOutline,{}),after:userIsAdmin&&/*#__PURE__*/_jsx(Tooltip,{isShown:isTipShown,text:Locales.Hints.RefreshChannel,onClick:handleIconButtonClick,onClose:function onClose(){return setTipShown(false);},children:/*#__PURE__*/_jsx(IconButton,{onClick:handleIconButtonClick(function(){refreshChannel();openSuccess(snackbar,setSnackbar);}),children:/*#__PURE__*/_jsx(Icon24RefreshOutline,{})})}),onClick:joinChannel,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"#\",channel.name]}),editModeActive&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:handleIconButtonClick(function(){return renameToChannel();}),children:/*#__PURE__*/_jsx(Icon16PenOutline,{})}),/*#__PURE__*/_jsx(IconButton,{style:{color:'red'},onClick:handleIconButtonClick(function(){return deleteToChannel(channelIndex);}),children:/*#__PURE__*/_jsx(Icon16DeleteOutline,{})})]})]}),/*#__PURE__*/_jsx(_Fragment,{children:snackbar})]});}","map":{"version":3,"names":["Icon16DeleteOutline","Icon16PenOutline","Icon24RefreshOutline","Icon28CheckCircleOutline","Icon28VolumeOutline","Div","Group","IconButton","SimpleCell","Snackbar","Tooltip","joinCall","Locales","useContext","useEffect","useState","AlertManagerContext","TipAlert","useChannelTip","openSuccess","ChannelView","channel","channelIndex","editModeActive","renameToChannel","refreshChannel","deleteToChannel","userIsAdmin","alerts","isTipShown","setTipShown","text","setText","snackbar","setSnackbar","joinChannel","isFirstCall","localStorage","getItem","joinlink","setItem","showAlert","message","Hints","DontKillCall","alertManager","onClose","handleIconButtonClick","action","e","preventDefault","stopPropagation","RefreshChannel","display","alignItems","name","color"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/ChannelView.jsx"],"sourcesContent":["import {\n  Icon16DeleteOutline,\n  Icon16PenOutline,\n  Icon24RefreshOutline,\n  Icon28CheckCircleOutline,\n  Icon28VolumeOutline,\n} from \"@vkontakte/icons\";\nimport { Div, Group, IconButton, SimpleCell, Snackbar, Tooltip } from \"@vkontakte/vkui\";\nimport { joinCall } from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { AlertManagerContext, TipAlert } from \"../../contexts/AlertProvider\";\nimport useChannelTip from './hooks/ChannelTip'; // Предполагается, что этот хук будет создан\nimport { openSuccess } from \"../../Snackbar\";\n\nexport default function ChannelView({ channel, channelIndex, editModeActive, renameToChannel, refreshChannel, deleteToChannel, userIsAdmin }) {\n  const alerts = useContext(AlertManagerContext);\n  const { isTipShown, setTipShown } = useChannelTip(channelIndex);\n  const [text, setText] = useState('');\n  const [snackbar, setSnackbar] = useState(null);\n\n  \n\n  const joinChannel = () => {\n    const isFirstCall = localStorage.getItem(\"isFirstCall\");\n    if (!userIsAdmin || isFirstCall !== null) {\n      joinCall(channel.joinlink, () => {});\n      return;\n    }\n\n    localStorage.setItem(\"isFirstCall\", \"false\");\n    alerts.showAlert(TipAlert({ message: Locales.Hints.DontKillCall, alertManager: alerts, onClose: joinChannel }));\n  };\n\n  const handleIconButtonClick = (action) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    action();\n  };\n\n  return (\n    <SimpleCell\n      before={<Icon28VolumeOutline />}\n      after={userIsAdmin && (\n        <Tooltip\n          isShown={isTipShown}\n          text={Locales.Hints.RefreshChannel}\n          onClick={handleIconButtonClick}\n          onClose={() => setTipShown(false)}\n        >\n          <IconButton onClick={handleIconButtonClick(() => { \n             refreshChannel(); \n  openSuccess(snackbar, setSnackbar);\n})}>\n            <Icon24RefreshOutline />\n          </IconButton>\n        </Tooltip>\n      )}\n      onClick={joinChannel}\n    >\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <b>#{channel.name}</b>\n        {editModeActive && (\n          <>\n            <IconButton onClick={handleIconButtonClick(() => renameToChannel())}>\n              <Icon16PenOutline />\n            </IconButton>\n            <IconButton\n              style={{ color: 'red' }}\n              onClick={handleIconButtonClick(() => deleteToChannel(channelIndex))}\n            >\n              <Icon16DeleteOutline />\n            </IconButton>\n          </>\n        )}\n      </div>\n      <>\n        {snackbar}\n        </>\n    </SimpleCell>\n    \n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}