{"ast":null,"code":"import _slicedToArray from\"/Users/mirustal/Documents/project/rooms/front/rooms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Views}from\"../model/views\";import{Root}from\"@vkontakte/vkui\";import Rooms from\"./views/Rooms/Rooms\";import Channels from\"./views/Channels/Channels\";import{useContext,useEffect,useState}from\"react\";import{joinRoomOnStart,showAd}from\"../bridge/bridgeLib\";import{RoomManager}from\"./views/Rooms/RoomManager\";import{AlertManagerContext,ErrorAlert}from\"./contexts/AlertProvider\";import{Locales}from\"../locales/locales\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Main(){var _useState=useState(Views.Servers.id),_useState2=_slicedToArray(_useState,2),activeView=_useState2[0],setActiveView=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),activeRoomInfo=_useState4[0],setRoomInfo=_useState4[1];var alertsManager=useContext(AlertManagerContext);var handleUpdateRoom=function handleUpdateRoom(updateRoom){setRoomInfo(updateRoom);};var enterRoom=function enterRoom(roomInfo){if(!roomInfo.members){alertsManager.showAlert(ErrorAlert({message:Locales.Errors.FailedEnterRoom,alertManager:alertsManager}));return;}showAd();handleUpdateRoom(roomInfo);setActiveView(Views.Rooms.id);};useEffect(function(){if(joinRoomOnStart!==undefined)enterRoom(joinRoomOnStart);},[]);return/*#__PURE__*/_jsxs(Root,{activeView:activeView,children:[/*#__PURE__*/_jsx(Rooms,{id:Views.Servers.id,enterRoom:enterRoom}),/*#__PURE__*/_jsx(Channels,{id:Views.Rooms.id,roomManager:new RoomManager(activeRoomInfo,handleUpdateRoom),returnBack:function returnBack(){return setActiveView(Views.Servers.id);}})]});}","map":{"version":3,"names":["Views","Root","Rooms","Channels","useContext","useEffect","useState","joinRoomOnStart","showAd","RoomManager","AlertManagerContext","ErrorAlert","Locales","Main","Servers","id","activeView","setActiveView","activeRoomInfo","setRoomInfo","alertsManager","handleUpdateRoom","updateRoom","enterRoom","roomInfo","members","showAlert","message","Errors","FailedEnterRoom","alertManager","undefined"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/Main.jsx"],"sourcesContent":["import { Views } from \"../model/views\";\nimport { Root } from \"@vkontakte/vkui\";\nimport Rooms from \"./views/Rooms/Rooms\";\nimport Channels from \"./views/Channels/Channels\";\nimport { useContext, useEffect, useState } from \"react\";\nimport {joinRoomOnStart, showAd } from \"../bridge/bridgeLib\";\nimport { RoomManager } from \"./views/Rooms/RoomManager\";\nimport { AlertManagerContext, ErrorAlert } from \"./contexts/AlertProvider\";\nimport { Locales } from \"../locales/locales\";\n\n\n\n\nexport default function Main() {\n  const [activeView, setActiveView] = useState(Views.Servers.id);\n  const [activeRoomInfo, setRoomInfo] = useState(null);\n  const alertsManager = useContext(AlertManagerContext)\n\n  const handleUpdateRoom = (updateRoom) => {\n    setRoomInfo(updateRoom)\n  }\n\n  const enterRoom = function (roomInfo) {\n    if (!roomInfo.members){\n      alertsManager.showAlert(ErrorAlert({message: Locales.Errors.FailedEnterRoom, alertManager: alertsManager}))\n      return\n    }\n    showAd();\n    handleUpdateRoom(roomInfo);\n    setActiveView(Views.Rooms.id);\n  };\n\n\n  useEffect(() => {\n    if (joinRoomOnStart !== undefined)\n      enterRoom(joinRoomOnStart)\n  }, []);\n\n  return (\n    <Root activeView={activeView}>\n      <Rooms id={Views.Servers.id} enterRoom={enterRoom}/>\n      <Channels\n        id={Views.Rooms.id}\n        roomManager= {new RoomManager(activeRoomInfo, handleUpdateRoom)}\n        returnBack={() => setActiveView(Views.Servers.id)}\n      />\n    </Root>\n  );\n}\n"],"mappings":"yIAAA,OAASA,KAAT,KAAsB,gBAAtB,CACA,OAASC,IAAT,KAAqB,iBAArB,CACA,MAAOC,MAAP,KAAkB,qBAAlB,CACA,MAAOC,SAAP,KAAqB,2BAArB,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,QAAhC,KAAgD,OAAhD,CACA,OAAQC,eAAR,CAAyBC,MAAzB,KAAuC,qBAAvC,CACA,OAASC,WAAT,KAA4B,2BAA5B,CACA,OAASC,mBAAT,CAA8BC,UAA9B,KAAgD,0BAAhD,CACA,OAASC,OAAT,KAAwB,oBAAxB,C,wFAKA,cAAe,SAASC,KAAT,EAAgB,CAC7B,cAAoCP,QAAQ,CAACN,KAAK,CAACc,OAAN,CAAcC,EAAf,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eACA,eAAsCX,QAAQ,CAAC,IAAD,CAA9C,yCAAOY,cAAP,eAAuBC,WAAvB,eACA,GAAMC,cAAa,CAAGhB,UAAU,CAACM,mBAAD,CAAhC,CAEA,GAAMW,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,UAAD,CAAgB,CACvCH,WAAW,CAACG,UAAD,CAAX,CACD,CAFD,CAIA,GAAMC,UAAS,CAAG,QAAZA,UAAY,CAAUC,QAAV,CAAoB,CACpC,GAAI,CAACA,QAAQ,CAACC,OAAd,CAAsB,CACpBL,aAAa,CAACM,SAAd,CAAwBf,UAAU,CAAC,CAACgB,OAAO,CAAEf,OAAO,CAACgB,MAAR,CAAeC,eAAzB,CAA0CC,YAAY,CAAEV,aAAxD,CAAD,CAAlC,EACA,OACD,CACDZ,MAAM,GACNa,gBAAgB,CAACG,QAAD,CAAhB,CACAP,aAAa,CAACjB,KAAK,CAACE,KAAN,CAAYa,EAAb,CAAb,CACD,CARD,CAWAV,SAAS,CAAC,UAAM,CACd,GAAIE,eAAe,GAAKwB,SAAxB,CACER,SAAS,CAAChB,eAAD,CAAT,CACH,CAHQ,CAGN,EAHM,CAAT,CAKA,mBACE,MAAC,IAAD,EAAM,UAAU,CAAES,UAAlB,wBACE,KAAC,KAAD,EAAO,EAAE,CAAEhB,KAAK,CAACc,OAAN,CAAcC,EAAzB,CAA6B,SAAS,CAAEQ,SAAxC,EADF,cAEE,KAAC,QAAD,EACE,EAAE,CAAEvB,KAAK,CAACE,KAAN,CAAYa,EADlB,CAEE,WAAW,CAAG,GAAIN,YAAJ,CAAgBS,cAAhB,CAAgCG,gBAAhC,CAFhB,CAGE,UAAU,CAAE,4BAAMJ,cAAa,CAACjB,KAAK,CAACc,OAAN,CAAcC,EAAf,CAAnB,EAHd,EAFF,GADF,CAUD"},"metadata":{},"sourceType":"module"}