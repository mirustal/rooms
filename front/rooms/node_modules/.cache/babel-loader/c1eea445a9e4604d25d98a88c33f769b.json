{"ast":null,"code":"function copyWithNavigator(text) {\n  return navigator.clipboard.writeText(text).then(function () {\n    return true;\n  });\n}\nfunction copyWithFakeElement(text) {\n  return new Promise(function (resolve, reject) {\n    var textareaEl = document.createElement(\"textarea\");\n    var range = document.createRange();\n    textareaEl.value = text;\n    textareaEl.style.position = \"fixed\";\n    // Avoid scrolling to bottom\n    textareaEl.contentEditable = \"true\";\n    document.body.appendChild(textareaEl);\n    textareaEl.focus();\n    textareaEl.select();\n    range.selectNodeContents(textareaEl);\n    var selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n    textareaEl.setSelectionRange(0, 999999);\n    try {\n      var successful = document.execCommand(\"copy\");\n      if (successful) {\n        resolve(true);\n      } else {\n        reject(new Error(\"copy failed\"));\n      }\n    } catch (error) {\n      reject(error);\n    }\n    if (selection) {\n      selection.removeAllRanges();\n    }\n    document.body.removeChild(textareaEl);\n  });\n}\nexport function copyTextToClipboard(text) {\n  if (navigator.clipboard) {\n    return copyWithNavigator(text).catch(function () {\n      return copyWithFakeElement(text);\n    });\n  } else {\n    return copyWithFakeElement(text);\n  }\n}","map":{"version":3,"names":["copyWithNavigator","text","navigator","clipboard","writeText","then","copyWithFakeElement","Promise","resolve","reject","textareaEl","document","createElement","range","createRange","value","style","position","contentEditable","body","appendChild","focus","select","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","setSelectionRange","successful","execCommand","Error","error","removeChild","copyTextToClipboard","catch"],"sources":["../../src/clipboard.ts"],"sourcesContent":["function copyWithNavigator(text: string): Promise<boolean> {\n  return navigator.clipboard.writeText(text).then(() => true);\n}\n\nfunction copyWithFakeElement(text: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    const textareaEl = document.createElement('textarea');\n    const range = document.createRange();\n\n    textareaEl.value = text;\n    textareaEl.style.position = 'fixed'; // Avoid scrolling to bottom\n    textareaEl.contentEditable = 'true';\n\n    document.body.appendChild(textareaEl);\n\n    textareaEl.focus();\n    textareaEl.select();\n\n    range.selectNodeContents(textareaEl);\n\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    textareaEl.setSelectionRange(0, 999999);\n\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        resolve(true);\n      } else {\n        reject(new Error('copy failed'));\n      }\n    } catch (error) {\n      reject(error);\n    }\n\n    if (selection) {\n      selection.removeAllRanges();\n    }\n\n    document.body.removeChild(textareaEl);\n  });\n}\n\nexport function copyTextToClipboard(text: string): Promise<boolean> {\n  if (navigator.clipboard) {\n    return copyWithNavigator(text).catch(() => copyWithFakeElement(text));\n  } else {\n    return copyWithFakeElement(text);\n  }\n}\n"],"mappings":"AAAA,SAASA,kBAAkBC,IAAY;EACrC,OAAOC,SAAA,CAAUC,SAAS,CAACC,SAAS,CAACH,IAAA,EAAMI,IAAI,CAAC;WAAM;;AACxD;AAEA,SAASC,oBAAoBL,IAAY;EACvC,OAAO,IAAIM,OAAA,CAAQ,UAACC,OAAA,EAASC,MAAA;IAC3B,IAAMC,UAAA,GAAaC,QAAA,CAASC,aAAa,CAAC;IAC1C,IAAMC,KAAA,GAAQF,QAAA,CAASG,WAAW;IAElCJ,UAAA,CAAWK,KAAK,GAAGd,IAAA;IACnBS,UAAA,CAAWM,KAAK,CAACC,QAAQ,GAAG;IAAS;IACrCP,UAAA,CAAWQ,eAAe,GAAG;IAE7BP,QAAA,CAASQ,IAAI,CAACC,WAAW,CAACV,UAAA;IAE1BA,UAAA,CAAWW,KAAK;IAChBX,UAAA,CAAWY,MAAM;IAEjBT,KAAA,CAAMU,kBAAkB,CAACb,UAAA;IAEzB,IAAMc,SAAA,GAAYC,MAAA,CAAOC,YAAY;IACrC,IAAIF,SAAA,EAAW;MACbA,SAAA,CAAUG,eAAe;MACzBH,SAAA,CAAUI,QAAQ,CAACf,KAAA;IACrB;IAEAH,UAAA,CAAWmB,iBAAiB,CAAC,GAAG;IAEhC,IAAI;MACF,IAAMC,UAAA,GAAanB,QAAA,CAASoB,WAAW,CAAC;MACxC,IAAID,UAAA,EAAY;QACdtB,OAAA,CAAQ;MACV,OAAO;QACLC,MAAA,CAAO,IAAIuB,KAAA,CAAM;MACnB;IACF,EAAE,OAAOC,KAAA,EAAO;MACdxB,MAAA,CAAOwB,KAAA;IACT;IAEA,IAAIT,SAAA,EAAW;MACbA,SAAA,CAAUG,eAAe;IAC3B;IAEAhB,QAAA,CAASQ,IAAI,CAACe,WAAW,CAACxB,UAAA;EAC5B;AACF;AAEA,OAAO,SAASyB,oBAAoBlC,IAAY;EAC9C,IAAIC,SAAA,CAAUC,SAAS,EAAE;IACvB,OAAOH,iBAAA,CAAkBC,IAAA,EAAMmC,KAAK,CAAC;aAAM9B,mBAAA,CAAoBL,IAAA;;EACjE,OAAO;IACL,OAAOK,mBAAA,CAAoBL,IAAA;EAC7B;AACF"},"metadata":{},"sourceType":"module"}