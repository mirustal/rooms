{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useTodayDate } from \"../../hooks/useTodayDate\";\nimport { getDaysNames, getWeeks } from \"../../lib/calendar\";\nimport { isSameDay, isSameMonth } from \"../../lib/date\";\nimport { CalendarDay } from \"../CalendarDay/CalendarDay\";\nimport { useConfigProvider } from \"../ConfigProvider/ConfigProviderContext\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { Footnote } from \"../Typography/Footnote/Footnote\";\nexport var CalendarDays = function (_param) {\n  var viewDate = _param.viewDate,\n    value = _param.value,\n    weekStartsOn = _param.weekStartsOn,\n    onDayChange = _param.onDayChange,\n    isDaySelected = _param.isDaySelected,\n    isDayActive = _param.isDayActive,\n    isDaySelectionEnd = _param.isDaySelectionEnd,\n    isDaySelectionStart = _param.isDaySelectionStart,\n    onDayEnter = _param.onDayEnter,\n    onDayLeave = _param.onDayLeave,\n    isDayHinted = _param.isDayHinted,\n    isHintedDaySelectionStart = _param.isHintedDaySelectionStart,\n    isHintedDaySelectionEnd = _param.isHintedDaySelectionEnd,\n    isDayFocused = _param.isDayFocused,\n    isDayDisabled = _param.isDayDisabled,\n    size = _param.size,\n    _param_showNeighboringMonth = _param.showNeighboringMonth,\n    showNeighboringMonth = _param_showNeighboringMonth === void 0 ? false : _param_showNeighboringMonth,\n    dayProps = _param.dayProps,\n    _param_listenDayChangesForUpdate = _param.listenDayChangesForUpdate,\n    listenDayChangesForUpdate = _param_listenDayChangesForUpdate === void 0 ? false : _param_listenDayChangesForUpdate,\n    getRootRef = _param.getRootRef,\n    props = _object_without_properties(_param, [\"viewDate\", \"value\", \"weekStartsOn\", \"onDayChange\", \"isDaySelected\", \"isDayActive\", \"isDaySelectionEnd\", \"isDaySelectionStart\", \"onDayEnter\", \"onDayLeave\", \"isDayHinted\", \"isHintedDaySelectionStart\", \"isHintedDaySelectionEnd\", \"isDayFocused\", \"isDayDisabled\", \"size\", \"showNeighboringMonth\", \"dayProps\", \"listenDayChangesForUpdate\", \"getRootRef\"]);\n  var locale = useConfigProvider().locale;\n  var ref = useExternRef(getRootRef);\n  var now = useTodayDate(listenDayChangesForUpdate);\n  var weeks = React.useMemo(function () {\n    return getWeeks(viewDate, weekStartsOn);\n  }, [weekStartsOn, viewDate]);\n  var daysNames = React.useMemo(function () {\n    return getDaysNames(now, weekStartsOn, locale);\n  }, [locale, now, weekStartsOn]);\n  var handleDayChange = React.useCallback(function (date) {\n    var _ref_current;\n    onDayChange(date);\n    (_ref_current = ref.current) === null || _ref_current === void 0 ? void 0 : _ref_current.focus();\n  }, [onDayChange, ref]);\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, props), {\n    baseClassName: \"vkuiCalendarDays\",\n    getRootRef: ref\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiCalendarDays__row\", size === \"s\" && \"vkuiCalendarDays__row--size-s\")\n  }, daysNames.map(function (dayName) {\n    return /*#__PURE__*/React.createElement(Footnote, {\n      key: dayName,\n      className: \"vkuiCalendarDays__weekday\"\n    }, dayName);\n  })), weeks.map(function (week, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"vkuiCalendarDays__row\", size === \"s\" && \"vkuiCalendarDays__row--size-s\"),\n      key: i\n    }, week.map(function (day, i) {\n      var sameMonth = isSameMonth(day, viewDate);\n      return /*#__PURE__*/React.createElement(CalendarDay, _object_spread({\n        key: day.toISOString(),\n        day: day,\n        today: isSameDay(day, now),\n        active: isDayActive(day),\n        onChange: handleDayChange,\n        hidden: !showNeighboringMonth && !sameMonth,\n        disabled: isDayDisabled(day),\n        selectionStart: isDaySelectionStart(day, i),\n        selectionEnd: isDaySelectionEnd(day, i),\n        hintedSelectionStart: isHintedDaySelectionStart === null || isHintedDaySelectionStart === void 0 ? void 0 : isHintedDaySelectionStart(day, i),\n        hintedSelectionEnd: isHintedDaySelectionEnd === null || isHintedDaySelectionEnd === void 0 ? void 0 : isHintedDaySelectionEnd(day, i),\n        selected: isDaySelected === null || isDaySelected === void 0 ? void 0 : isDaySelected(day),\n        focused: isDayFocused(day),\n        onEnter: onDayEnter,\n        onLeave: onDayLeave,\n        hinted: isDayHinted === null || isDayHinted === void 0 ? void 0 : isDayHinted(day),\n        sameMonth: sameMonth,\n        size: size\n      }, dayProps));\n    }));\n  }));\n};","map":{"version":3,"names":["React","classNames","useExternRef","useTodayDate","getDaysNames","getWeeks","isSameDay","isSameMonth","CalendarDay","useConfigProvider","RootComponent","Footnote","CalendarDays","_param","viewDate","value","weekStartsOn","onDayChange","isDaySelected","isDayActive","isDaySelectionEnd","isDaySelectionStart","onDayEnter","onDayLeave","isDayHinted","isHintedDaySelectionStart","isHintedDaySelectionEnd","isDayFocused","isDayDisabled","size","_param_showNeighboringMonth","showNeighboringMonth","dayProps","_param_listenDayChangesForUpdate","listenDayChangesForUpdate","getRootRef","props","_object_without_properties","locale","ref","now","weeks","useMemo","daysNames","handleDayChange","useCallback","date","_ref_current","current","focus","createElement","_object_spread_props","_object_spread","baseClassName","className","map","dayName","key","week","i","day","sameMonth","toISOString","today","active","onChange","hidden","disabled","selectionStart","selectionEnd","hintedSelectionStart","hintedSelectionEnd","selected","focused","onEnter","onLeave","hinted"],"sources":["../../../src/components/CalendarDays/CalendarDays.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useTodayDate } from '../../hooks/useTodayDate';\nimport { getDaysNames, getWeeks } from '../../lib/calendar';\nimport { isSameDay, isSameMonth } from '../../lib/date';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { CalendarDay, CalendarDayElementProps } from '../CalendarDay/CalendarDay';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './CalendarDays.module.css';\n\nexport interface CalendarDaysProps\n  extends Omit<HTMLAttributesWithRootRef<HTMLDivElement>, 'onChange'> {\n  value?: Date | Array<Date | null>;\n  viewDate: Date;\n  weekStartsOn: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n  showNeighboringMonth?: boolean;\n  size?: 's' | 'm';\n  dayProps?: CalendarDayElementProps;\n  listenDayChangesForUpdate?: boolean;\n  onDayChange(value: Date): void;\n  isDayDisabled(value: Date): boolean;\n  isDaySelectionStart(value: Date, dayOfWeek: number): boolean;\n  isDaySelectionEnd(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionStart?(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionEnd?(value: Date, dayOfWeek: number): boolean;\n  isDayActive(value: Date): boolean;\n  isDayHinted?(value: Date): boolean;\n  isDaySelected?(value: Date): boolean;\n  isDayFocused(value: Date): boolean;\n  onDayEnter?(value: Date): void;\n  onDayLeave?(value: Date): void;\n}\n\nexport const CalendarDays = ({\n  viewDate,\n  value,\n  weekStartsOn,\n  onDayChange,\n  isDaySelected,\n  isDayActive,\n  isDaySelectionEnd,\n  isDaySelectionStart,\n  onDayEnter,\n  onDayLeave,\n  isDayHinted,\n  isHintedDaySelectionStart,\n  isHintedDaySelectionEnd,\n  isDayFocused,\n  isDayDisabled,\n  size,\n  showNeighboringMonth = false,\n  dayProps,\n  listenDayChangesForUpdate = false,\n  getRootRef,\n  ...props\n}: CalendarDaysProps) => {\n  const { locale } = useConfigProvider();\n  const ref = useExternRef(getRootRef);\n  const now = useTodayDate(listenDayChangesForUpdate);\n\n  const weeks = React.useMemo(() => getWeeks(viewDate, weekStartsOn), [weekStartsOn, viewDate]);\n\n  const daysNames = React.useMemo(\n    () => getDaysNames(now, weekStartsOn, locale),\n    [locale, now, weekStartsOn],\n  );\n\n  const handleDayChange = React.useCallback(\n    (date: Date) => {\n      onDayChange(date);\n\n      ref.current?.focus();\n    },\n    [onDayChange, ref],\n  );\n\n  return (\n    <RootComponent {...props} baseClassName={styles['CalendarDays']} getRootRef={ref}>\n      <div\n        className={classNames(\n          styles['CalendarDays__row'],\n          size === 's' && styles['CalendarDays__row--size-s'],\n        )}\n      >\n        {daysNames.map((dayName) => (\n          <Footnote key={dayName} className={styles['CalendarDays__weekday']}>\n            {dayName}\n          </Footnote>\n        ))}\n      </div>\n\n      {weeks.map((week, i) => (\n        <div\n          className={classNames(\n            styles['CalendarDays__row'],\n            size === 's' && styles['CalendarDays__row--size-s'],\n          )}\n          key={i}\n        >\n          {week.map((day, i) => {\n            const sameMonth = isSameMonth(day, viewDate);\n            return (\n              <CalendarDay\n                key={day.toISOString()}\n                day={day}\n                today={isSameDay(day, now)}\n                active={isDayActive(day)}\n                onChange={handleDayChange}\n                hidden={!showNeighboringMonth && !sameMonth}\n                disabled={isDayDisabled(day)}\n                selectionStart={isDaySelectionStart(day, i)}\n                selectionEnd={isDaySelectionEnd(day, i)}\n                hintedSelectionStart={isHintedDaySelectionStart?.(day, i)}\n                hintedSelectionEnd={isHintedDaySelectionEnd?.(day, i)}\n                selected={isDaySelected?.(day)}\n                focused={isDayFocused(day)}\n                onEnter={onDayEnter}\n                onLeave={onDayLeave}\n                hinted={isDayHinted?.(day)}\n                sameMonth={sameMonth}\n                size={size}\n                {...dayProps}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </RootComponent>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}