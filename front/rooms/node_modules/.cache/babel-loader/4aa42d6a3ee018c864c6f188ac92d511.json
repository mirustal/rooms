{"ast":null,"code":"import * as React from \"react\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useDOM } from \"../../lib/dom\";\nexport function useAutoPlay(timeout, slideIndex, callbackFn) {\n  var _useTimeout = useTimeout(callbackFn, timeout),\n    clearAutoPlay = _useTimeout.clear,\n    setAutoPlay = _useTimeout.set;\n  var document = useDOM().document;\n  React.useEffect(function () {\n    return timeout ? setAutoPlay() : clearAutoPlay();\n  }, [timeout, slideIndex, clearAutoPlay, setAutoPlay]);\n  // Отключаем прокрутку слайдов при неактивной вкладке\n  React.useEffect(function preventSlideChange() {\n    if (!document || !timeout) {\n      return;\n    }\n    var changeAutoPlay = function () {\n      if (document.visibilityState === \"visible\") {\n        clearAutoPlay();\n        setAutoPlay();\n      }\n      if (document.visibilityState === \"hidden\") {\n        clearAutoPlay();\n      }\n    };\n    document.addEventListener(\"visibilitychange\", changeAutoPlay);\n    return function () {\n      document.removeEventListener(\"visibilitychange\", changeAutoPlay);\n    };\n  }, [document, timeout, clearAutoPlay, setAutoPlay]);\n}","map":{"version":3,"names":["React","useTimeout","useDOM","useAutoPlay","timeout","slideIndex","callbackFn","_useTimeout","clearAutoPlay","clear","setAutoPlay","set","document","useEffect","preventSlideChange","changeAutoPlay","visibilityState","addEventListener","removeEventListener"],"sources":["../../../src/components/Gallery/hooks.ts"],"sourcesContent":["import * as React from 'react';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useDOM } from '../../lib/dom';\n\nexport function useAutoPlay(timeout: number, slideIndex: number, callbackFn: VoidFunction) {\n  const { clear: clearAutoPlay, set: setAutoPlay } = useTimeout(callbackFn, timeout);\n  const { document } = useDOM();\n\n  React.useEffect(\n    () => (timeout ? setAutoPlay() : clearAutoPlay()),\n    [timeout, slideIndex, clearAutoPlay, setAutoPlay],\n  );\n\n  // Отключаем прокрутку слайдов при неактивной вкладке\n  React.useEffect(\n    function preventSlideChange() {\n      if (!document || !timeout) {\n        return;\n      }\n\n      const changeAutoPlay = () => {\n        if (document.visibilityState === 'visible') {\n          clearAutoPlay();\n          setAutoPlay();\n        }\n        if (document.visibilityState === 'hidden') {\n          clearAutoPlay();\n        }\n      };\n\n      document.addEventListener('visibilitychange', changeAutoPlay);\n\n      return () => {\n        document.removeEventListener('visibilitychange', changeAutoPlay);\n      };\n    },\n    [document, timeout, clearAutoPlay, setAutoPlay],\n  );\n}\n"],"mappings":"AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,UAAU,QAAQ;AAC3B,SAASC,MAAM,QAAQ;AAEvB,OAAO,SAASC,YAAYC,OAAe,EAAEC,UAAkB,EAAEC,UAAwB;EACvF,IAAmDC,WAAA,GAAAN,UAAA,CAAWK,UAAA,EAAYF,OAAA;IAAlEI,aAAO,GAAoCD,WAAA,CAA3CE,KAAA;IAAsBC,WAAK,GAAgBH,WAAA,CAArBI,GAAA;EAC9B,IAAMC,QAAE,GAAaV,MAAA,GAAbU,QAAA;EAERZ,KAAA,CAAMa,SAAS,CACb;WAAOT,OAAA,GAAUM,WAAA,KAAgBF,aAAA;KACjC,CAACJ,OAAA,EAASC,UAAA,EAAYG,aAAA,EAAeE,WAAA,CAAY;EAGnD;EACAV,KAAA,CAAMa,SAAS,CACb,SAASC,mBAAA;IACP,IAAI,CAACF,QAAA,IAAY,CAACR,OAAA,EAAS;MACzB;IACF;IAEA,IAAMW,cAAA,GAAiB,SAAAA,CAAA;MACrB,IAAIH,QAAA,CAASI,eAAe,KAAK,WAAW;QAC1CR,aAAA;QACAE,WAAA;MACF;MACA,IAAIE,QAAA,CAASI,eAAe,KAAK,UAAU;QACzCR,aAAA;MACF;IACF;IAEAI,QAAA,CAASK,gBAAgB,CAAC,oBAAoBF,cAAA;IAE9C,OAAO;MACLH,QAAA,CAASM,mBAAmB,CAAC,oBAAoBH,cAAA;IACnD;EACF,GACA,CAACH,QAAA,EAAUR,OAAA,EAASI,aAAA,EAAeE,WAAA,CAAY;AAEnD"},"metadata":{},"sourceType":"module"}