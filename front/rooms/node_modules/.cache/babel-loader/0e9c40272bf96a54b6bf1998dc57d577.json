{"ast":null,"code":"var _jsxFileName = \"/Users/mirustal/Documents/project/rooms/front/rooms/src/components/Modals.jsx\",\n    _s = $RefreshSig$();\n\nimport { Button, ButtonGroup, CellButton, Div, File, Group, Input, ModalCard, ModalRoot, Radio, ScreenSpinner, Title } from \"@vkontakte/vkui\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport { ModalIds } from \"../model/views\";\nimport { Locales } from \"../locales/locales\";\nimport { Room, Templates } from \"../model/roomTemplate\";\nimport { Icon24Camera } from \"@vkontakte/icons\";\nimport { uploadImage } from \"../serverApi/serverApi\";\nimport { AlertManagerContext, ErrorAlert } from \"./contexts/AlertProvider\";\nimport Resizer from \"react-image-file-resizer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var ModalManager = null;\nexport default function Modals() {\n  _s();\n\n  const joinRoomIdInputRef = useRef();\n  const createRoomNameInputRef = useRef();\n  const createChannelNameInputRef = useRef();\n  const renameChannelNameInputRef = useRef();\n  const alerts = useContext(AlertManagerContext);\n  const [templateType, setTemplateType] = useState(\"empty\");\n  const [activeModal, setActiveModal] = useState(null);\n  const [file, setFile] = useState(null);\n  const [url, setUrl] = useState(\"\");\n  const [fileName, setFileName] = useState(\"\");\n  const [isUploading, setIsUploading] = useState(false);\n\n  const handleFileChange = e => {\n    const uploadedFile = e.target.files[0];\n\n    if (uploadedFile) {\n      setFile(uploadedFile);\n      setFileName(uploadedFile.name);\n    }\n  };\n\n  const handleCreateTemplate = name => {\n    const selectedTemplate = Templates[templateType];\n    selectedTemplate.setName(name);\n    return selectedTemplate;\n  };\n\n  function findImageWithSize(images, width, height) {\n    const image = images.find(img => img.width === width && img.height === height);\n    return image.url;\n  }\n\n  useEffect(() => {\n    if (url) {\n      const newRoom = handleCreateTemplate(createRoomNameInputRef.current.value);\n      newRoom.setAvatar(url);\n      activeModal.data.loadRoom(newRoom);\n      onClose();\n    }\n  }, [url]);\n\n  const resizeFile = file => new Promise(resolve => {\n    Resizer.imageFileResizer(file, 480, 720, \"jpeg\", 100, 0, uri => {\n      resolve(uri);\n    }, `base64`);\n  });\n\n  const checkImageSize = imageUri => {\n    const image = new Image();\n    image.src = imageUri;\n\n    image.onload = () => {\n      if (image.width === 480 && image.height === 480) {\n        console.log(\"Размер изображения корректен: 480x480 пикселей.\");\n      } else {\n        console.log(`Размер изображения некорректен: ${image.width}x${image.height} пикселей.`);\n      }\n    };\n\n    image.onerror = () => {\n      console.log(\"Ошибка при загрузке изображения.\");\n    };\n\n    console.log(image);\n  };\n\n  async function handleUploadImage() {\n    setIsUploading(true);\n    const image = await resizeFile(file);\n    checkImageSize(image);\n    console.log(file);\n    const formData = new FormData();\n    console.log(\"image\", image);\n    formData.append('image', image);\n    await uploadImage(formData).then(response => {\n      const imageUrl = findImageWithSize(response.Images, 160, 160);\n      setUrl(imageUrl);\n    }).catch(error => {\n      alerts.showAlert(ErrorAlert({\n        message: \"не удалось создать комнату\",\n        alertManager: alerts\n      }));\n      console.log(\"ошибка получения фотокарточки\");\n    }).finally(() => {\n      setIsUploading(false);\n    });\n  }\n\n  ;\n\n  const handleTemplateChange = e => {\n    setTemplateType(e.target.value);\n  };\n\n  ModalManager = {\n    showModal: function (id, data) {\n      setActiveModal({\n        id: id,\n        data: data\n      });\n    }\n  };\n\n  const onClose = function () {\n    setActiveModal(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ModalRoot, {\n    activeModal: activeModal === null || activeModal === void 0 ? void 0 : activeModal.id,\n    children: [/*#__PURE__*/_jsxDEV(ModalCard, {\n      id: ModalIds.JoinRoom,\n      header: Locales.Modals.JoinRoom.Header,\n      onClose: onClose,\n      children: /*#__PURE__*/_jsxDEV(Group, {\n        style: {\n          paddingTop: 10,\n          paddingLeft: 15,\n          paddingRight: 15\n        },\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          placeholder: Locales.Modals.JoinRoom.InputPlaceHolder,\n          type: \"text\",\n          getRef: joinRoomIdInputRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginTop: 15\n          },\n          size: \"l\",\n          mode: \"primary\",\n          stretched: true,\n          onClick: () => {\n            onClose();\n            activeModal.data.loadRoom(joinRoomIdInputRef.current.value);\n          },\n          children: Locales.Modals.JoinRoom.JoinButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(ModalCard, {\n      id: ModalIds.CreateRoom,\n      header: Locales.Modals.CreateRoom.Header,\n      onClose: onClose,\n      children: /*#__PURE__*/_jsxDEV(Group, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          placeholder: Locales.Modals.CreateRoom.NameInputPlaceHolder,\n          getRef: createRoomNameInputRef,\n          style: {\n            marginTop: \"8px\",\n            marginBottom: \"16px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Div, {\n          style: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(File, {\n            top: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",\n            before: /*#__PURE__*/_jsxDEV(Icon24Camera, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 21\n            }, this),\n            style: {\n              marginBottom: \"5px\"\n            },\n            onChange: handleFileChange,\n            disabled: isUploading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: '5px'\n            },\n            children: fileName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 11\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Radio, {\n          name: \"template\",\n          value: \"empty\",\n          checked: templateType === \"empty\",\n          onChange: handleTemplateChange,\n          style: {\n            marginBottom: \"8px\"\n          },\n          children: Locales.Modals.CreateRoom.clearTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Radio, {\n          name: \"template\",\n          value: \"default\",\n          checked: templateType === \"default\",\n          onChange: handleTemplateChange,\n          style: {\n            marginBottom: \"8px\"\n          },\n          children: Locales.Modals.CreateRoom.defaultTemplate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginTop: 15\n          },\n          size: \"l\",\n          mode: \"primary\",\n          stretched: true,\n          disabled: isUploading,\n          onClick: async () => {\n            if (file) {\n              await handleUploadImage();\n            } else {\n              const newRoom = handleCreateTemplate(createRoomNameInputRef.current.value);\n              activeModal.data.loadRoom(newRoom);\n              onClose();\n            }\n          },\n          children: Locales.Modals.CreateRoom.CreateButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(ModalCard, {\n      id: ModalIds.CreateChannel,\n      header: Locales.Modals.CreateChannel.Header,\n      onClose: onClose,\n      children: /*#__PURE__*/_jsxDEV(Group, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          getRef: createChannelNameInputRef,\n          placeholder: Locales.Modals.CreateChannel.NameInputPlaceHolder,\n          style: {\n            marginTop: \"8px\",\n            marginBottom: \"16px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginTop: 15\n          },\n          size: \"l\",\n          mode: \"primary\",\n          stretched: true,\n          onClick: () => {\n            onClose();\n            activeModal.data.editRoom(createChannelNameInputRef.current.value);\n          },\n          children: Locales.Modals.CreateRoom.CreateButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(ModalCard, {\n      id: ModalIds.RenameChannel,\n      header: Locales.Modals.RenameChannel.Header,\n      onClose: onClose,\n      children: /*#__PURE__*/_jsxDEV(Group, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          getRef: renameChannelNameInputRef,\n          placeholder: Locales.Modals.RenameChannel.NameInputPlaceHolder,\n          style: {\n            marginTop: \"8px\",\n            marginBottom: \"16px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            marginTop: 15\n          },\n          size: \"l\",\n          mode: \"primary\",\n          stretched: true,\n          onClick: () => {\n            onClose();\n            const channelId = activeModal.data.renameChannelId;\n            activeModal.data.editRoom(renameChannelNameInputRef.current.value, channelId);\n          },\n          children: Locales.Modals.RenameChannel.renameButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Modals, \"s5tWewmjMNisZ7RpH8Ij1OQ5mzI=\");\n\n_c = Modals;\n\nvar _c;\n\n$RefreshReg$(_c, \"Modals\");","map":{"version":3,"names":["Button","ButtonGroup","CellButton","Div","File","Group","Input","ModalCard","ModalRoot","Radio","ScreenSpinner","Title","useContext","useEffect","useRef","useState","ModalIds","Locales","Room","Templates","Icon24Camera","uploadImage","AlertManagerContext","ErrorAlert","Resizer","ModalManager","Modals","joinRoomIdInputRef","createRoomNameInputRef","createChannelNameInputRef","renameChannelNameInputRef","alerts","templateType","setTemplateType","activeModal","setActiveModal","file","setFile","url","setUrl","fileName","setFileName","isUploading","setIsUploading","handleFileChange","e","uploadedFile","target","files","name","handleCreateTemplate","selectedTemplate","setName","findImageWithSize","images","width","height","image","find","img","newRoom","current","value","setAvatar","data","loadRoom","onClose","resizeFile","Promise","resolve","imageFileResizer","uri","checkImageSize","imageUri","Image","src","onload","console","log","onerror","handleUploadImage","formData","FormData","append","then","response","imageUrl","Images","catch","error","showAlert","message","alertManager","finally","handleTemplateChange","showModal","id","JoinRoom","Header","paddingTop","paddingLeft","paddingRight","InputPlaceHolder","marginTop","JoinButton","CreateRoom","NameInputPlaceHolder","marginBottom","display","alignItems","marginLeft","clearTemplate","defaultTemplate","CreateButton","CreateChannel","editRoom","RenameChannel","channelId","renameChannelId","renameButton"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/Modals.jsx"],"sourcesContent":["import {\n  Button,\n  ButtonGroup,\n  CellButton,\n  Div,\n  File,\n  Group,\n  Input,\n  ModalCard,\n  ModalRoot,\n  Radio,\n  ScreenSpinner,\n  Title,\n} from \"@vkontakte/vkui\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport { ModalIds } from \"../model/views\";\nimport { Locales } from \"../locales/locales\";\nimport { Room, Templates } from \"../model/roomTemplate\";\nimport { Icon24Camera } from \"@vkontakte/icons\";\nimport { uploadImage } from \"../serverApi/serverApi\";\nimport { AlertManagerContext, ErrorAlert } from \"./contexts/AlertProvider\";\nimport Resizer from \"react-image-file-resizer\";\n\nexport var ModalManager = null;\n\nexport default function Modals() {\n  const joinRoomIdInputRef = useRef();\n  const createRoomNameInputRef = useRef();\n  const createChannelNameInputRef = useRef();\n  const renameChannelNameInputRef = useRef();\n  const alerts = useContext(AlertManagerContext)\n\n  const [templateType, setTemplateType] = useState(\"empty\");\n  const [activeModal, setActiveModal] = useState(null);\n  const [file, setFile] = useState(null);\n  const [url, setUrl] = useState(\"\")\n  const [fileName, setFileName] = useState(\"\");\n  const [isUploading, setIsUploading] = useState(false);\n\n\n  const handleFileChange = (e) => {\n    const uploadedFile = e.target.files[0];\n    if (uploadedFile) {\n      setFile(uploadedFile);\n      setFileName(uploadedFile.name);\n    }\n  };\n\n\n\n\n  const handleCreateTemplate = (name) => {\n    const selectedTemplate = Templates[templateType];\n    selectedTemplate.setName(name);\n    return selectedTemplate;\n  };\n\n  function findImageWithSize(images, width, height) {\n    const image = images.find(img => img.width === width && img.height === height);\n    return image.url;\n  }\n\n  useEffect(() => {\n    if (url) {\n      const newRoom = handleCreateTemplate(createRoomNameInputRef.current.value);\n      newRoom.setAvatar(url);\n      activeModal.data.loadRoom(newRoom);\n      onClose();\n    }\n  }, [url]);\n\n\n  const resizeFile = (file) =>\n    new Promise((resolve) => {\n      Resizer.imageFileResizer(\n        file,\n        480,\n        720,\n        \"jpeg\",\n        100,\n        0,\n        (uri) => {\n          resolve(uri);\n        },\n        `base64`,\n      );\n      });\n\n\n      const checkImageSize = (imageUri) => {\n        const image = new Image();\n        image.src = imageUri;\n        image.onload = () => {\n          if (image.width === 480 && image.height === 480) {\n            console.log(\"Размер изображения корректен: 480x480 пикселей.\");\n          } else {\n            console.log(`Размер изображения некорректен: ${image.width}x${image.height} пикселей.`);\n          }\n        };\n        image.onerror = () => {\n          console.log(\"Ошибка при загрузке изображения.\");\n        };\n        console.log(image)\n      };\n\nasync function handleUploadImage() {\n  setIsUploading(true)\n  const image = await resizeFile(file);\n  checkImageSize(image)\n  console.log(file)\n  const formData = new FormData();\n  console.log(\"image\", image)\n  formData.append('image', image);\n  await uploadImage(formData)\n    .then((response) => {\n      const imageUrl = findImageWithSize(response.Images, 160, 160);\n      setUrl(imageUrl)\n    })\n    .catch((error) => {\n      alerts.showAlert(\n        ErrorAlert({\n          message: \"не удалось создать комнату\",\n          alertManager: alerts,\n        })\n      )\n      console.log(\"ошибка получения фотокарточки\")\n    })\n    .finally(() => {\n      setIsUploading(false);\n    })\n};\n\n\n\n\n\n\nconst handleTemplateChange = (e) => {\n  setTemplateType(e.target.value);\n};\n\nModalManager = {\n  showModal: function (id, data) {\n    setActiveModal({ id: id, data: data });\n  },\n};\n\nconst onClose = function () {\n  setActiveModal(null);\n};\n\nreturn (\n  <ModalRoot activeModal={activeModal?.id}>\n    <ModalCard\n      id={ModalIds.JoinRoom}\n      header={Locales.Modals.JoinRoom.Header}\n      onClose={onClose}\n    >\n      <Group\n        style={{\n          paddingTop: 10,\n          paddingLeft: 15,\n          paddingRight: 15,\n        }}\n      >\n        <Input\n          placeholder={Locales.Modals.JoinRoom.InputPlaceHolder}\n          type=\"text\"\n          getRef={joinRoomIdInputRef}\n        />\n        <Button\n          style={{\n            marginTop: 15,\n          }}\n          size=\"l\"\n          mode=\"primary\"\n          stretched\n          onClick={() => {\n            onClose();\n            activeModal.data.loadRoom(joinRoomIdInputRef.current.value);\n          }}\n        >\n          {Locales.Modals.JoinRoom.JoinButton}\n        </Button>\n      </Group>\n    </ModalCard>\n\n    <ModalCard\n      id={ModalIds.CreateRoom}\n      header={Locales.Modals.CreateRoom.Header}\n      onClose={onClose}\n    >\n      <Group>\n        <Input\n          type=\"text\"\n          placeholder={Locales.Modals.CreateRoom.NameInputPlaceHolder}\n          getRef={createRoomNameInputRef}\n          style={{ marginTop: \"8px\", marginBottom: \"16px\" }}\n        />\n        <Div style={{ display: 'flex', alignItems: 'center' }}>\n          <File\n            top=\"Загрузите картинку\"\n            before={<Icon24Camera />}\n            style={{ marginBottom: \"5px\" }}\n            onChange={handleFileChange}\n            disabled={isUploading}\n          />\n          <div style={{ marginLeft: '5px' }}>{fileName}</div> {/* Отображаем имя файла здесь */}\n        </Div>\n        <Radio\n          name=\"template\"\n          value=\"empty\"\n          checked={templateType === \"empty\"}\n          onChange={handleTemplateChange}\n          style={{ marginBottom: \"8px\" }}\n        >\n          {Locales.Modals.CreateRoom.clearTemplate}\n        </Radio>\n        <Radio\n          name=\"template\"\n          value=\"default\"\n          checked={templateType === \"default\"}\n          onChange={handleTemplateChange}\n          style={{ marginBottom: \"8px\" }}\n        >\n          {Locales.Modals.CreateRoom.defaultTemplate}\n        </Radio>\n\n        <Button\n          style={{\n            marginTop: 15,\n          }}\n          size=\"l\"\n          mode=\"primary\"\n          stretched\n          disabled={isUploading}\n          onClick={async () => {\n            if (file) {\n              await handleUploadImage()\n            }\n            else {\n              const newRoom = handleCreateTemplate(createRoomNameInputRef.current.value);\n              activeModal.data.loadRoom(newRoom);\n              onClose();\n            }\n          }}\n        >\n          {Locales.Modals.CreateRoom.CreateButton}\n        </Button>\n      </Group>\n    </ModalCard>\n\n    <ModalCard\n      id={ModalIds.CreateChannel}\n      header={Locales.Modals.CreateChannel.Header}\n      onClose={onClose}\n    >\n      <Group>\n        <Input\n          type=\"text\"\n          getRef={createChannelNameInputRef}\n          placeholder={Locales.Modals.CreateChannel.NameInputPlaceHolder}\n          style={{ marginTop: \"8px\", marginBottom: \"16px\" }}\n        />\n\n        <Button\n          style={{\n            marginTop: 15,\n          }}\n          size=\"l\"\n          mode=\"primary\"\n          stretched\n          onClick={() => {\n            onClose();\n            activeModal.data.editRoom(createChannelNameInputRef.current.value)\n\n          }}\n        >\n          {Locales.Modals.CreateRoom.CreateButton}\n        </Button>\n      </Group>\n    </ModalCard>\n\n    <ModalCard\n      id={ModalIds.RenameChannel}\n      header={Locales.Modals.RenameChannel.Header}\n      onClose={onClose}\n    >\n      <Group>\n        <Input\n          type=\"text\"\n          getRef={renameChannelNameInputRef}\n          placeholder={Locales.Modals.RenameChannel.NameInputPlaceHolder}\n          style={{ marginTop: \"8px\", marginBottom: \"16px\" }}\n        />\n\n        <Button\n          style={{\n            marginTop: 15,\n          }}\n          size=\"l\"\n          mode=\"primary\"\n          stretched\n          onClick={() => {\n            onClose();\n            const channelId = activeModal.data.renameChannelId;\n            activeModal.data.editRoom(\n              renameChannelNameInputRef.current.value,\n              channelId)\n          }}\n        >\n          {Locales.Modals.RenameChannel.renameButton}\n        </Button>\n      </Group>\n    </ModalCard>\n\n\n  </ModalRoot>\n);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}