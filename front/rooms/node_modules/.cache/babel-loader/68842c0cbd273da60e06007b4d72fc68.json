{"ast":null,"code":"import { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { Icon24Dismiss } from \"@vkontakte/icons\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { Button } from \"../Button/Button\";\nimport { Image } from \"../Image/Image\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { SimpleCell } from \"../SimpleCell/SimpleCell\";\nimport { Footnote } from \"../Typography/Footnote/Footnote\";\nvar warn = warnOnce(\"PromoBanner\");\n// TODO [>=6]: Удалить компонент\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n * @deprecated v5.3.1\n *\n * Используйте событие [VKWebAppShowBannerAd](https://dev.vk.com/mini-apps/monetization/ad/banners)\n */\nexport var PromoBanner = function (_param) {\n  var _param_bannerData = _param.bannerData,\n    bannerData = _param_bannerData === void 0 ? {} : _param_bannerData,\n    onClose = _param.onClose,\n    isCloseButtonHidden = _param.isCloseButtonHidden,\n    restProps = _object_without_properties(_param, [\"bannerData\", \"onClose\", \"isCloseButtonHidden\"]);\n  if (process.env.NODE_ENV === \"development\") {\n    warn(\"Компонент устарел и будет удален в v6. Используйте событие VKWebAppShowBannerAd https://dev.vk.com/mini-apps/monetization/ad/banners\");\n  }\n  var _React_useState = _sliced_to_array(React.useState(\"\"), 2),\n    currentPixel = _React_useState[0],\n    setCurrentPixel = _React_useState[1];\n  var statsPixels = React.useMemo(function () {\n    return bannerData.statistics ? bannerData.statistics.reduce(function (acc, item) {\n      return _object_spread_props(_object_spread({}, acc), _define_property({}, item.type, item.url));\n    }, {}) : {};\n  }, [bannerData.statistics]);\n  var onClick = React.useCallback(function () {\n    return setCurrentPixel(statsPixels.click || \"\");\n  }, [statsPixels.click]);\n  React.useEffect(function () {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread({\n    baseClassName: \"vkuiPromoBanner\"\n  }, restProps), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__head\"\n  }, /*#__PURE__*/React.createElement(Footnote, null, bannerData.advertisingLabel || \"Advertisement\"), bannerData.ageRestrictions && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiPromoBanner__age\"\n  }, bannerData.ageRestrictions), !isCloseButtonHidden && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__close\",\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(Icon24Dismiss, null))), /*#__PURE__*/React.createElement(SimpleCell, {\n    href: bannerData.trackingLink,\n    onClick: onClick,\n    rel: \"nofollow noopener noreferrer\",\n    target: \"_blank\",\n    before: bannerData.iconLink && /*#__PURE__*/React.createElement(Image, {\n      size: 48,\n      src: bannerData.iconLink,\n      alt: bannerData.title,\n      \"data-testid\": process.env.NODE_ENV === \"test\" ? \"avatar\" : undefined\n    }),\n    after: bannerData.ctaText && /*#__PURE__*/React.createElement(Button, {\n      mode: \"outline\",\n      \"data-testid\": process.env.NODE_ENV === \"test\" ? \"button-ctaText\" : undefined\n    }, bannerData.ctaText),\n    subtitle: bannerData.domain\n  }, bannerData.title), currentPixel.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__pixels\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: currentPixel,\n    alt: \"\"\n  })));\n};","map":{"version":3,"names":["React","Icon24Dismiss","warnOnce","Button","Image","RootComponent","SimpleCell","Footnote","warn","PromoBanner","_param","bannerData","_param_bannerData","onClose","isCloseButtonHidden","restProps","_object_without_properties","process","env","NODE_ENV","_React_useState","_sliced_to_array","useState","currentPixel","setCurrentPixel","statsPixels","useMemo","statistics","reduce","acc","item","_object_spread_props","_object_spread","_define_property","type","url","onClick","useCallback","click","useEffect","playbackStarted","createElement","baseClassName","className","advertisingLabel","ageRestrictions","href","trackingLink","rel","target","before","iconLink","size","src","alt","title","undefined","after","ctaText","mode","subtitle","domain","length"],"sources":["../../../src/components/PromoBanner/PromoBanner.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { Button } from '../Button/Button';\nimport { Image } from '../Image/Image';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { SimpleCell } from '../SimpleCell/SimpleCell';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './PromoBanner.module.css';\n\nconst warn = warnOnce('PromoBanner');\n\ntype StatsType =\n  | 'playbackStarted' // Начало показа\n  | 'click'; // Клик по баннеру\n\ntype BannerData = {\n  title?: string;\n  url_types?: string;\n  bannerID?: string;\n  imageWidth?: number;\n  imageHeight?: number;\n  imageLink?: string;\n  trackingLink?: string;\n  type?: string;\n  iconWidth?: number;\n  domain?: string;\n  ctaText?: string;\n  advertisingLabel?: string;\n  iconLink?: string;\n  statistics?: Array<{ type: StatsType; url: string }>;\n  openInBrowser?: boolean;\n  iconHeight?: number;\n  directLink?: boolean;\n  navigationType?: string;\n  description?: string;\n  ageRestrictions?: string;\n};\n\nexport interface PromoBannerProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  /** Данные рекламного баннера, полученные из VKWebAppGetAds */\n  bannerData: BannerData;\n  /** Флаг скрытия кнопки закрытия рекламы */\n  isCloseButtonHidden?: boolean;\n  /** Хандлер закрытия рекламы */\n  onClose: () => void;\n}\n\n// TODO [>=6]: Удалить компонент\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n * @deprecated v5.3.1\n *\n * Используйте событие [VKWebAppShowBannerAd](https://dev.vk.com/mini-apps/monetization/ad/banners)\n */\nexport const PromoBanner = ({\n  bannerData = {},\n  onClose,\n  isCloseButtonHidden,\n  ...restProps\n}: PromoBannerProps) => {\n  if (process.env.NODE_ENV === 'development') {\n    warn(\n      'Компонент устарел и будет удален в v6. Используйте событие VKWebAppShowBannerAd https://dev.vk.com/mini-apps/monetization/ad/banners',\n    );\n  }\n\n  const [currentPixel, setCurrentPixel] = React.useState('');\n\n  const statsPixels = React.useMemo(\n    () =>\n      (bannerData.statistics\n        ? bannerData.statistics.reduce((acc, item) => ({ ...acc, [item.type]: item.url }), {})\n        : {}) as Record<StatsType, string | void>,\n    [bannerData.statistics],\n  );\n\n  const onClick = React.useCallback(\n    () => setCurrentPixel(statsPixels.click || ''),\n    [statsPixels.click],\n  );\n\n  React.useEffect(() => {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n\n  return (\n    <RootComponent baseClassName={styles['PromoBanner']} {...restProps}>\n      <div className={styles['PromoBanner__head']}>\n        <Footnote>{bannerData.advertisingLabel || 'Advertisement'}</Footnote>\n        {bannerData.ageRestrictions && (\n          <Footnote className={styles['PromoBanner__age']}>{bannerData.ageRestrictions}</Footnote>\n        )}\n\n        {!isCloseButtonHidden && (\n          <div className={styles['PromoBanner__close']} onClick={onClose}>\n            <Icon24Dismiss />\n          </div>\n        )}\n      </div>\n      <SimpleCell\n        href={bannerData.trackingLink}\n        onClick={onClick}\n        rel=\"nofollow noopener noreferrer\"\n        target=\"_blank\"\n        before={\n          bannerData.iconLink && (\n            <Image\n              size={48}\n              src={bannerData.iconLink}\n              alt={bannerData.title}\n              data-testid={process.env.NODE_ENV === 'test' ? 'avatar' : undefined}\n            />\n          )\n        }\n        after={\n          bannerData.ctaText && (\n            <Button\n              mode=\"outline\"\n              data-testid={process.env.NODE_ENV === 'test' ? 'button-ctaText' : undefined}\n            >\n              {bannerData.ctaText}\n            </Button>\n          )\n        }\n        subtitle={bannerData.domain}\n      >\n        {bannerData.title}\n      </SimpleCell>\n\n      {currentPixel.length > 0 && (\n        <div className={styles['PromoBanner__pixels']}>\n          <img src={currentPixel} alt=\"\" />\n        </div>\n      )}\n    </RootComponent>\n  );\n};\n"],"mappings":";;;;;AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,aAAa,QAAQ;AAC9B,SAASC,QAAQ,QAAQ;AAEzB,SAASC,MAAM,QAAQ;AACvB,SAASC,KAAK,QAAQ;AACtB,SAASC,aAAa,QAAQ;AAC9B,SAASC,UAAU,QAAQ;AAC3B,SAASC,QAAQ,QAAQ;AAGzB,IAAMC,IAAA,GAAON,QAAA,CAAS;AAsCtB;AAEA;;;;;;AAMA,OAAO,IAAMO,WAAA,GAAc,SAAAA,CAAAC,MAAA;iCACzBC,UAAA;IAAAA,UAAA,GAAAC,iBAAA,cAAa,CAAC,IAAAA,iBAAA;IACdC,OAAA,GAAAH,MAAA,CAAAG,OAAA;IACAC,mBAAA,GAAAJ,MAAA,CAAAI,mBAAA;IACGC,SAAA,GAAAC,0BAAA,CAAAN,MAAA,GAHH,cACA,WACA,sB;EAGA,IAAIO,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;IAC1CX,IAAA,CACE;EAEJ;EAEA,IAAwCY,eAAA,GAAAC,gBAAA,CAAArB,KAAA,CAAMsB,QAAQ,CAAC;IAAhDC,YAAA,GAAiCH,eAAA;IAAnBI,eAAA,GAAmBJ,eAAA;EAExC,IAAMK,WAAA,GAAczB,KAAA,CAAM0B,OAAO,CAC/B;WACGf,UAAA,CAAWgB,UAAU,GAClBhB,UAAA,CAAWgB,UAAU,CAACC,MAAM,CAAC,UAACC,GAAA,EAAKC,IAAA;aAAUC,oBAAA,CAAAC,cAAA,KAAKH,GAAA,GAAKI,gBAAA,KAACH,IAAA,CAAKI,IAAI,EAAGJ,IAAA,CAAKK,GAAG;OAAK,CAAC,KAClF,CAAC;KACP,CAACxB,UAAA,CAAWgB,UAAU,CAAC;EAGzB,IAAMS,OAAA,GAAUpC,KAAA,CAAMqC,WAAW,CAC/B;WAAMb,eAAA,CAAgBC,WAAA,CAAYa,KAAK,IAAI;KAC3C,CAACb,WAAA,CAAYa,KAAK,CAAC;EAGrBtC,KAAA,CAAMuC,SAAS,CAAC;IACd,IAAId,WAAA,CAAYe,eAAe,EAAE;MAC/BhB,eAAA,CAAgBC,WAAA,CAAYe,eAAe;IAC7C;EACF,GAAG,CAACf,WAAA,CAAYe,eAAe,CAAC;EAEhC,oBACExC,KAAA,CAAAyC,aAAA,CAACpC,aAAA,EAAA2B,cAAA;IAAcU,aAAa;KAA6B3B,SAAA,gBACvDf,KAAA,CAAAyC,aAAA,CAAC;IAAIE,SAAS;kBACZ3C,KAAA,CAAAyC,aAAA,CAAClC,QAAA,QAAUI,UAAA,CAAWiC,gBAAgB,IAAI,kBACzCjC,UAAA,CAAWkC,eAAe,iBACzB7C,KAAA,CAAAyC,aAAA,CAAClC,QAAA;IAASoC,SAAS;KAA+BhC,UAAA,CAAWkC,eAAe,GAG7E,CAAC/B,mBAAA,iBACAd,KAAA,CAAAyC,aAAA,CAAC;IAAIE,SAAS;IAAgCP,OAAA,EAASvB;kBACrDb,KAAA,CAAAyC,aAAA,CAACxC,aAAA,wBAIPD,KAAA,CAAAyC,aAAA,CAACnC,UAAA;IACCwC,IAAA,EAAMnC,UAAA,CAAWoC,YAAY;IAC7BX,OAAA,EAASA,OAAA;IACTY,GAAA,EAAI;IACJC,MAAA,EAAO;IACPC,MAAA,EACEvC,UAAA,CAAWwC,QAAQ,iBACjBnD,KAAA,CAAAyC,aAAA,CAACrC,KAAA;MACCgD,IAAA,EAAM;MACNC,GAAA,EAAK1C,UAAA,CAAWwC,QAAQ;MACxBG,GAAA,EAAK3C,UAAA,CAAW4C,KAAK;MACrB,eAAatC,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,SAAS,WAAWqC;;IAIhEC,KAAA,EACE9C,UAAA,CAAW+C,OAAO,iBAChB1D,KAAA,CAAAyC,aAAA,CAACtC,MAAA;MACCwD,IAAA,EAAK;MACL,eAAa1C,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,SAAS,mBAAmBqC;OAEjE7C,UAAA,CAAW+C,OAAO;IAIzBE,QAAA,EAAUjD,UAAA,CAAWkD;KAEpBlD,UAAA,CAAW4C,KAAK,GAGlBhC,YAAA,CAAauC,MAAM,GAAG,kBACrB9D,KAAA,CAAAyC,aAAA,CAAC;IAAIE,SAAS;kBACZ3C,KAAA,CAAAyC,aAAA,CAAC;IAAIY,GAAA,EAAK9B,YAAA;IAAc+B,GAAA,EAAI;;AAKtC"},"metadata":{},"sourceType":"module"}