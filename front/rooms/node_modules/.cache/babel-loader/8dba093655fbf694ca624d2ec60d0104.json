{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport { _ as _type_of } from \"@swc/helpers/_/_type_of\";\nimport * as React from \"react\";\nimport { classNames, noop } from \"@vkontakte/vkjs\";\nimport { useChipsSelect } from \"../../hooks/useChipsSelect\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { useDOM } from \"../../lib/dom\";\nimport { defaultFilterFn } from \"../../lib/select\";\nimport { ChipsInputBase, chipsInputDefaultProps } from \"../ChipsInputBase/ChipsInputBase\";\nimport { CustomSelectDropdown } from \"../CustomSelectDropdown/CustomSelectDropdown\";\nimport { CustomSelectOption } from \"../CustomSelectOption/CustomSelectOption\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField } from \"../FormField/FormField\";\nimport { IconButton } from \"../IconButton/IconButton\";\nimport { Footnote } from \"../Typography/Footnote/Footnote\";\nvar FOCUS_ACTION_NEXT = \"next\";\nvar FOCUS_ACTION_PREV = \"prev\";\nvar chipsSelectDefaultProps = _object_spread_props(_object_spread({}, chipsInputDefaultProps), {\n  emptyText: \"Ничего не найдено\",\n  creatableText: \"Создать значение\",\n  onChangeStart: noop,\n  creatable: false,\n  fetching: false,\n  showSelected: true,\n  closeAfterSelect: true,\n  options: [],\n  filterFn: defaultFilterFn,\n  renderOption: function renderOption(props) {\n    return /*#__PURE__*/React.createElement(CustomSelectOption, props);\n  }\n});\n/**\n * @see https://vkcom.github.io/VKUI/#/ChipsSelect\n */\nexport var ChipsSelect = function (props) {\n  var propsWithDefault = _object_spread({}, chipsSelectDefaultProps, props);\n  var style = propsWithDefault.style,\n    onFocus = propsWithDefault.onFocus,\n    onBlur = propsWithDefault.onBlur,\n    onKeyDown = propsWithDefault.onKeyDown,\n    className = propsWithDefault.className,\n    fetching = propsWithDefault.fetching,\n    renderOption = propsWithDefault.renderOption,\n    emptyText = propsWithDefault.emptyText,\n    getRef = propsWithDefault.getRef,\n    getRootRef = propsWithDefault.getRootRef,\n    disabled = propsWithDefault.disabled,\n    placeholder = propsWithDefault.placeholder,\n    tabIndex = propsWithDefault.tabIndex,\n    getOptionValue = propsWithDefault.getOptionValue,\n    getOptionLabel = propsWithDefault.getOptionLabel,\n    showSelected = propsWithDefault.showSelected,\n    getNewOptionData = propsWithDefault.getNewOptionData,\n    renderChip = propsWithDefault.renderChip,\n    popupDirection = propsWithDefault.popupDirection,\n    creatable = propsWithDefault.creatable,\n    filterFn = propsWithDefault.filterFn,\n    inputValue = propsWithDefault.inputValue,\n    creatableText = propsWithDefault.creatableText,\n    closeAfterSelect = propsWithDefault.closeAfterSelect,\n    onChangeStart = propsWithDefault.onChangeStart,\n    before = propsWithDefault.before,\n    icon = propsWithDefault.icon,\n    options = propsWithDefault.options,\n    fixDropdownWidth = propsWithDefault.fixDropdownWidth,\n    forceDropdownPortal = propsWithDefault.forceDropdownPortal,\n    restProps = _object_without_properties(propsWithDefault, [\"style\", \"onFocus\", \"onBlur\", \"onKeyDown\", \"className\", \"fetching\", \"renderOption\", \"emptyText\", \"getRef\", \"getRootRef\", \"disabled\", \"placeholder\", \"tabIndex\", \"getOptionValue\", \"getOptionLabel\", \"showSelected\", \"getNewOptionData\", \"renderChip\", \"popupDirection\", \"creatable\", \"filterFn\", \"inputValue\", \"creatableText\", \"closeAfterSelect\", \"onChangeStart\", \"before\", \"icon\", \"options\", \"fixDropdownWidth\", \"forceDropdownPortal\"]);\n  var document = useDOM().document;\n  var _React_useState = _sliced_to_array(React.useState(undefined), 2),\n    popperPlacement = _React_useState[0],\n    setPopperPlacement = _React_useState[1];\n  var scrollBoxRef = React.useRef(null);\n  var rootRef = useExternRef(getRootRef);\n  var _useChipsSelect = useChipsSelect(propsWithDefault),\n    fieldValue = _useChipsSelect.fieldValue,\n    _useChipsSelect_selectedOptions = _useChipsSelect.selectedOptions,\n    selectedOptions = _useChipsSelect_selectedOptions === void 0 ? [] : _useChipsSelect_selectedOptions,\n    opened = _useChipsSelect.opened,\n    setOpened = _useChipsSelect.setOpened,\n    addOptionFromInput = _useChipsSelect.addOptionFromInput,\n    filteredOptions = _useChipsSelect.filteredOptions,\n    addOption = _useChipsSelect.addOption,\n    handleInputChange = _useChipsSelect.handleInputChange,\n    clearInput = _useChipsSelect.clearInput,\n    focusedOption = _useChipsSelect.focusedOption,\n    setFocusedOption = _useChipsSelect.setFocusedOption,\n    focusedOptionIndex = _useChipsSelect.focusedOptionIndex,\n    setFocusedOptionIndex = _useChipsSelect.setFocusedOptionIndex;\n  var showCreatable = Boolean(creatable && creatableText && !filteredOptions.length && fieldValue);\n  var handleFocus = function (e) {\n    setOpened(true);\n    setFocusedOptionIndex(null);\n    onFocus(e);\n  };\n  var handleBlur = function (e) {\n    onBlur(e);\n    // Не добавляем значение, если его нужно выбрать строго из списка\n    if (!e.defaultPrevented && !creatable) {\n      e.preventDefault();\n    }\n  };\n  var handleClickOutside = function (e) {\n    var _rootRef_current, _scrollBoxRef_current;\n    var isClickOutsideFormField = !((_rootRef_current = rootRef.current) === null || _rootRef_current === void 0 ? void 0 : _rootRef_current.contains(e.target));\n    var isClickOutsideDropdown = !((_scrollBoxRef_current = scrollBoxRef.current) === null || _scrollBoxRef_current === void 0 ? void 0 : _scrollBoxRef_current.contains(e.target));\n    if (isClickOutsideFormField && isClickOutsideDropdown) {\n      setOpened(false);\n    }\n  };\n  var chipsSelectOptions = React.useRef([]).current;\n  var scrollToElement = function (index) {\n    var center = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n    var dropdown = scrollBoxRef.current;\n    var item = chipsSelectOptions[index];\n    if (!item || !dropdown) {\n      return;\n    }\n    var dropdownHeight = dropdown.offsetHeight;\n    var scrollTop = dropdown.scrollTop;\n    var itemTop = item.offsetTop;\n    var itemHeight = item.offsetHeight;\n    if (center) {\n      dropdown.scrollTop = itemTop - dropdownHeight / 2 + itemHeight / 2;\n    } else if (itemTop + itemHeight > dropdownHeight + scrollTop) {\n      dropdown.scrollTop = itemTop - dropdownHeight + itemHeight;\n    } else if (itemTop < scrollTop) {\n      dropdown.scrollTop = itemTop;\n    }\n  };\n  var focusOptionByIndex = function (index, oldIndex) {\n    var length = filteredOptions.length;\n    if (index < 0) {\n      index = length - 1;\n    } else if (index >= length) {\n      index = 0;\n    }\n    if (index === oldIndex) {\n      return;\n    }\n    scrollToElement(index);\n    setFocusedOptionIndex(index);\n  };\n  var focusOption = function (nextIndex, type) {\n    var index = nextIndex === null ? -1 : nextIndex;\n    if (type === FOCUS_ACTION_NEXT) {\n      index = index + 1;\n    } else if (type === FOCUS_ACTION_PREV) {\n      index = index - 1;\n    }\n    focusOptionByIndex(index, focusedOptionIndex);\n  };\n  var handleKeyDown = function (e) {\n    onKeyDown(e);\n    if (e.key === \"ArrowUp\" && !e.defaultPrevented) {\n      e.preventDefault();\n      if (!opened) {\n        setOpened(true);\n        setFocusedOptionIndex(0);\n      } else {\n        focusOption(focusedOptionIndex, FOCUS_ACTION_PREV);\n      }\n    }\n    if (e.key === \"ArrowDown\" && !e.defaultPrevented) {\n      e.preventDefault();\n      if (!opened) {\n        setOpened(true);\n        setFocusedOptionIndex(0);\n      } else {\n        focusOption(focusedOptionIndex, FOCUS_ACTION_NEXT);\n      }\n    }\n    if (e.key === \"Enter\" && !e.defaultPrevented && opened) {\n      if (focusedOptionIndex != null) {\n        var option = filteredOptions[focusedOptionIndex];\n        if (option) {\n          onChangeStart(e, option);\n          if (!e.defaultPrevented) {\n            addOption(option);\n            setFocusedOptionIndex(null);\n            clearInput();\n            closeAfterSelect && setOpened(false);\n            e.preventDefault();\n          }\n        } else if (!creatable) {\n          e.preventDefault();\n        }\n      } else if (!creatable) {\n        e.preventDefault();\n      }\n    }\n    if ([\"Escape\", \"Tab\"].includes(e.key) && !e.defaultPrevented && opened) {\n      setOpened(false);\n    }\n  };\n  React.useEffect(function () {\n    if (focusedOptionIndex != null && filteredOptions[focusedOptionIndex]) {\n      setFocusedOption(filteredOptions[focusedOptionIndex]);\n    } else if (focusedOptionIndex === null || focusedOptionIndex === 0) {\n      setFocusedOption(null);\n    }\n  }, [focusedOptionIndex, filteredOptions, setFocusedOption]);\n  useGlobalEventListener(document, \"click\", handleClickOutside);\n  var renderChipWrapper = function (renderChipProps) {\n    if (renderChipProps === undefined) {\n      return null;\n    }\n    var onRemoveWrapper = function (e, value) {\n      var _renderChipProps_onRemove;\n      e === null || e === void 0 ? void 0 : e.preventDefault();\n      e === null || e === void 0 ? void 0 : e.stopPropagation();\n      (_renderChipProps_onRemove = renderChipProps.onRemove) === null || _renderChipProps_onRemove === void 0 ? void 0 : _renderChipProps_onRemove.call(renderChipProps, e, value);\n    };\n    return renderChip(_object_spread_props(_object_spread({}, renderChipProps), {\n      onRemove: onRemoveWrapper\n    }));\n  };\n  var isPopperDirectionTop = popperPlacement === null || popperPlacement === void 0 ? void 0 : popperPlacement.includes(\"top\");\n  var onPlacementChange = React.useCallback(function (placement) {\n    setPopperPlacement(placement);\n  }, [setPopperPlacement]);\n  var onDropdownMouseLeave = React.useCallback(function () {\n    setFocusedOptionIndex(null);\n  }, [setFocusedOptionIndex]);\n  var toggleOpened = function () {\n    setOpened(function (prevOpened) {\n      return !prevOpened;\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormField, {\n    getRootRef: rootRef,\n    style: style,\n    className: classNames(\"vkuiChipsSelect\", opened && (isPopperDirectionTop ? \"vkuiChipsSelect--pop-up\" : \"vkuiChipsSelect--pop-down\"), className),\n    disabled: disabled,\n    role: \"application\",\n    \"aria-disabled\": disabled,\n    \"aria-readonly\": restProps.readOnly,\n    after: /*#__PURE__*/React.createElement(IconButton, {\n      className: \"vkuiChipsSelect__dropdown\",\n      activeMode: \"\",\n      hoverMode: \"\",\n      // TODO [>=6]: add label customization\n      \"aria-label\": opened ? \"Скрыть\" : \"Развернуть\",\n      onClick: toggleOpened\n    }, icon !== null && icon !== void 0 ? icon : /*#__PURE__*/React.createElement(DropdownIcon, {\n      className: \"vkuiChipsSelect__icon\",\n      opened: opened\n    })),\n    before: before\n  }, /*#__PURE__*/React.createElement(ChipsInputBase, _object_spread_props(_object_spread({}, restProps), {\n    tabIndex: tabIndex,\n    value: selectedOptions,\n    inputValue: fieldValue,\n    getNewOptionData: getNewOptionData,\n    getOptionLabel: getOptionLabel,\n    getOptionValue: getOptionValue,\n    renderChip: renderChipWrapper,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onKeyDown: handleKeyDown,\n    placeholder: placeholder,\n    getRef: getRef,\n    disabled: disabled,\n    onInputChange: handleInputChange\n  }))), opened && /*#__PURE__*/React.createElement(CustomSelectDropdown, {\n    targetRef: rootRef,\n    placement: popupDirection,\n    scrollBoxRef: scrollBoxRef,\n    onPlacementChange: onPlacementChange,\n    onMouseLeave: onDropdownMouseLeave,\n    fetching: fetching,\n    sameWidth: fixDropdownWidth,\n    forcePortal: forceDropdownPortal\n  }, showCreatable && /*#__PURE__*/React.createElement(CustomSelectOption, {\n    hovered: focusedOptionIndex === 0,\n    onMouseDown: addOptionFromInput,\n    onMouseEnter: function () {\n      return setFocusedOptionIndex(0);\n    }\n  }, creatableText), !(filteredOptions === null || filteredOptions === void 0 ? void 0 : filteredOptions.length) && !showCreatable && emptyText ? /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiChipsSelect__empty\"\n  }, emptyText) : filteredOptions.map(function (option, index) {\n    var label = getOptionLabel(option);\n    var hovered = focusedOption && getOptionValue(option) === getOptionValue(focusedOption);\n    var selected = selectedOptions.find(function (selectedOption) {\n      return getOptionValue(selectedOption) === getOptionValue(option);\n    });\n    var value = getOptionValue(option);\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: \"\".concat(typeof value === \"undefined\" ? \"undefined\" : _type_of(value), \"-\").concat(value)\n    }, renderOption({\n      option: option,\n      hovered: Boolean(hovered),\n      children: label,\n      selected: !!selected,\n      getRootRef: function (e) {\n        if (e) {\n          return chipsSelectOptions[index] = e;\n        }\n        return undefined;\n      },\n      onMouseDown: function (e) {\n        onChangeStart === null || onChangeStart === void 0 ? void 0 : onChangeStart(e, option);\n        if (!e.defaultPrevented) {\n          closeAfterSelect && setOpened(false);\n          addOption(option);\n          clearInput();\n        }\n      },\n      onMouseEnter: function () {\n        return setFocusedOptionIndex(index);\n      }\n    }));\n  })));\n};","map":{"version":3,"names":["React","classNames","noop","useChipsSelect","useExternRef","useGlobalEventListener","useDOM","defaultFilterFn","ChipsInputBase","chipsInputDefaultProps","CustomSelectDropdown","CustomSelectOption","DropdownIcon","FormField","IconButton","Footnote","FOCUS_ACTION_NEXT","FOCUS_ACTION_PREV","chipsSelectDefaultProps","_object_spread_props","_object_spread","emptyText","creatableText","onChangeStart","creatable","fetching","showSelected","closeAfterSelect","options","filterFn","renderOption","props","createElement","ChipsSelect","propsWithDefault","style","onFocus","onBlur","onKeyDown","className","getRef","getRootRef","disabled","placeholder","tabIndex","getOptionValue","getOptionLabel","getNewOptionData","renderChip","popupDirection","inputValue","before","icon","fixDropdownWidth","forceDropdownPortal","restProps","_object_without_properties","document","_React_useState","_sliced_to_array","useState","undefined","popperPlacement","setPopperPlacement","scrollBoxRef","useRef","rootRef","_useChipsSelect","fieldValue","_useChipsSelect_selectedOptions","selectedOptions","opened","setOpened","addOptionFromInput","filteredOptions","addOption","handleInputChange","clearInput","focusedOption","setFocusedOption","focusedOptionIndex","setFocusedOptionIndex","showCreatable","Boolean","length","handleFocus","e","handleBlur","defaultPrevented","preventDefault","handleClickOutside","_rootRef_current","_scrollBoxRef_current","isClickOutsideFormField","current","contains","target","isClickOutsideDropdown","chipsSelectOptions","scrollToElement","index","center","arguments","dropdown","item","dropdownHeight","offsetHeight","scrollTop","itemTop","offsetTop","itemHeight","focusOptionByIndex","oldIndex","focusOption","nextIndex","type","handleKeyDown","key","option","includes","useEffect","renderChipWrapper","renderChipProps","onRemoveWrapper","value","_renderChipProps_onRemove","stopPropagation","onRemove","call","isPopperDirectionTop","onPlacementChange","useCallback","placement","onDropdownMouseLeave","toggleOpened","prevOpened","Fragment","role","readOnly","after","activeMode","hoverMode","onClick","onInputChange","targetRef","onMouseLeave","sameWidth","forcePortal","hovered","onMouseDown","onMouseEnter","map","label","selected","find","selectedOption","concat","_type_of","children"],"sources":["../../../src/components/ChipsSelect/ChipsSelect.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { useChipsSelect } from '../../hooks/useChipsSelect';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { useDOM } from '../../lib/dom';\nimport type { Placement } from '../../lib/floating';\nimport { defaultFilterFn } from '../../lib/select';\nimport { ChipOption, ChipValue, RenderChip } from '../Chip/Chip';\nimport { ChipsInputProps } from '../ChipsInput/ChipsInput';\nimport { ChipsInputBase, chipsInputDefaultProps } from '../ChipsInputBase/ChipsInputBase';\nimport { CustomSelectDropdown } from '../CustomSelectDropdown/CustomSelectDropdown';\nimport {\n  CustomSelectOption,\n  CustomSelectOptionProps,\n} from '../CustomSelectOption/CustomSelectOption';\nimport { DropdownIcon } from '../DropdownIcon/DropdownIcon';\nimport { FormField } from '../FormField/FormField';\nimport { IconButton } from '../IconButton/IconButton';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './ChipsSelect.module.css';\n\nexport interface ChipsSelectProps<Option extends ChipOption>\n  extends Omit<ChipsInputProps<Option>, 'after'> {\n  popupDirection?: 'top' | 'bottom';\n  options?: Option[];\n  filterFn?:\n    | false\n    | ((\n        value?: string,\n        option?: Option,\n        getOptionLabel?: Pick<ChipsInputProps<Option>, 'getOptionLabel'>['getOptionLabel'],\n      ) => boolean);\n  /**\n   * Возможность создавать чипы которых нет в списке (по enter или с помощью пункта в меню, см creatableText)\n   */\n  creatable?: boolean;\n  /**\n   * Отрисовка лоадера вместо списка опций в выпадающем списке\n   */\n  fetching?: boolean;\n  renderOption?: (props: CustomSelectOptionProps) => React.ReactNode;\n  /**\n   * Показывать или скрывать уже выбранные опции\n   */\n  showSelected?: boolean;\n  /**\n   * Текст для пункта создающего чипы при клике, так же отвечает за то будет ли показан этот пункт (показывается после того как в списке не отсанется опций)\n   */\n  creatableText?: string;\n  /**\n   * Текст который показывается если список опций пуст\n   */\n  emptyText?: string;\n  /**\n   * Событие срабатывающее перед onChange\n   */\n  onChangeStart?: (e: React.MouseEvent | React.KeyboardEvent, option: Option) => void;\n  /**\n   * Закрытие выпадающего списка после выбора элемента\n   */\n  closeAfterSelect?: boolean;\n  fixDropdownWidth?: boolean;\n  forceDropdownPortal?: boolean;\n  /**\n   * Иконка раскрывающегося списка\n   */\n  icon?: React.ReactNode;\n  /**\n   * Добавляет значение в список на событие `onBlur` (использовать вместе с `creatable`)\n   */\n  addOnBlur?: boolean;\n}\n\ntype FocusActionType = 'next' | 'prev';\n\nconst FOCUS_ACTION_NEXT: FocusActionType = 'next';\nconst FOCUS_ACTION_PREV: FocusActionType = 'prev';\n\nconst chipsSelectDefaultProps: ChipsSelectProps<any> = {\n  ...chipsInputDefaultProps,\n  emptyText: 'Ничего не найдено',\n  creatableText: 'Создать значение',\n  onChangeStart: noop,\n  creatable: false,\n  fetching: false,\n  showSelected: true,\n  closeAfterSelect: true,\n  options: [],\n  filterFn: defaultFilterFn,\n  renderOption(props) {\n    return <CustomSelectOption {...props} />;\n  },\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ChipsSelect\n */\nexport const ChipsSelect = <Option extends ChipOption>(props: ChipsSelectProps<Option>) => {\n  const propsWithDefault = { ...chipsSelectDefaultProps, ...props };\n  const {\n    style,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    className,\n    fetching,\n    renderOption,\n    emptyText,\n    getRef,\n    getRootRef,\n    disabled,\n    placeholder,\n    tabIndex,\n    getOptionValue,\n    getOptionLabel,\n    showSelected,\n    getNewOptionData,\n    renderChip,\n    popupDirection,\n    creatable,\n    filterFn,\n    inputValue,\n    creatableText,\n    closeAfterSelect,\n    onChangeStart,\n    before,\n    icon,\n    options,\n    fixDropdownWidth,\n    forceDropdownPortal,\n    ...restProps\n  } = propsWithDefault;\n\n  const { document } = useDOM();\n\n  const [popperPlacement, setPopperPlacement] = React.useState<Placement | undefined>(undefined);\n\n  const scrollBoxRef = React.useRef<HTMLDivElement>(null);\n  const rootRef = useExternRef(getRootRef);\n  const {\n    fieldValue,\n    selectedOptions = [],\n    opened,\n    setOpened,\n    addOptionFromInput,\n    filteredOptions,\n    addOption,\n    handleInputChange,\n    clearInput,\n    focusedOption,\n    setFocusedOption,\n    focusedOptionIndex,\n    setFocusedOptionIndex,\n  } = useChipsSelect(propsWithDefault);\n\n  const showCreatable = Boolean(\n    creatable && creatableText && !filteredOptions.length && fieldValue,\n  );\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    setOpened(true);\n    setFocusedOptionIndex(null);\n    onFocus!(e);\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    onBlur!(e);\n\n    // Не добавляем значение, если его нужно выбрать строго из списка\n    if (!e.defaultPrevented && !creatable) {\n      e.preventDefault();\n    }\n  };\n\n  const handleClickOutside = (e: MouseEvent) => {\n    const isClickOutsideFormField = !rootRef.current?.contains(e.target as Node);\n    const isClickOutsideDropdown = !scrollBoxRef.current?.contains(e.target as Node);\n\n    if (isClickOutsideFormField && isClickOutsideDropdown) {\n      setOpened(false);\n    }\n  };\n\n  const chipsSelectOptions = React.useRef<HTMLElement[]>([]).current;\n\n  const scrollToElement = (index: number, center = false) => {\n    const dropdown = scrollBoxRef.current;\n    const item = chipsSelectOptions[index];\n\n    if (!item || !dropdown) {\n      return;\n    }\n\n    const dropdownHeight = dropdown.offsetHeight;\n    const scrollTop = dropdown.scrollTop;\n    const itemTop = item.offsetTop;\n    const itemHeight = item.offsetHeight;\n\n    if (center) {\n      dropdown.scrollTop = itemTop - dropdownHeight / 2 + itemHeight / 2;\n    } else if (itemTop + itemHeight > dropdownHeight + scrollTop) {\n      dropdown.scrollTop = itemTop - dropdownHeight + itemHeight;\n    } else if (itemTop < scrollTop) {\n      dropdown.scrollTop = itemTop;\n    }\n  };\n\n  const focusOptionByIndex = (index: number, oldIndex: number | null) => {\n    const { length } = filteredOptions;\n\n    if (index < 0) {\n      index = length - 1;\n    } else if (index >= length) {\n      index = 0;\n    }\n\n    if (index === oldIndex) {\n      return;\n    }\n\n    scrollToElement(index);\n    setFocusedOptionIndex(index);\n  };\n\n  const focusOption = (nextIndex: number | null, type: FocusActionType) => {\n    let index = nextIndex === null ? -1 : nextIndex;\n\n    if (type === FOCUS_ACTION_NEXT) {\n      index = index + 1;\n    } else if (type === FOCUS_ACTION_PREV) {\n      index = index - 1;\n    }\n\n    focusOptionByIndex(index, focusedOptionIndex);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    onKeyDown!(e);\n\n    if (e.key === 'ArrowUp' && !e.defaultPrevented) {\n      e.preventDefault();\n\n      if (!opened) {\n        setOpened(true);\n        setFocusedOptionIndex(0);\n      } else {\n        focusOption(focusedOptionIndex, FOCUS_ACTION_PREV);\n      }\n    }\n\n    if (e.key === 'ArrowDown' && !e.defaultPrevented) {\n      e.preventDefault();\n\n      if (!opened) {\n        setOpened(true);\n        setFocusedOptionIndex(0);\n      } else {\n        focusOption(focusedOptionIndex, FOCUS_ACTION_NEXT);\n      }\n    }\n\n    if (e.key === 'Enter' && !e.defaultPrevented && opened) {\n      if (focusedOptionIndex != null) {\n        const option = filteredOptions[focusedOptionIndex];\n\n        if (option) {\n          onChangeStart!(e, option);\n\n          if (!e.defaultPrevented) {\n            addOption(option);\n            setFocusedOptionIndex(null);\n            clearInput();\n            closeAfterSelect && setOpened(false);\n            e.preventDefault();\n          }\n        } else if (!creatable) {\n          e.preventDefault();\n        }\n      } else if (!creatable) {\n        e.preventDefault();\n      }\n    }\n\n    if (['Escape', 'Tab'].includes(e.key) && !e.defaultPrevented && opened) {\n      setOpened(false);\n    }\n  };\n\n  React.useEffect(() => {\n    if (focusedOptionIndex != null && filteredOptions[focusedOptionIndex]) {\n      setFocusedOption(filteredOptions[focusedOptionIndex]);\n    } else if (focusedOptionIndex === null || focusedOptionIndex === 0) {\n      setFocusedOption(null);\n    }\n  }, [focusedOptionIndex, filteredOptions, setFocusedOption]);\n\n  useGlobalEventListener(document, 'click', handleClickOutside);\n\n  const renderChipWrapper = (renderChipProps: RenderChip<Option> | undefined) => {\n    if (renderChipProps === undefined) {\n      return null;\n    }\n    const onRemoveWrapper = (e: React.MouseEvent | undefined, value: ChipValue | undefined) => {\n      e?.preventDefault();\n      e?.stopPropagation();\n\n      renderChipProps.onRemove?.(e, value);\n    };\n\n    return renderChip!({\n      ...renderChipProps,\n      onRemove: onRemoveWrapper,\n    });\n  };\n\n  const isPopperDirectionTop = popperPlacement?.includes('top');\n\n  const onPlacementChange = React.useCallback(\n    (placement?: Placement) => {\n      setPopperPlacement(placement);\n    },\n    [setPopperPlacement],\n  );\n\n  const onDropdownMouseLeave = React.useCallback(() => {\n    setFocusedOptionIndex(null);\n  }, [setFocusedOptionIndex]);\n\n  const toggleOpened = () => {\n    setOpened((prevOpened) => !prevOpened);\n  };\n\n  return (\n    <>\n      <FormField\n        getRootRef={rootRef}\n        style={style}\n        className={classNames(\n          styles['ChipsSelect'],\n          opened &&\n            (isPopperDirectionTop\n              ? styles['ChipsSelect--pop-up']\n              : styles['ChipsSelect--pop-down']),\n          className,\n        )}\n        disabled={disabled}\n        role=\"application\"\n        aria-disabled={disabled}\n        aria-readonly={restProps.readOnly}\n        after={\n          <IconButton\n            className={styles['ChipsSelect__dropdown']}\n            activeMode=\"\"\n            hoverMode=\"\"\n            // TODO [>=6]: add label customization\n            aria-label={opened ? 'Скрыть' : 'Развернуть'}\n            onClick={toggleOpened}\n          >\n            {icon ?? <DropdownIcon className={styles['ChipsSelect__icon']} opened={opened} />}\n          </IconButton>\n        }\n        before={before}\n      >\n        <ChipsInputBase\n          {...restProps}\n          tabIndex={tabIndex}\n          value={selectedOptions}\n          inputValue={fieldValue}\n          getNewOptionData={getNewOptionData}\n          getOptionLabel={getOptionLabel}\n          getOptionValue={getOptionValue}\n          renderChip={renderChipWrapper}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onKeyDown={handleKeyDown}\n          placeholder={placeholder}\n          getRef={getRef}\n          disabled={disabled}\n          onInputChange={handleInputChange}\n        />\n      </FormField>\n      {opened && (\n        <CustomSelectDropdown\n          targetRef={rootRef}\n          placement={popupDirection}\n          scrollBoxRef={scrollBoxRef}\n          onPlacementChange={onPlacementChange}\n          onMouseLeave={onDropdownMouseLeave}\n          fetching={fetching}\n          sameWidth={fixDropdownWidth}\n          forcePortal={forceDropdownPortal}\n        >\n          {showCreatable && (\n            <CustomSelectOption\n              hovered={focusedOptionIndex === 0}\n              onMouseDown={addOptionFromInput}\n              onMouseEnter={() => setFocusedOptionIndex(0)}\n            >\n              {creatableText}\n            </CustomSelectOption>\n          )}\n          {!filteredOptions?.length && !showCreatable && emptyText ? (\n            <Footnote className={styles['ChipsSelect__empty']}>{emptyText}</Footnote>\n          ) : (\n            filteredOptions.map((option: Option, index: number) => {\n              const label = getOptionLabel!(option);\n              const hovered =\n                focusedOption && getOptionValue!(option) === getOptionValue!(focusedOption);\n              const selected = selectedOptions.find((selectedOption: Option) => {\n                return getOptionValue!(selectedOption) === getOptionValue!(option);\n              });\n              const value = getOptionValue!(option);\n\n              return (\n                <React.Fragment key={`${typeof value}-${value}`}>\n                  {renderOption!({\n                    option,\n                    hovered: Boolean(hovered),\n                    children: label,\n                    selected: !!selected,\n                    getRootRef: (e) => {\n                      if (e) {\n                        return (chipsSelectOptions[index] = e);\n                      }\n                      return undefined;\n                    },\n                    onMouseDown: (e: React.MouseEvent<HTMLDivElement>) => {\n                      onChangeStart?.(e, option);\n\n                      if (!e.defaultPrevented) {\n                        closeAfterSelect && setOpened(false);\n                        addOption(option);\n                        clearInput();\n                      }\n                    },\n                    onMouseEnter: () => setFocusedOptionIndex(index),\n                  })}\n                </React.Fragment>\n              );\n            })\n          )}\n        </CustomSelectDropdown>\n      )}\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}