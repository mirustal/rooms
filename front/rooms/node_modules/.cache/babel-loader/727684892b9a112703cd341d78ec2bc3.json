{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { useEventListener } from \"../../hooks/useEventListener\";\nimport { usePatchChildrenRef } from \"../../hooks/usePatchChildrenRef\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { Popper } from \"../Popper/Popper\";\nexport var HoverPopper = function (_param) {\n  var getRef = _param.getRef,\n    content = _param.content,\n    children = _param.children,\n    onShownChange = _param.onShownChange,\n    _shown = _param.shown,\n    _param_showDelay = _param.showDelay,\n    showDelay = _param_showDelay === void 0 ? 150 : _param_showDelay,\n    _param_hideDelay = _param.hideDelay,\n    hideDelay = _param_hideDelay === void 0 ? 150 : _param_hideDelay,\n    restProps = _object_without_properties(_param, [\"getRef\", \"content\", \"children\", \"onShownChange\", \"shown\", \"showDelay\", \"hideDelay\"]);\n  var _React_useState = _sliced_to_array(React.useState(_shown || false), 2),\n    computedShown = _React_useState[0],\n    setComputedShown = _React_useState[1];\n  var shown = typeof _shown === \"boolean\" ? _shown : computedShown;\n  var setShown = function (value) {\n    if (typeof _shown !== \"boolean\") {\n      setComputedShown(value);\n    }\n    typeof onShownChange === \"function\" && onShownChange(value);\n  };\n  var showTimeout = useTimeout(function () {\n    setShown(true);\n  }, showDelay);\n  var hideTimeout = useTimeout(function () {\n    setShown(false);\n  }, hideDelay);\n  var _usePatchChildrenRef = _sliced_to_array(usePatchChildrenRef(children), 2),\n    childRef = _usePatchChildrenRef[0],\n    child = _usePatchChildrenRef[1];\n  var onTargetEnter = function () {\n    hideTimeout.clear();\n    showTimeout.set();\n  };\n  var onTargetLeave = function () {\n    showTimeout.clear();\n    hideTimeout.set();\n  };\n  var targetEnterListener = useEventListener(\"pointerenter\", onTargetEnter);\n  var targetLeaveListener = useEventListener(\"pointerleave\", onTargetLeave);\n  useIsomorphicLayoutEffect(function () {\n    if (childRef.current) {\n      targetEnterListener.add(childRef.current);\n      targetLeaveListener.add(childRef.current);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, child, shown && /*#__PURE__*/React.createElement(Popper, _object_spread_props(_object_spread({}, restProps), {\n    onMouseOver: hideTimeout.clear,\n    onMouseOut: onTargetLeave,\n    getRef: getRef,\n    targetRef: childRef\n  }), content));\n};","map":{"version":3,"names":["React","useEventListener","usePatchChildrenRef","useTimeout","useIsomorphicLayoutEffect","Popper","HoverPopper","_param","getRef","content","children","onShownChange","_shown","shown","_param_showDelay","showDelay","_param_hideDelay","hideDelay","restProps","_object_without_properties","_React_useState","_sliced_to_array","useState","computedShown","setComputedShown","setShown","value","showTimeout","hideTimeout","_usePatchChildrenRef","childRef","child","onTargetEnter","clear","set","onTargetLeave","targetEnterListener","targetLeaveListener","current","add","createElement","Fragment","_object_spread_props","_object_spread","onMouseOver","onMouseOut","targetRef"],"sources":["../../../src/components/HoverPopper/HoverPopper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { usePatchChildrenRef } from '../../hooks/usePatchChildrenRef';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { Popper, PopperCommonProps } from '../Popper/Popper';\n\nexport interface HoverPopperProps extends Omit<PopperCommonProps, 'content'> {\n  /**\n   * Содержимое тултипа\n   */\n  content?: React.ReactNode;\n  /**\n   * Если передан, то тултип будет показан/скрыт в зависимости от значения свойства\n   */\n  shown?: boolean;\n  /**\n   * Вызывается при каждом изменении видимости тултипа\n   */\n  onShownChange?: (shown: boolean) => void;\n  /**\n   * Количество миллисекунд, после которых произойдет показ дропдауна\n   */\n  showDelay?: number;\n  /**\n   * Количество миллисекунд, после которых произойдет скрытие дропдауна\n   */\n  hideDelay?: number;\n  /**\n   * Либо jsx-элемент (div, button, etc.), либо компонент со свойством `getRootRef`, которое применяется к корневому элементу компонента\n   */\n  children?: React.ReactElement;\n}\n\nexport const HoverPopper = ({\n  getRef,\n  content,\n  children,\n  onShownChange,\n  shown: _shown,\n  showDelay = 150,\n  hideDelay = 150,\n  ...restProps\n}: HoverPopperProps) => {\n  const [computedShown, setComputedShown] = React.useState(_shown || false);\n\n  const shown = typeof _shown === 'boolean' ? _shown : computedShown;\n\n  const setShown = (value: boolean) => {\n    if (typeof _shown !== 'boolean') {\n      setComputedShown(value);\n    }\n    typeof onShownChange === 'function' && onShownChange(value);\n  };\n\n  const showTimeout = useTimeout(() => {\n    setShown(true);\n  }, showDelay);\n\n  const hideTimeout = useTimeout(() => {\n    setShown(false);\n  }, hideDelay);\n\n  const [childRef, child] = usePatchChildrenRef(children);\n\n  const onTargetEnter = () => {\n    hideTimeout.clear();\n    showTimeout.set();\n  };\n\n  const onTargetLeave = () => {\n    showTimeout.clear();\n    hideTimeout.set();\n  };\n\n  const targetEnterListener = useEventListener('pointerenter', onTargetEnter);\n  const targetLeaveListener = useEventListener('pointerleave', onTargetLeave);\n\n  useIsomorphicLayoutEffect(() => {\n    if (childRef.current) {\n      targetEnterListener.add(childRef.current);\n      targetLeaveListener.add(childRef.current);\n    }\n  }, []);\n\n  return (\n    <React.Fragment>\n      {child}\n      {shown && (\n        <Popper\n          {...restProps}\n          onMouseOver={hideTimeout.clear}\n          onMouseOut={onTargetLeave}\n          getRef={getRef}\n          targetRef={childRef}\n        >\n          {content}\n        </Popper>\n      )}\n    </React.Fragment>\n  );\n};\n"],"mappings":";;;;AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,gBAAgB,QAAQ;AACjC,SAASC,mBAAmB,QAAQ;AACpC,SAASC,UAAU,QAAQ;AAC3B,SAASC,yBAAyB,QAAQ;AAC1C,SAASC,MAAM,QAA2B;AA6B1C,OAAO,IAAMC,WAAA,GAAc,SAAAA,CAAAC,MAAA;MACzBC,MAAA,GAAAD,MAAA,CAAAC,MAAA;IACAC,OAAA,GAAAF,MAAA,CAAAE,OAAA;IACAC,QAAA,GAAAH,MAAA,CAAAG,QAAA;IACAC,aAAA,GAAAJ,MAAA,CAAAI,aAAA;IACAC,MAAO,GAAAL,MAAA,CAAPM,KAAA;IAAAC,gBAAA,GAAAP,MAAA,CACAQ,SAAA;IAAAA,SAAA,GAAAD,gBAAA,cAAY,MAAAA,gBAAA;IAAAE,gBAAA,GAAAT,MAAA,CACZU,SAAA;IAAAA,SAAA,GAAAD,gBAAA,cAAY,MAAAA,gBAAA;IACTE,SAAA,GAAAC,0BAAA,CAAAZ,MAAA,GAPH,UACA,WACA,YACA,iBACA,SACA,aACA,Y;EAGA,IAA0Ca,eAAA,GAAAC,gBAAA,CAAArB,KAAA,CAAMsB,QAAQ,CAACV,MAAA,IAAU;IAA5DW,aAAA,GAAmCH,eAAA;IAApBI,gBAAA,GAAoBJ,eAAA;EAE1C,IAAMP,KAAA,GAAQ,OAAOD,MAAA,KAAW,YAAYA,MAAA,GAASW,aAAA;EAErD,IAAME,QAAA,GAAW,SAAAA,CAACC,KAAA;IAChB,IAAI,OAAOd,MAAA,KAAW,WAAW;MAC/BY,gBAAA,CAAiBE,KAAA;IACnB;IACA,OAAOf,aAAA,KAAkB,cAAcA,aAAA,CAAce,KAAA;EACvD;EAEA,IAAMC,WAAA,GAAcxB,UAAA,CAAW;IAC7BsB,QAAA,CAAS;EACX,GAAGV,SAAA;EAEH,IAAMa,WAAA,GAAczB,UAAA,CAAW;IAC7BsB,QAAA,CAAS;EACX,GAAGR,SAAA;EAEH,IAA0BY,oBAAA,GAAAR,gBAAA,CAAAnB,mBAAA,CAAoBQ,QAAA;IAAvCoB,QAAA,GAAmBD,oBAAA;IAATE,KAAA,GAASF,oBAAA;EAE1B,IAAMG,aAAA,GAAgB,SAAAA,CAAA;IACpBJ,WAAA,CAAYK,KAAK;IACjBN,WAAA,CAAYO,GAAG;EACjB;EAEA,IAAMC,aAAA,GAAgB,SAAAA,CAAA;IACpBR,WAAA,CAAYM,KAAK;IACjBL,WAAA,CAAYM,GAAG;EACjB;EAEA,IAAME,mBAAA,GAAsBnC,gBAAA,CAAiB,gBAAgB+B,aAAA;EAC7D,IAAMK,mBAAA,GAAsBpC,gBAAA,CAAiB,gBAAgBkC,aAAA;EAE7D/B,yBAAA,CAA0B;IACxB,IAAI0B,QAAA,CAASQ,OAAO,EAAE;MACpBF,mBAAA,CAAoBG,GAAG,CAACT,QAAA,CAASQ,OAAO;MACxCD,mBAAA,CAAoBE,GAAG,CAACT,QAAA,CAASQ,OAAO;IAC1C;EACF,GAAG,EAAE;EAEL,oBACEtC,KAAA,CAAAwC,aAAA,CAACxC,KAAA,CAAMyC,QAAQ,QACZV,KAAA,EACAlB,KAAA,iBACCb,KAAA,CAAAwC,aAAA,CAACnC,MAAA,EAAAqC,oBAAA,CAAAC,cAAA,KACKzB,SAAA;IACJ0B,WAAA,EAAahB,WAAA,CAAYK,KAAK;IAC9BY,UAAA,EAAYV,aAAA;IACZ3B,MAAA,EAAQA,MAAA;IACRsC,SAAA,EAAWhB;MAEVrB,OAAA;AAKX"},"metadata":{},"sourceType":"module"}