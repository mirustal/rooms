{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nvar stylesAlignX = {\n  center: \"vkuiPopoutWrapper--alignX-center\",\n  left: \"vkuiPopoutWrapper--alignX-left\",\n  right: \"vkuiPopoutWrapper--alignX-right\"\n};\nvar stylesAlignY = {\n  center: \"vkuiPopoutWrapper--alignY-center\",\n  top: \"vkuiPopoutWrapper--alignY-top\",\n  bottom: \"vkuiPopoutWrapper--alignY-bottom\"\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport var PopoutWrapper = function (_param) {\n  var _param_alignY = _param.alignY,\n    alignY = _param_alignY === void 0 ? \"center\" : _param_alignY,\n    _param_alignX = _param.alignX,\n    alignX = _param_alignX === void 0 ? \"center\" : _param_alignX,\n    _param_closing = _param.closing,\n    closing = _param_closing === void 0 ? false : _param_closing,\n    _param_hasMask = _param.hasMask,\n    hasMask = _param_hasMask === void 0 ? true : _param_hasMask,\n    _param_fixed = _param.fixed,\n    fixed = _param_fixed === void 0 ? true : _param_fixed,\n    children = _param.children,\n    onClick = _param.onClick,\n    restProps = _object_without_properties(_param, [\"alignY\", \"alignX\", \"closing\", \"hasMask\", \"fixed\", \"children\", \"onClick\"]);\n  var platform = usePlatform();\n  var _React_useState = _sliced_to_array(React.useState(!hasMask), 2),\n    opened = _React_useState[0],\n    setOpened = _React_useState[1];\n  var onFadeInEnd = function (e) {\n    if (!e || e.animationName === \"vkuianimation-full-fade-in\") {\n      setOpened(true);\n    }\n  };\n  var animationFinishFallback = useTimeout(onFadeInEnd, platform === Platform.IOS ? 300 : 200);\n  React.useEffect(function () {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n  var window = useDOM().window;\n  useGlobalEventListener(window, \"touchmove\", function (e) {\n    return e.preventDefault();\n  }, {\n    passive: false\n  });\n  return /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    baseClassName: classNames(\"vkuiPopoutWrapper\", stylesAlignY[alignY], stylesAlignX[alignX], closing && \"vkuiPopoutWrapper--closing\", opened && \"vkuiPopoutWrapper--opened\", fixed && \"vkuiPopoutWrapper--fixed\", hasMask && \"vkuiPopoutWrapper--masked\"),\n    onAnimationEnd: opened ? undefined : onFadeInEnd\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__overlay\",\n    onClick: onClick\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopoutWrapper__content\"\n  }, children)));\n};","map":{"version":3,"names":["React","classNames","useGlobalEventListener","usePlatform","useTimeout","useDOM","Platform","RootComponent","stylesAlignX","center","left","right","stylesAlignY","top","bottom","PopoutWrapper","_param","alignY","_param_alignY","_param_alignX","alignX","_param_closing","closing","_param_hasMask","hasMask","_param_fixed","fixed","children","onClick","restProps","_object_without_properties","platform","_React_useState","_sliced_to_array","useState","opened","setOpened","onFadeInEnd","e","animationName","animationFinishFallback","IOS","useEffect","set","window","preventDefault","passive","createElement","_object_spread_props","_object_spread","baseClassName","onAnimationEnd","undefined","className"],"sources":["../../../src/components/PopoutWrapper/PopoutWrapper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './PopoutWrapper.module.css';\n\nconst stylesAlignX = {\n  center: styles['PopoutWrapper--alignX-center'],\n  left: styles['PopoutWrapper--alignX-left'],\n  right: styles['PopoutWrapper--alignX-right'],\n};\n\nconst stylesAlignY = {\n  center: styles['PopoutWrapper--alignY-center'],\n  top: styles['PopoutWrapper--alignY-top'],\n  bottom: styles['PopoutWrapper--alignY-bottom'],\n};\n\nexport interface PopoutWrapperProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: 'top' | 'center' | 'bottom';\n  alignX?: 'left' | 'center' | 'right';\n  closing?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport const PopoutWrapper = ({\n  alignY = 'center',\n  alignX = 'center',\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === styles['animation-full-fade-in']) {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(onFadeInEnd, platform === Platform.IOS ? 300 : 200);\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, 'touchmove', (e) => e.preventDefault(), {\n    passive: false,\n  });\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['PopoutWrapper'],\n        stylesAlignY[alignY],\n        stylesAlignX[alignX],\n        closing && styles['PopoutWrapper--closing'],\n        opened && styles['PopoutWrapper--opened'],\n        fixed && styles['PopoutWrapper--fixed'],\n        hasMask && styles['PopoutWrapper--masked'],\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n    >\n      <div className={styles['PopoutWrapper__container']}>\n        <div className={styles['PopoutWrapper__overlay']} onClick={onClick} />\n        <div className={styles['PopoutWrapper__content']}>{children}</div>\n      </div>\n    </RootComponent>\n  );\n};\n"],"mappings":";;;;AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,UAAU,QAAQ;AAC3B,SAASC,sBAAsB,QAAQ;AACvC,SAASC,WAAW,QAAQ;AAC5B,SAASC,UAAU,QAAQ;AAC3B,SAASC,MAAM,QAAQ;AACvB,SAASC,QAAQ,QAAQ;AAEzB,SAASC,aAAa,QAAQ;AAG9B,IAAMC,YAAA,GAAe;EACnBC,MAAM;EACNC,IAAI;EACJC,KAAK;AACP;AAEA,IAAMC,YAAA,GAAe;EACnBH,MAAM;EACNI,GAAG;EACHC,MAAM;AACR;AAUA;;;AAGA,OAAO,IAAMC,aAAA,GAAgB,SAAAA,CAAAC,MAAA;6BAC3BC,MAAA;IAAAA,MAAA,GAAAC,aAAA,cAAS,WAAAA,aAAA;IAAAC,aAAA,GAAAH,MAAA,CACTI,MAAA;IAAAA,MAAA,GAAAD,aAAA,cAAS,WAAAA,aAAA;IAAAE,cAAA,GAAAL,MAAA,CACTM,OAAA;IAAAA,OAAA,GAAAD,cAAA,cAAU,QAAAA,cAAA;IAAAE,cAAA,GAAAP,MAAA,CACVQ,OAAA;IAAAA,OAAA,GAAAD,cAAA,cAAU,OAAAA,cAAA;IAAAE,YAAA,GAAAT,MAAA,CACVU,KAAA;IAAAA,KAAA,GAAAD,YAAA,cAAQ,OAAAA,YAAA;IACRE,QAAA,GAAAX,MAAA,CAAAW,QAAA;IACAC,OAAA,GAAAZ,MAAA,CAAAY,OAAA;IACGC,SAAA,GAAAC,0BAAA,CAAAd,MAAA,GAPH,UACA,UACA,WACA,WACA,SACA,YACA,U;EAGA,IAAMe,QAAA,GAAW5B,WAAA;EACjB,IAA4B6B,eAAA,GAAAC,gBAAA,CAAAjC,KAAA,CAAMkC,QAAQ,CAAC,CAACV,OAAA;IAArCW,MAAA,GAAqBH,eAAA;IAAbI,SAAA,GAAaJ,eAAA;EAE5B,IAAMK,WAAA,GAAc,SAAAA,CAACC,CAAA;IACnB,IAAI,CAACA,CAAA,IAAKA,CAAA,CAAEC,aAAa,mCAAuC;MAC9DH,SAAA,CAAU;IACZ;EACF;EACA,IAAMI,uBAAA,GAA0BpC,UAAA,CAAWiC,WAAA,EAAaN,QAAA,KAAazB,QAAA,CAASmC,GAAG,GAAG,MAAM;EAC1FzC,KAAA,CAAM0C,SAAS,CAAC;IACd,CAACP,MAAA,IAAUK,uBAAA,CAAwBG,GAAG;EACxC,GAAG,CAACH,uBAAA,EAAyBL,MAAA,CAAO;EAEpC,IAAMS,MAAE,GAAWvC,MAAA,GAAXuC,MAAA;EACR1C,sBAAA,CAAuB0C,MAAA,EAAQ,aAAa,UAACN,CAAA;WAAMA,CAAA,CAAEO,cAAc;KAAI;IACrEC,OAAA,EAAS;EACX;EAEA,oBACE9C,KAAA,CAAA+C,aAAA,CAACxC,aAAA,EAAAyC,oBAAA,CAAAC,cAAA,KACKpB,SAAA;IACJqB,aAAA,EAAejD,UAAA,sBAEbW,YAAY,CAACK,MAAA,CAAO,EACpBT,YAAY,CAACY,MAAA,CAAO,EACpBE,OAAA,kCACAa,MAAA,iCACAT,KAAA,gCACAF,OAAA;IAEF2B,cAAA,EAAgBhB,MAAA,GAASiB,SAAA,GAAYf;mBAErCrC,KAAA,CAAA+C,aAAA,CAAC;IAAIM,SAAS;kBACZrD,KAAA,CAAA+C,aAAA,CAAC;IAAIM,SAAS;IAAoCzB,OAAA,EAASA;mBAC3D5B,KAAA,CAAA+C,aAAA,CAAC;IAAIM,SAAS;KAAqC1B,QAAA;AAI3D"},"metadata":{},"sourceType":"module"}