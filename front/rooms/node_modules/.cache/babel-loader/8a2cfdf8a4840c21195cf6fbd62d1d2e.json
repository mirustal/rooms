{"ast":null,"code":"import bridge from \"@vkontakte/vk-bridge\";\nimport { AppId, base64Yasen } from \"../config\";\nimport { joinRoom } from \"../serverApi/serverApi\";\nimport { VkStorageKeys } from \"./storageKeys\";\nimport { imageTemplate, joinRoomImg, yasenImg } from \"../Base64Image\";\nexport var joinRoomOnStart = undefined;\nconst Scopes = {\n  friends: \"friends\",\n  photos: \"photos\",\n  audio: \"audio\",\n  video: \"video\",\n  stories: \"stories\",\n  pages: \"pages\",\n  menu: \"menu\",\n  status: \"status\",\n  notes: \"notes\",\n  messages: \"messages\",\n  wall: \"wall\",\n  ads: \"ads\",\n  offline: \"offline\",\n  docs: \"docs\",\n  groups: \"groups\",\n  notifications: \"notifications\",\n  stats: \"stats\",\n  email: \"email\",\n  market: \"market\",\n  phone_number: \"phone_number\"\n};\nexport async function getAccessToken() {\n  let accessToken = undefined;\n  let scopes = Array.from(arguments);\n  if (scopes.length > 0) scopes = scopes.join(\",\");else scopes = '';\n  await bridge.send('VKWebAppGetAuthToken', {\n    app_id: AppId,\n    scope: scopes\n  }).then(data => {\n    if (data.access_token) accessToken = data.access_token;\n  }).catch(error => {\n    console.log(error);\n  });\n  return accessToken;\n}\nvar cachedStorage = {};\nvar launchParams = undefined;\nexport function pushToStorage(key, value) {\n  cachedStorage[key] = value;\n  bridge.send('VKWebAppStorageSet', {\n    key: key,\n    value: value\n  }).then(data => {\n    if (data.result) console.log(`pushed to storage '${key}' with value:\\n${value}`);else console.error(`failed to push to storage '${key}' with value:\\n${value}`);\n  }).catch(error => {\n    console.log(error);\n  });\n}\nexport function clearTheStorage(key) {\n  bridge.send('VKWebAppStorageSet', {\n    key: key,\n    value: \"\"\n  }).then(data => {\n    if (data.result) {\n      console.log('you storage clear');\n    }\n  }).catch(error => {\n    \"storogae not clear\";\n\n    console.log(error);\n  });\n}\nexport async function getFromStorage(key) {\n  if (key in cachedStorage) {\n    return cachedStorage[key];\n  }\n\n  let value = undefined;\n  await bridge.send('VKWebAppStorageGet', {\n    keys: [key]\n  }).then(data => {\n    if (data.keys) {\n      value = data.keys[0].value;\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n  return value;\n}\nexport async function getLaunchParams() {\n  await bridge.send('VKWebAppGetLaunchParams').then(data => {\n    if (data.vk_app_id) {\n      launchParams = data;\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n  return launchParams;\n}\nexport async function getVkUserId() {\n  launchParams = await getLaunchParams();\n  return launchParams.vk_user_id;\n}\n\nfunction getCustomParams() {\n  const hashString = window.location.hash.substring(1);\n  const pairs = hashString.split('&');\n  const params = {};\n  pairs.forEach(pair => {\n    const [key, value] = pair.split('=');\n    params[key] = decodeURIComponent(value);\n  });\n  return params;\n}\n\nexport async function createInviteURL(room_id) {\n  const baseAppUrl = \"https://vk.com/app\";\n  const vk_app_id = (await getLaunchParams()).vk_app_id;\n  const invitationLink = `${baseAppUrl}${vk_app_id}#room_id=${room_id}`;\n  return invitationLink;\n}\nexport async function shareInviteLink(room_id) {\n  bridge.send('VKWebAppShare', {\n    link: await createInviteURL(room_id)\n  }).then(data => {\n    if (data.result) {\n      copyToClipboard(invitationLink);\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n}\nexport async function copyToClipboard(text) {\n  bridge.send(\"VKWebAppCopyText\", {\n    text: text\n  }).then(data => {\n    if (data.result) {\n      console.log(\"successfully copied\");\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n}\nexport async function initializeApp() {\n  await bridge.send(\"VKWebAppInit\");\n  bridge.send('VKWebAppGetAds');\n  checkAds();\n  showSlidec(imageTemplate);\n  var customParams = getCustomParams();\n\n  if (customParams.room_id) {\n    joinRoomOnStart = await joinRoom(customParams.room_id);\n  }\n}\nvar adCounter = 0;\nexport function showAd() {\n  let skipCounter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!skipCounter) {\n    adCounter++;\n    if (adCounter == 1) return;\n    if (adCounter % 3 == 0) return;\n  }\n\n  bridge.send(\"VKWebAppShowNativeAds\", {\n    ad_format: 'interstitial'\n  });\n}\n\nasync function checkAds() {\n  while (true) {\n    await new Promise(resolve => setTimeout(resolve, 10000));\n    bridge.send(\"VKWebAppCheckNativeAds\", {\n      ad_format: 'interstitial'\n    });\n  }\n}\n\nexport async function createJoinCallLink(onCreated) {\n  await bridge.send('VKWebAppCallStart').then(data => {\n    if (data.result) {\n      onCreated(data.join_link);\n    }\n  }).catch(error => {\n    // Ошибка\n    console.log(error);\n  });\n}\nexport function joinCall(joinlink, onError) {\n  bridge.send('VKWebAppCallJoin', {\n    join_link: joinlink\n  }).catch(error => {\n    onError();\n    console.log(error);\n  });\n}\nexport async function showSlidec(imageTemplate) {\n  console.log(\"show\");\n  const storageData = getFromStorage(VkStorageKeys.ViewHint);\n  storageData.then(value => {\n    if (value) console.log(\"znach\", value, value.result);\n  });\n  console.log(storageData, storageData.result);\n  bridge.send('VKWebAppShowSlidesSheet', {\n    slides: [{\n      media: {\n        blob: imageTemplate[\"yasenImg\"],\n        type: 'image'\n      },\n      title: 'Добро пожаловать в комнаты!',\n      subtitle: 'Комнаты это место в котором ты с простотой можешь создать комфортное место для общения'\n    }, {\n      media: {\n        blob: imageTemplate[\"createRoomImg\"],\n        type: 'image'\n      },\n      title: 'Общайся!',\n      subtitle: 'Создай свою комнату и приглашай в неё друзей'\n    }, {\n      media: {\n        blob: imageTemplate[\"joinRoomImg\"],\n        type: 'image'\n      },\n      title: 'Расширяй!',\n      subtitle: 'Вступай в новые комнаты'\n    }, {\n      media: {\n        blob: imageTemplate[\"joinChannelImg\"],\n        type: 'image'\n      },\n      title: 'Общаться - это просто!',\n      subtitle: 'Чтобы подключиться к звонку, достаточно нажать на нужный тебе канал'\n    }, {\n      media: {\n        blob: imageTemplate[\"yasenImg\"],\n        type: 'image'\n      },\n      title: 'Удачи!',\n      subtitle: 'Вот и все, что тебе нужно знать о комнатах, отличных тебе посиделок и приятных бесед!'\n    }]\n  }).then(data => {\n    if (data.result) {\n      // Слайды показаны\n      pushToStorage(VkStorageKeys.ViewHint, \"1\");\n    }\n  }).catch(error => {\n    // Ошибка\n    console.log(error);\n  });\n}","map":{"version":3,"names":["bridge","AppId","base64Yasen","joinRoom","VkStorageKeys","imageTemplate","joinRoomImg","yasenImg","joinRoomOnStart","undefined","Scopes","friends","photos","audio","video","stories","pages","menu","status","notes","messages","wall","ads","offline","docs","groups","notifications","stats","email","market","phone_number","getAccessToken","accessToken","scopes","Array","from","arguments","length","join","send","app_id","scope","then","data","access_token","catch","error","console","log","cachedStorage","launchParams","pushToStorage","key","value","result","clearTheStorage","getFromStorage","keys","getLaunchParams","vk_app_id","getVkUserId","vk_user_id","getCustomParams","hashString","window","location","hash","substring","pairs","split","params","forEach","pair","decodeURIComponent","createInviteURL","room_id","baseAppUrl","invitationLink","shareInviteLink","link","copyToClipboard","text","initializeApp","checkAds","showSlidec","customParams","adCounter","showAd","skipCounter","ad_format","Promise","resolve","setTimeout","createJoinCallLink","onCreated","join_link","joinCall","joinlink","onError","storageData","ViewHint","slides","media","blob","type","title","subtitle"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/bridge/bridgeLib.js"],"sourcesContent":["import bridge from \"@vkontakte/vk-bridge\";\nimport { AppId, base64Yasen } from \"../config\";\nimport { joinRoom } from \"../serverApi/serverApi\";\nimport { VkStorageKeys } from \"./storageKeys\";\nimport { imageTemplate, joinRoomImg, yasenImg } from \"../Base64Image\";\n\nexport var joinRoomOnStart = undefined\nconst Scopes = {\n    friends: \"friends\",\n    photos: \"photos\",\n    audio: \"audio\",\n    video: \"video\",\n    stories: \"stories\",\n    pages: \"pages\",\n    menu: \"menu\",\n    status: \"status\",\n    notes: \"notes\",\n    messages: \"messages\",\n    wall: \"wall\",\n    ads: \"ads\",\n    offline: \"offline\",\n    docs: \"docs\",\n    groups: \"groups\",\n    notifications: \"notifications\",\n    stats: \"stats\",\n    email: \"email\",\n    market: \"market\",\n    phone_number: \"phone_number\"\n}\n\nexport async function getAccessToken() {\n    let accessToken = undefined\n    let scopes = Array.from(arguments)\n    if (scopes.length > 0) scopes = scopes.join(\",\")\n    else scopes = ''\n\n    await bridge.send('VKWebAppGetAuthToken',\n        {\n            app_id: AppId,\n            scope: scopes\n        })\n        .then(data => {\n            if (data.access_token) accessToken = data.access_token\n        })\n        .catch(error => {\n            console.log(error)\n        })\n    return accessToken\n}\n\nvar cachedStorage = {}\nvar launchParams = undefined\n\nexport function pushToStorage(key, value) {\n    cachedStorage[key] = value;\n    bridge.send('VKWebAppStorageSet', {\n        key: key,\n        value: value\n    })\n        .then((data) => {\n            if (data.result) console.log(`pushed to storage '${key}' with value:\\n${value}`)\n            else console.error(`failed to push to storage '${key}' with value:\\n${value}`)\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n}\n\n\n\nexport function clearTheStorage(key) {\n        bridge.send('VKWebAppStorageSet', {\n            key: key,\n            value: \"\"\n        })\n            .then((data) => {\n                if (data.result) {\n                    console.log('you storage clear')\n                }\n            })\n            .catch((error) => {\n                \"storogae not clear\"\n                console.log(error);\n            });\n}\n\nexport async function getFromStorage(key) {\n    if (key in cachedStorage) {\n        return cachedStorage[key]\n    }\n    let value = undefined;\n    await bridge.send('VKWebAppStorageGet', {\n        keys: [key]\n    })\n        .then((data) => {\n            if (data.keys) {\n                value = data.keys[0].value;\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n    return value;\n}\n\nexport async function getLaunchParams() {\n    await bridge.send('VKWebAppGetLaunchParams')\n        .then((data) => {\n            if (data.vk_app_id) {\n                launchParams = data\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n    return launchParams;\n}\n\nexport async function getVkUserId() {\n    launchParams = await getLaunchParams()\n    return launchParams.vk_user_id\n}\n\nfunction getCustomParams() {\n    const hashString = window.location.hash.substring(1);\n\n    const pairs = hashString.split('&');\n\n    const params = {};\n\n    pairs.forEach(pair => {\n        const [key, value] = pair.split('=');\n        params[key] = decodeURIComponent(value);\n    });\n\n    return params;\n}\n\nexport async function createInviteURL(room_id) {\n    const baseAppUrl = \"https://vk.com/app\";\n    const vk_app_id = (await getLaunchParams()).vk_app_id\n    const invitationLink = `${baseAppUrl}${vk_app_id}#room_id=${room_id}`;\n    return invitationLink\n}\n\nexport async function shareInviteLink(room_id) {\n    bridge.send('VKWebAppShare', {\n        link: await createInviteURL(room_id)\n        })\n        .then((data) => { \n          if (data.result) {\n            copyToClipboard(invitationLink)\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n}\n\n\nexport async function copyToClipboard(text) {\n    bridge\n        .send(\"VKWebAppCopyText\", {\n            text: text,\n        })\n        .then((data) => {\n            if (data.result) {\n                console.log(\"successfully copied\");\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n}\n\n\n\nexport async function initializeApp() {\n    await bridge.send(\"VKWebAppInit\");\n    bridge.send('VKWebAppGetAds')\n    checkAds();\n    showSlidec(imageTemplate);\n\n    var customParams = getCustomParams()\n\n    if (customParams.room_id) {\n        joinRoomOnStart = await joinRoom(customParams.room_id)\n    }\n\n}\n\nvar adCounter = 0;\nexport function showAd(skipCounter = false) {\n    if (!skipCounter) {\n        adCounter++\n        if (adCounter == 1) return;\n        if (adCounter % 3 == 0) return;\n    }\n\n    bridge.send(\"VKWebAppShowNativeAds\", {\n        ad_format: 'interstitial'\n    })\n}\n\nasync function checkAds() {\n    while (true) {\n        await new Promise(resolve => setTimeout(resolve, 10000))\n        \n        bridge.send(\"VKWebAppCheckNativeAds\", {\n            ad_format: 'interstitial'\n        })\n    }\n}\n\nexport async function createJoinCallLink(onCreated) {\n    await bridge.send('VKWebAppCallStart')  \n        .then((data) => { \n        if (data.result) {\n            onCreated(data.join_link)\n        }\n        })\n        .catch((error) => {\n        // Ошибка\n        console.log(error);\n        });\n}\n\nexport function joinCall(joinlink, onError) {\n    bridge.send('VKWebAppCallJoin', {\n        join_link: joinlink\n        })\n        .catch((error) => {\n            onError()\n            console.log(error);\n        });\n}\n\nexport async function showSlidec(imageTemplate) {\n    console.log(\"show\")\n    const storageData = getFromStorage(VkStorageKeys.ViewHint)\n    storageData.then((value) => {if (value) console.log(\"znach\", value, value.result)})\n    console.log(storageData, storageData.result)\n\n    bridge.send('VKWebAppShowSlidesSheet', {\n        slides: [\n            {\n                media: {\n                  blob:  imageTemplate[\"yasenImg\"],\n                  type: 'image'\n                },\n                title: 'Добро пожаловать в комнаты!',\n                subtitle: 'Комнаты это место в котором ты с простотой можешь создать комфортное место для общения'\n              },\n          {\n            media: {\n              blob:  imageTemplate[\"createRoomImg\"],\n              type: 'image'\n            },\n            title: 'Общайся!',\n            subtitle: 'Создай свою комнату и приглашай в неё друзей'\n          },\n          {\n            media: {\n                blob:  imageTemplate[\"joinRoomImg\"],\n                type: 'image'\n              },\n              title: 'Расширяй!',\n              subtitle: 'Вступай в новые комнаты'\n          },\n          {\n            media: {\n                blob:  imageTemplate[\"joinChannelImg\"],\n                type: 'image'\n              },\n              title: 'Общаться - это просто!',\n              subtitle: 'Чтобы подключиться к звонку, достаточно нажать на нужный тебе канал'\n          },\n          {\n            media: {\n                blob:  imageTemplate[\"yasenImg\"],\n                type: 'image'\n              },\n              title: 'Удачи!',\n              subtitle: 'Вот и все, что тебе нужно знать о комнатах, отличных тебе посиделок и приятных бесед!'\n          }\n\n         ]})\n        .then((data) => { \n          if (data.result) {\n            // Слайды показаны\n            pushToStorage(VkStorageKeys.ViewHint, \"1\")\n          }\n        })\n        .catch((error) => {\n          // Ошибка\n          console.log(error);\n        });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}