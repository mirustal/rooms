{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { CustomScrollView } from \"../CustomScrollView/CustomScrollView\";\nimport { Popper } from \"../Popper/Popper\";\nimport { Spinner } from \"../Spinner/Spinner\";\nvar calcIsTop = function (placement) {\n  return placement === null || placement === void 0 ? void 0 : placement.includes(\"top\");\n};\nexport var CustomSelectDropdown = function (_param) {\n  var children = _param.children,\n    targetRef = _param.targetRef,\n    scrollBoxRef = _param.scrollBoxRef,\n    placement = _param.placement,\n    fetching = _param.fetching,\n    parentOnPlacementChange = _param.onPlacementChange,\n    _param_offsetDistance = _param.offsetDistance,\n    offsetDistance = _param_offsetDistance === void 0 ? 0 : _param_offsetDistance,\n    _param_sameWidth = _param.sameWidth,\n    sameWidth = _param_sameWidth === void 0 ? true : _param_sameWidth,\n    _param_forcePortal = _param.forcePortal,\n    forcePortal = _param_forcePortal === void 0 ? true : _param_forcePortal,\n    autoHideScrollbar = _param.autoHideScrollbar,\n    autoHideScrollbarDelay = _param.autoHideScrollbarDelay,\n    className = _param.className,\n    restProps = _object_without_properties(_param, [\"children\", \"targetRef\", \"scrollBoxRef\", \"placement\", \"fetching\", \"onPlacementChange\", \"offsetDistance\", \"sameWidth\", \"forcePortal\", \"autoHideScrollbar\", \"autoHideScrollbarDelay\", \"className\"]);\n  var _React_useState = _sliced_to_array(React.useState(function () {\n      return calcIsTop(placement);\n    }), 2),\n    isTop = _React_useState[0],\n    setIsTop = _React_useState[1];\n  var onPlacementChange = React.useCallback(function (param) {\n    var placement = param.placement;\n    setIsTop(calcIsTop(placement));\n    parentOnPlacementChange === null || parentOnPlacementChange === void 0 ? void 0 : parentOnPlacementChange(placement);\n  }, [parentOnPlacementChange, setIsTop]);\n  return /*#__PURE__*/React.createElement(Popper, _object_spread({\n    targetRef: targetRef,\n    offsetDistance: offsetDistance,\n    sameWidth: sameWidth,\n    onPlacementChange: onPlacementChange,\n    placement: placement,\n    className: classNames(\"vkuiCustomSelectDropdown\", \"vkuiInternalCustomSelectDropdown\", offsetDistance === 0 && (isTop ? \"vkuiCustomSelectDropdown--top\" : \"vkuiCustomSelectDropdown--bottom\"), sameWidth && classNames(\"vkuiCustomSelectDropdown--wide\", \"vkuiInternalCustomSelectDropdown--wide\"), className),\n    forcePortal: forcePortal,\n    autoUpdateOnTargetResize: true\n  }, restProps), /*#__PURE__*/React.createElement(CustomScrollView, {\n    boxRef: scrollBoxRef,\n    className: \"vkuiCustomSelectDropdown__in\",\n    autoHideScrollbar: autoHideScrollbar,\n    autoHideScrollbarDelay: autoHideScrollbarDelay\n  }, fetching ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomSelectDropdown__fetching\"\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    size: \"small\"\n  })) : children));\n};","map":{"version":3,"names":["React","classNames","CustomScrollView","Popper","Spinner","calcIsTop","placement","includes","CustomSelectDropdown","_param","children","targetRef","scrollBoxRef","fetching","parentOnPlacementChange","onPlacementChange","_param_offsetDistance","offsetDistance","_param_sameWidth","sameWidth","_param_forcePortal","forcePortal","autoHideScrollbar","autoHideScrollbarDelay","className","restProps","_object_without_properties","_React_useState","_sliced_to_array","useState","isTop","setIsTop","useCallback","param","createElement","_object_spread","autoUpdateOnTargetResize","boxRef","size"],"sources":["../../../src/components/CustomSelectDropdown/CustomSelectDropdown.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport type { Placement } from '../../lib/floating';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { CustomScrollView } from '../CustomScrollView/CustomScrollView';\nimport { TrackerOptionsProps } from '../CustomScrollView/useTrackerVisibility';\nimport { Popper } from '../Popper/Popper';\nimport { Spinner } from '../Spinner/Spinner';\nimport styles from './CustomSelectDropdown.module.css';\n\nexport interface CustomSelectDropdownProps\n  extends HTMLAttributesWithRootRef<HTMLDivElement>,\n    TrackerOptionsProps {\n  targetRef: React.RefObject<HTMLElement>;\n  placement?: Placement;\n  scrollBoxRef?: React.Ref<HTMLDivElement>;\n  fetching?: boolean;\n  offsetDistance?: number;\n  sameWidth?: boolean;\n  forcePortal?: boolean;\n  onPlacementChange?: (placement?: Placement) => void;\n}\n\nconst calcIsTop = (placement?: Placement) => placement?.includes('top');\n\nexport const CustomSelectDropdown = ({\n  children,\n  targetRef,\n  scrollBoxRef,\n  placement,\n  fetching,\n  onPlacementChange: parentOnPlacementChange,\n  offsetDistance = 0,\n  sameWidth = true,\n  forcePortal = true,\n  autoHideScrollbar,\n  autoHideScrollbarDelay,\n  className,\n  ...restProps\n}: CustomSelectDropdownProps) => {\n  const [isTop, setIsTop] = React.useState(() => calcIsTop(placement));\n\n  const onPlacementChange = React.useCallback(\n    ({ placement }: { placement?: Placement }) => {\n      setIsTop(calcIsTop(placement));\n      parentOnPlacementChange?.(placement);\n    },\n    [parentOnPlacementChange, setIsTop],\n  );\n\n  return (\n    <Popper\n      targetRef={targetRef}\n      offsetDistance={offsetDistance}\n      sameWidth={sameWidth}\n      onPlacementChange={onPlacementChange}\n      placement={placement}\n      className={classNames(\n        styles['CustomSelectDropdown'],\n        'vkuiInternalCustomSelectDropdown',\n        offsetDistance === 0 &&\n          (isTop ? styles['CustomSelectDropdown--top'] : styles['CustomSelectDropdown--bottom']),\n        sameWidth &&\n          classNames(\n            styles['CustomSelectDropdown--wide'],\n            'vkuiInternalCustomSelectDropdown--wide',\n          ),\n        className,\n      )}\n      forcePortal={forcePortal}\n      autoUpdateOnTargetResize\n      {...restProps}\n    >\n      <CustomScrollView\n        boxRef={scrollBoxRef}\n        className={styles['CustomSelectDropdown__in']}\n        autoHideScrollbar={autoHideScrollbar}\n        autoHideScrollbarDelay={autoHideScrollbarDelay}\n      >\n        {fetching ? (\n          <div className={styles['CustomSelectDropdown__fetching']}>\n            <Spinner size=\"small\" />\n          </div>\n        ) : (\n          children\n        )}\n      </CustomScrollView>\n    </Popper>\n  );\n};\n"],"mappings":";;;AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,UAAU,QAAQ;AAG3B,SAASC,gBAAgB,QAAQ;AAEjC,SAASC,MAAM,QAAQ;AACvB,SAASC,OAAO,QAAQ;AAgBxB,IAAMC,SAAA,GAAY,SAAAA,CAACC,SAAA;SAA0BA,SAAA,aAAAA,SAAA,uBAAAA,SAAA,CAAWC,QAAQ,CAAC;;AAEjE,OAAO,IAAMC,oBAAA,GAAuB,SAAAA,CAAAC,MAAA;MAClCC,QAAA,GAAAD,MAAA,CAAAC,QAAA;IACAC,SAAA,GAAAF,MAAA,CAAAE,SAAA;IACAC,YAAA,GAAAH,MAAA,CAAAG,YAAA;IACAN,SAAA,GAAAG,MAAA,CAAAH,SAAA;IACAO,QAAA,GAAAJ,MAAA,CAAAI,QAAA;IACAC,uBAAmB,GAAAL,MAAA,CAAnBM,iBAAA;IAAAC,qBAAA,GAAAP,MAAA,CACAQ,cAAA;IAAAA,cAAA,GAAAD,qBAAA,cAAiB,IAAAA,qBAAA;IAAAE,gBAAA,GAAAT,MAAA,CACjBU,SAAA;IAAAA,SAAA,GAAAD,gBAAA,cAAY,OAAAA,gBAAA;IAAAE,kBAAA,GAAAX,MAAA,CACZY,WAAA;IAAAA,WAAA,GAAAD,kBAAA,cAAc,OAAAA,kBAAA;IACdE,iBAAA,GAAAb,MAAA,CAAAa,iBAAA;IACAC,sBAAA,GAAAd,MAAA,CAAAc,sBAAA;IACAC,SAAA,GAAAf,MAAA,CAAAe,SAAA;IACGC,SAAA,GAAAC,0BAAA,CAAAjB,MAAA,GAZH,YACA,aACA,gBACA,aACA,YACA,qBACA,kBACA,aACA,eACA,qBACA,0BACA,Y;EAGA,IAA0BkB,eAAA,GAAAC,gBAAA,CAAA5B,KAAA,CAAM6B,QAAQ,CAAC;aAAMxB,SAAA,CAAUC,SAAA;;IAAlDwB,KAAA,GAAmBH,eAAA;IAAZI,QAAA,GAAYJ,eAAA;EAE1B,IAAMZ,iBAAA,GAAoBf,KAAA,CAAMgC,WAAW,CACzC,UAAAC,KAAA;QAAG3B,SAAA,GAAA2B,KAAA,CAAA3B,SAAA;IACDyB,QAAA,CAAS1B,SAAA,CAAUC,SAAA;IACnBQ,uBAAA,aAAAA,uBAAA,uBAAAA,uBAAA,CAA0BR,SAAA;EAC5B,GACA,CAACQ,uBAAA,EAAyBiB,QAAA,CAAS;EAGrC,oBACE/B,KAAA,CAAAkC,aAAA,CAAC/B,MAAA,EAAAgC,cAAA;IACCxB,SAAA,EAAWA,SAAA;IACXM,cAAA,EAAgBA,cAAA;IAChBE,SAAA,EAAWA,SAAA;IACXJ,iBAAA,EAAmBA,iBAAA;IACnBT,SAAA,EAAWA,SAAA;IACXkB,SAAA,EAAWvB,UAAA,6BAET,oCACAgB,cAAA,KAAmB,MAChBa,KAAA,uEAAmF,GACtFX,SAAA,IACElB,UAAA,mCAEE,2CAEJuB,SAAA;IAEFH,WAAA,EAAaA,WAAA;IACbe,wBAAA;KACIX,SAAA,gBAEJzB,KAAA,CAAAkC,aAAA,CAAChC,gBAAA;IACCmC,MAAA,EAAQzB,YAAA;IACRY,SAAS;IACTF,iBAAA,EAAmBA,iBAAA;IACnBC,sBAAA,EAAwBA;KAEvBV,QAAA,gBACCb,KAAA,CAAAkC,aAAA,CAAC;IAAIV,SAAS;kBACZxB,KAAA,CAAAkC,aAAA,CAAC9B,OAAA;IAAQkC,IAAA,EAAK;QAGhB5B,QAAA;AAKV"},"metadata":{},"sourceType":"module"}