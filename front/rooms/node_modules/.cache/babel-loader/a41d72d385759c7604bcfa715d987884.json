{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { useEventListener } from \"../../hooks/useEventListener\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useDOM } from \"../../lib/dom\";\nimport { coordX, coordY, getSupportedEvents, touchEnabled } from \"../../lib/touch\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\n/**\n * @see https://vkcom.github.io/VKUI/#/Touch\n */\nexport var Touch = function (_param) {\n  var onMove = function onMove(e) {\n    var _gesture_current;\n    var _ref = (_gesture_current = gesture.current) !== null && _gesture_current !== void 0 ? _gesture_current : {},\n      isPressed = _ref.isPressed,\n      isX = _ref.isX,\n      isY = _ref.isY,\n      _ref_startX = _ref.startX,\n      startX = _ref_startX === void 0 ? 0 : _ref_startX,\n      _ref_startY = _ref.startY,\n      startY = _ref_startY === void 0 ? 0 : _ref_startY;\n    if (isPressed) {\n      var _gesture_current1;\n      // смещения\n      var shiftX = coordX(e) - startX;\n      var shiftY = coordY(e) - startY;\n      // абсолютные значения смещений\n      var shiftXAbs = Math.abs(shiftX);\n      var shiftYAbs = Math.abs(shiftY);\n      // Если определяем мультитач, то прерываем жест\n      if (!!e.touches && e.touches.length > 1) {\n        return onEnd(e);\n      }\n      // если мы ещё не определились\n      if (!isX && !isY) {\n        var willBeX = shiftXAbs >= slideThreshold && shiftXAbs > shiftYAbs;\n        var willBeY = shiftYAbs >= slideThreshold && shiftYAbs > shiftXAbs;\n        var willBeSlidedX = willBeX && (!!onMoveX || !!_onMove);\n        var willBeSlidedY = willBeY && (!!onMoveY || !!_onMove);\n        if (gesture.current) {\n          Object.assign(gesture.current, {\n            isY: willBeY,\n            isX: willBeX,\n            isSlideX: willBeSlidedX,\n            isSlideY: willBeSlidedY,\n            isSlide: willBeSlidedX || willBeSlidedY\n          });\n        }\n      }\n      if ((_gesture_current1 = gesture.current) === null || _gesture_current1 === void 0 ? void 0 : _gesture_current1.isSlide) {\n        Object.assign(gesture.current, {\n          shiftX: shiftX,\n          shiftY: shiftY,\n          shiftXAbs: shiftXAbs,\n          shiftYAbs: shiftYAbs\n        });\n        handle(e, [_onMove, gesture.current.isSlideX && onMoveX, gesture.current.isSlideY && onMoveY]);\n      }\n    }\n  };\n  var onEnd = function onEnd(e) {\n    var _gesture_current;\n    var _ref = (_gesture_current = gesture.current) !== null && _gesture_current !== void 0 ? _gesture_current : {},\n      isPressed = _ref.isPressed,\n      isSlide = _ref.isSlide,\n      isSlideX = _ref.isSlideX,\n      isSlideY = _ref.isSlideY;\n    if (isPressed) {\n      handle(e, [_onEnd, isSlideY && onEndY, isSlideX && onEndX]);\n    }\n    var isTouchEnabled = touchEnabled();\n    if (isTouchEnabled && isSlide) {\n      // https://github.com/VKCOM/VKUI/issues/4414\n      // если тач-устройство и был зафиксирован touchmove,\n      // то событие клика не вызывается\n      didSlide.current = false;\n    } else {\n      didSlide.current = Boolean(isSlide);\n    }\n    gesture.current = {};\n    // Если это был тач-евент, симулируем отмену hover\n    if (isTouchEnabled) {\n      onLeave && onLeave(e);\n    }\n    unsubscribe();\n  };\n  var subscribe = function subscribe(el) {\n    if (el) {\n      listeners.forEach(function (l) {\n        return l.add(el);\n      });\n    }\n  };\n  var unsubscribe = function unsubscribe() {\n    listeners.forEach(function (l) {\n      return l.remove();\n    });\n  };\n  var onStart = _param.onStart,\n    onStartX = _param.onStartX,\n    onStartY = _param.onStartY,\n    _onMove = _param.onMove,\n    onMoveX = _param.onMoveX,\n    onMoveY = _param.onMoveY,\n    onLeave = _param.onLeave,\n    onEnter = _param.onEnter,\n    _onEnd = _param.onEnd,\n    onEndX = _param.onEndX,\n    onEndY = _param.onEndY,\n    onClickCapture = _param.onClickCapture,\n    usePointerHover = _param.usePointerHover,\n    _param_slideThreshold = _param.slideThreshold,\n    slideThreshold = _param_slideThreshold === void 0 ? 5 : _param_slideThreshold,\n    _param_useCapture = _param.useCapture,\n    useCapture = _param_useCapture === void 0 ? false : _param_useCapture,\n    _param_Component = _param.Component,\n    Component = _param_Component === void 0 ? \"div\" : _param_Component,\n    getRootRef = _param.getRootRef,\n    _param_noSlideClick = _param.noSlideClick,\n    noSlideClick = _param_noSlideClick === void 0 ? false : _param_noSlideClick,\n    _param_stopPropagation = _param.stopPropagation,\n    stopPropagation = _param_stopPropagation === void 0 ? false : _param_stopPropagation,\n    restProps = _object_without_properties(_param, [\"onStart\", \"onStartX\", \"onStartY\", \"onMove\", \"onMoveX\", \"onMoveY\", \"onLeave\", \"onEnter\", \"onEnd\", \"onEndX\", \"onEndY\", \"onClickCapture\", \"usePointerHover\", \"slideThreshold\", \"useCapture\", \"Component\", \"getRootRef\", \"noSlideClick\", \"stopPropagation\"]);\n  var document = useDOM().document;\n  var events = React.useMemo(getSupportedEvents, []);\n  var didSlide = React.useRef(false);\n  var gesture = React.useRef(null);\n  var handle = function (e, handlers) {\n    stopPropagation && e.stopPropagation();\n    handlers.forEach(function (cb) {\n      var _gesture_current_startT, _gesture_current;\n      var _gesture_current_startT_getTime;\n      var duration = Date.now() - ((_gesture_current_startT_getTime = (_gesture_current = gesture.current) === null || _gesture_current === void 0 ? void 0 : (_gesture_current_startT = _gesture_current.startT) === null || _gesture_current_startT === void 0 ? void 0 : _gesture_current_startT.getTime()) !== null && _gesture_current_startT_getTime !== void 0 ? _gesture_current_startT_getTime : 0);\n      cb && cb(_object_spread_props(_object_spread({}, gesture.current), {\n        duration: duration,\n        originalEvent: e\n      }));\n    });\n  };\n  var enterHandler = useEventListener(usePointerHover ? \"pointerenter\" : \"mouseenter\", onEnter);\n  var leaveHandler = useEventListener(usePointerHover ? \"pointerleave\" : \"mouseleave\", onLeave);\n  var startHandler = useEventListener(events[0], function (e) {\n    gesture.current = initGesture(coordX(e), coordY(e));\n    handle(e, [onStart, onStartX, onStartY]);\n    // 1 line, 2 bad specs, 2 workarounds:\n    subscribe(touchEnabled() ?\n    // see: #235, #1968, https://stackoverflow.com/a/45760014\n    e.target :\n    // if pointer goes outside container.\n    // Can be fixed by PointerEvents' setPointerCapture later\n    document);\n  }, {\n    capture: useCapture,\n    passive: false\n  });\n  var containerRef = useExternRef(getRootRef);\n  useIsomorphicLayoutEffect(function () {\n    var el = containerRef.current;\n    if (el) {\n      enterHandler.add(el);\n      leaveHandler.add(el);\n      startHandler.add(el);\n    }\n  }, [Component]);\n  var listenerParams = {\n    capture: useCapture,\n    passive: false\n  };\n  var listeners = [useEventListener(events[1], onMove, listenerParams), useEventListener(events[2], onEnd, listenerParams), useEventListener(events[3], onEnd, listenerParams)];\n  /**\n  * Обработчик событий dragstart\n  * Отменяет нативное браузерное поведение для вложенных ссылок и изображений\n  */\n  var onDragStart = function (e) {\n    var target = e.target;\n    if (target.tagName === \"A\" || target.tagName === \"IMG\") {\n      e.preventDefault();\n    }\n  };\n  /**\n  * Обработчик клика по компоненту\n  * Отменяет переход по вложенной ссылке, если был зафиксирован свайп\n  */\n  var postGestureClick = function (e) {\n    if (!didSlide.current) {\n      return onClickCapture && onClickCapture(e);\n    }\n    if (noSlideClick) {\n      e.stopPropagation();\n      // https://github.com/VKCOM/VKUI/issues/1977\n      // https://github.com/VKCOM/VKUI/issues/3892\n      e.preventDefault();\n    } else {\n      onClickCapture && onClickCapture(e);\n    }\n    didSlide.current = false;\n  };\n  return /*#__PURE__*/React.createElement(Component, _object_spread_props(_object_spread({}, restProps), {\n    onDragStart: onDragStart,\n    onClickCapture: postGestureClick,\n    ref: containerRef\n  }));\n};\nfunction initGesture(startX, startY) {\n  return {\n    startX: startX,\n    startY: startY,\n    startT: new Date(),\n    duration: 0,\n    isPressed: true,\n    isY: false,\n    isX: false,\n    isSlideX: false,\n    isSlideY: false,\n    isSlide: false,\n    shiftX: 0,\n    shiftY: 0,\n    shiftXAbs: 0,\n    shiftYAbs: 0\n  };\n}","map":{"version":3,"names":["React","useEventListener","useExternRef","useDOM","coordX","coordY","getSupportedEvents","touchEnabled","useIsomorphicLayoutEffect","Touch","_param","onMove","e","_gesture_current","_ref","gesture","current","isPressed","isX","isY","_ref_startX","startX","_ref_startY","startY","_gesture_current1","shiftX","shiftY","shiftXAbs","Math","abs","shiftYAbs","touches","length","onEnd","willBeX","slideThreshold","willBeY","willBeSlidedX","onMoveX","_onMove","willBeSlidedY","onMoveY","Object","assign","isSlideX","isSlideY","isSlide","handle","_onEnd","onEndY","onEndX","isTouchEnabled","didSlide","Boolean","onLeave","unsubscribe","subscribe","el","listeners","forEach","l","add","remove","onStart","onStartX","onStartY","onEnter","onClickCapture","usePointerHover","_param_slideThreshold","_param_useCapture","useCapture","_param_Component","Component","getRootRef","_param_noSlideClick","noSlideClick","_param_stopPropagation","stopPropagation","restProps","_object_without_properties","document","events","useMemo","useRef","handlers","cb","_gesture_current_startT","_gesture_current_startT_getTime","duration","Date","now","startT","getTime","_object_spread_props","_object_spread","originalEvent","enterHandler","leaveHandler","startHandler","initGesture","target","capture","passive","containerRef","listenerParams","onDragStart","tagName","preventDefault","postGestureClick","createElement","ref"],"sources":["../../../src/components/Touch/Touch.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useDOM } from '../../lib/dom';\nimport { coordX, coordY, getSupportedEvents, touchEnabled, VKUITouchEvent } from '../../lib/touch';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { HasComponent, HasRootRef } from '../../types';\n\nexport interface TouchProps\n  extends React.AllHTMLAttributes<HTMLElement>,\n    HasRootRef<HTMLElement>,\n    HasComponent {\n  /**\n   * Привязать onEnter и onLeave через pointer-events - работает на disabled-инпутах\n   */\n  usePointerHover?: boolean;\n  useCapture?: boolean;\n  slideThreshold?: number;\n  noSlideClick?: boolean;\n  onEnter?: HoverHandler;\n  onLeave?: HoverHandler;\n  onStart?: TouchEventHandler;\n  onStartX?: TouchEventHandler;\n  onStartY?: TouchEventHandler;\n  onMove?: TouchEventHandler;\n  onMoveX?: TouchEventHandler;\n  onMoveY?: TouchEventHandler;\n  onEnd?: TouchEventHandler;\n  onEndX?: TouchEventHandler;\n  onEndY?: TouchEventHandler;\n  stopPropagation?: boolean;\n}\n\nexport interface Gesture {\n  startX: number;\n  startY: number;\n  startT: Date;\n  duration: number;\n  isPressed: boolean;\n  isY: boolean;\n  isX: boolean;\n  isSlideX: boolean;\n  isSlideY: boolean;\n  isSlide: boolean;\n  shiftX: number;\n  shiftY: number;\n  shiftXAbs: number;\n  shiftYAbs: number;\n}\n\nexport interface TouchEvent extends Gesture {\n  originalEvent: VKUITouchEvent;\n}\n\ntype HoverHandler = (outputEvent: MouseEvent) => void;\nexport type TouchEventHandler = (e: TouchEvent) => void;\nexport type ClickHandler = (e: React.MouseEvent<HTMLElement>) => void;\nexport type DragHandler = (e: React.DragEvent<HTMLElement>) => void;\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Touch\n */\nexport const Touch = ({\n  onStart,\n  onStartX,\n  onStartY,\n  onMove: _onMove,\n  onMoveX,\n  onMoveY,\n  onLeave,\n  onEnter,\n  onEnd: _onEnd,\n  onEndX,\n  onEndY,\n  onClickCapture,\n  usePointerHover,\n  slideThreshold = 5,\n  useCapture = false,\n  Component = 'div',\n  getRootRef,\n  noSlideClick = false,\n  stopPropagation = false,\n  ...restProps\n}: TouchProps) => {\n  const { document } = useDOM();\n  const events = React.useMemo(getSupportedEvents, []);\n  const didSlide = React.useRef(false);\n  const gesture = React.useRef<Partial<Gesture> | null>(null);\n  const handle = (e: VKUITouchEvent, handlers: Array<TouchEventHandler | undefined | false>) => {\n    stopPropagation && e.stopPropagation();\n    handlers.forEach((cb) => {\n      const duration = Date.now() - (gesture.current?.startT?.getTime() ?? 0);\n      cb && cb({ ...(gesture.current as Gesture), duration, originalEvent: e });\n    });\n  };\n\n  const enterHandler = useEventListener(usePointerHover ? 'pointerenter' : 'mouseenter', onEnter);\n  const leaveHandler = useEventListener(usePointerHover ? 'pointerleave' : 'mouseleave', onLeave);\n  const startHandler = useEventListener(\n    events[0],\n    (e: VKUITouchEvent) => {\n      gesture.current = initGesture(coordX(e), coordY(e));\n\n      handle(e, [onStart, onStartX, onStartY]);\n      // 1 line, 2 bad specs, 2 workarounds:\n      subscribe(\n        touchEnabled()\n          ? // Touch events fire on initial target, and won't bubble if its removed\n            // see: #235, #1968, https://stackoverflow.com/a/45760014\n            (e.target as HTMLElement)\n          : // Mouse events fire on the element under pointer, so we lose move / end\n            // if pointer goes outside container.\n            // Can be fixed by PointerEvents' setPointerCapture later\n            document,\n      );\n    },\n    { capture: useCapture, passive: false },\n  );\n  const containerRef = useExternRef(getRootRef);\n\n  useIsomorphicLayoutEffect(() => {\n    const el = containerRef.current;\n    if (el) {\n      enterHandler.add(el);\n      leaveHandler.add(el);\n      startHandler.add(el);\n    }\n  }, [Component]);\n\n  function onMove(e: VKUITouchEvent) {\n    const { isPressed, isX, isY, startX = 0, startY = 0 } = gesture.current ?? {};\n\n    if (isPressed) {\n      // смещения\n      const shiftX = coordX(e) - startX;\n      const shiftY = coordY(e) - startY;\n\n      // абсолютные значения смещений\n      const shiftXAbs = Math.abs(shiftX);\n      const shiftYAbs = Math.abs(shiftY);\n\n      // Если определяем мультитач, то прерываем жест\n      if (!!e.touches && e.touches.length > 1) {\n        return onEnd(e);\n      }\n\n      // если мы ещё не определились\n      if (!isX && !isY) {\n        const willBeX = shiftXAbs >= slideThreshold && shiftXAbs > shiftYAbs;\n        const willBeY = shiftYAbs >= slideThreshold && shiftYAbs > shiftXAbs;\n        const willBeSlidedX = willBeX && (!!onMoveX || !!_onMove);\n        const willBeSlidedY = willBeY && (!!onMoveY || !!_onMove);\n\n        if (gesture.current) {\n          Object.assign(gesture.current, {\n            isY: willBeY,\n            isX: willBeX,\n            isSlideX: willBeSlidedX,\n            isSlideY: willBeSlidedY,\n            isSlide: willBeSlidedX || willBeSlidedY,\n          });\n        }\n      }\n\n      if (gesture.current?.isSlide) {\n        Object.assign(gesture.current, {\n          shiftX,\n          shiftY,\n          shiftXAbs,\n          shiftYAbs,\n        });\n\n        handle(e, [\n          _onMove,\n          gesture.current.isSlideX && onMoveX,\n          gesture.current.isSlideY && onMoveY,\n        ]);\n      }\n    }\n  }\n\n  function onEnd(e: VKUITouchEvent) {\n    const { isPressed, isSlide, isSlideX, isSlideY } = gesture.current ?? {};\n\n    if (isPressed) {\n      handle(e, [_onEnd, isSlideY && onEndY, isSlideX && onEndX]);\n    }\n\n    const isTouchEnabled = touchEnabled();\n\n    if (isTouchEnabled && isSlide) {\n      // https://github.com/VKCOM/VKUI/issues/4414\n      // если тач-устройство и был зафиксирован touchmove,\n      // то событие клика не вызывается\n      didSlide.current = false;\n    } else {\n      didSlide.current = Boolean(isSlide);\n    }\n    gesture.current = {};\n\n    // Если это был тач-евент, симулируем отмену hover\n    if (isTouchEnabled) {\n      onLeave && onLeave(e);\n    }\n    unsubscribe();\n  }\n\n  const listenerParams = { capture: useCapture, passive: false };\n  const listeners = [\n    useEventListener(events[1], onMove, listenerParams),\n    useEventListener(events[2], onEnd, listenerParams),\n    useEventListener(events[3], onEnd, listenerParams),\n  ];\n  function subscribe(el: HTMLElement | Document | null | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  /**\n   * Обработчик событий dragstart\n   * Отменяет нативное браузерное поведение для вложенных ссылок и изображений\n   */\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const target = e.target as HTMLElement;\n    if (target.tagName === 'A' || target.tagName === 'IMG') {\n      e.preventDefault();\n    }\n  };\n\n  /**\n   * Обработчик клика по компоненту\n   * Отменяет переход по вложенной ссылке, если был зафиксирован свайп\n   */\n  const postGestureClick: typeof onClickCapture = (e) => {\n    if (!didSlide.current) {\n      return onClickCapture && onClickCapture(e);\n    }\n\n    if (noSlideClick) {\n      e.stopPropagation();\n\n      // https://github.com/VKCOM/VKUI/issues/1977\n      // https://github.com/VKCOM/VKUI/issues/3892\n      e.preventDefault();\n    } else {\n      onClickCapture && onClickCapture(e);\n    }\n\n    didSlide.current = false;\n  };\n\n  return (\n    <Component\n      {...restProps}\n      onDragStart={onDragStart}\n      onClickCapture={postGestureClick}\n      ref={containerRef}\n    />\n  );\n};\n\nfunction initGesture(startX: number, startY: number): Gesture {\n  return {\n    startX,\n    startY,\n    startT: new Date(),\n    duration: 0,\n    isPressed: true,\n    isY: false,\n    isX: false,\n    isSlideX: false,\n    isSlideY: false,\n    isSlide: false,\n    shiftX: 0,\n    shiftY: 0,\n    shiftXAbs: 0,\n    shiftYAbs: 0,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}