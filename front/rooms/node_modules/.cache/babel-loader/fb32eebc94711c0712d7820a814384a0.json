{"ast":null,"code":"var _jsxFileName = \"/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/ChannelView.jsx\",\n    _s = $RefreshSig$();\n\nimport { Icon16DeleteOutline, Icon16PenOutline, Icon24RefreshOutline, Icon28CheckCircleOutline, Icon28VolumeOutline } from \"@vkontakte/icons\";\nimport { Div, Group, IconButton, SimpleCell, Snackbar, Tooltip } from \"@vkontakte/vkui\";\nimport { joinCall } from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { AlertManagerContext, TipAlert } from \"../../contexts/AlertProvider\";\nimport useChannelTip from './hooks/ChannelTip'; // Предполагается, что этот хук будет создан\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChannelView(_ref) {\n  _s();\n\n  let {\n    channel,\n    channelIndex,\n    editModeActive,\n    renameToChannel,\n    deleteToChannel,\n    userIsAdmin\n  } = _ref;\n  const alerts = useContext(AlertManagerContext);\n  const {\n    isTipShown,\n    setTipShown\n  } = useChannelTip(channelIndex);\n  const [text, setText] = useState('');\n  const [snackbar, setSnackbar] = useState(null);\n\n  const openSuccess = () => {\n    if (snackbar) return;\n    setSnackbar( /*#__PURE__*/_jsxDEV(Snackbar, {\n      onClose: () => setSnackbar(null),\n      before: /*#__PURE__*/_jsxDEV(Icon28CheckCircleOutline, {\n        fill: \"var(--vkui--color_icon_positive)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }, this),\n      children: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this));\n  };\n\n  const joinChannel = () => {\n    const isFirstCall = localStorage.getItem(\"isFirstCall\");\n\n    if (!userIsAdmin || isFirstCall !== null) {\n      joinCall(channel.joinlink, () => {});\n      return;\n    }\n\n    localStorage.setItem(\"isFirstCall\", \"false\");\n    alerts.showAlert(TipAlert({\n      message: Locales.Hints.DontKillCall,\n      alertManager: alerts,\n      onClose: joinChannel\n    }));\n  };\n\n  const handleIconButtonClick = action => e => {\n    e.preventDefault();\n    e.stopPropagation();\n    action();\n  };\n\n  return /*#__PURE__*/_jsxDEV(SimpleCell, {\n    before: /*#__PURE__*/_jsxDEV(Icon28VolumeOutline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }, this),\n    after: userIsAdmin && /*#__PURE__*/_jsxDEV(Tooltip, {\n      isShown: isTipShown,\n      text: Locales.Hints.RefreshChannel,\n      onClick: handleIconButtonClick,\n      onClose: () => setTipShown(false),\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleIconButtonClick(() => {\n          openSuccess;\n        }),\n        children: /*#__PURE__*/_jsxDEV(Icon24RefreshOutline, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this),\n    onClick: joinChannel,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: [\"#\", channel.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), editModeActive && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleIconButtonClick(() => renameToChannel()),\n          children: /*#__PURE__*/_jsxDEV(Icon16PenOutline, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          style: {\n            color: 'red'\n          },\n          onClick: handleIconButtonClick(() => deleteToChannel(channelIndex)),\n          children: /*#__PURE__*/_jsxDEV(Icon16DeleteOutline, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ChannelView, \"TVIh6quDzSqaTmg7MP/VuDHf4Vs=\", false, function () {\n  return [useChannelTip];\n});\n\n_c = ChannelView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChannelView\");","map":{"version":3,"names":["Icon16DeleteOutline","Icon16PenOutline","Icon24RefreshOutline","Icon28CheckCircleOutline","Icon28VolumeOutline","Div","Group","IconButton","SimpleCell","Snackbar","Tooltip","joinCall","Locales","useContext","useEffect","useState","AlertManagerContext","TipAlert","useChannelTip","ChannelView","channel","channelIndex","editModeActive","renameToChannel","deleteToChannel","userIsAdmin","alerts","isTipShown","setTipShown","text","setText","snackbar","setSnackbar","openSuccess","joinChannel","isFirstCall","localStorage","getItem","joinlink","setItem","showAlert","message","Hints","DontKillCall","alertManager","onClose","handleIconButtonClick","action","e","preventDefault","stopPropagation","RefreshChannel","display","alignItems","name","color"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/ChannelView.jsx"],"sourcesContent":["import {\n  Icon16DeleteOutline,\n  Icon16PenOutline,\n  Icon24RefreshOutline,\n  Icon28CheckCircleOutline,\n  Icon28VolumeOutline,\n} from \"@vkontakte/icons\";\nimport { Div, Group, IconButton, SimpleCell, Snackbar, Tooltip } from \"@vkontakte/vkui\";\nimport { joinCall } from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { AlertManagerContext, TipAlert } from \"../../contexts/AlertProvider\";\nimport useChannelTip from './hooks/ChannelTip'; // Предполагается, что этот хук будет создан\n\nexport default function ChannelView({ channel, channelIndex, editModeActive, renameToChannel, deleteToChannel, userIsAdmin }) {\n  const alerts = useContext(AlertManagerContext);\n  const { isTipShown, setTipShown } = useChannelTip(channelIndex);\n  const [text, setText] = useState('');\n  const [snackbar, setSnackbar] = useState(null);\n\n  \n  const openSuccess = () => {\n    if (snackbar) return;\n    setSnackbar(\n      <Snackbar\n        onClose={() => setSnackbar(null)}\n        before={<Icon28CheckCircleOutline fill=\"var(--vkui--color_icon_positive)\" />}\n      >\n        Ссылка успешно обновлена\n      </Snackbar>,\n    );\n  };\n\n  const joinChannel = () => {\n    const isFirstCall = localStorage.getItem(\"isFirstCall\");\n    if (!userIsAdmin || isFirstCall !== null) {\n      joinCall(channel.joinlink, () => {});\n      return;\n    }\n\n    localStorage.setItem(\"isFirstCall\", \"false\");\n    alerts.showAlert(TipAlert({ message: Locales.Hints.DontKillCall, alertManager: alerts, onClose: joinChannel }));\n  };\n\n  const handleIconButtonClick = (action) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    action();\n  };\n\n  return (\n    <SimpleCell\n      before={<Icon28VolumeOutline />}\n      after={userIsAdmin && (\n        <Tooltip\n          isShown={isTipShown}\n          text={Locales.Hints.RefreshChannel}\n          onClick={handleIconButtonClick}\n          onClose={() => setTipShown(false)}\n        >\n          <IconButton onClick={handleIconButtonClick(() => {openSuccess})}>\n            <Icon24RefreshOutline />\n          </IconButton>\n        </Tooltip>\n      )}\n      onClick={joinChannel}\n    >\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <b>#{channel.name}</b>\n        {editModeActive && (\n          <>\n            <IconButton onClick={handleIconButtonClick(() => renameToChannel())}>\n              <Icon16PenOutline />\n            </IconButton>\n            <IconButton\n              style={{ color: 'red' }}\n              onClick={handleIconButtonClick(() => deleteToChannel(channelIndex))}\n            >\n              <Icon16DeleteOutline />\n            </IconButton>\n          </>\n        )}\n      </div>\n    </SimpleCell>\n    \n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}