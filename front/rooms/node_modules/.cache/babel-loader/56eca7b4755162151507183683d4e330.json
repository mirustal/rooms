{"ast":null,"code":"var _jsxFileName = \"/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/AlterActionSheet.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { Icon16MoreVertical, Icon20DeleteOutline, Icon20ShareOutline, Icon20WriteOutline, Icon28DeleteOutline, Icon28DoorArrowRightOutline, Icon28EditOutline, Icon28ShareOutline } from \"@vkontakte/icons\";\nimport { ActionSheet, ActionSheetItem } from \"@vkontakte/vkui\";\nimport { copyToClipboard, createInviteURL, getFromStorage, perfomAppText, pushToStorage, removeFromStorage, shareInviteLink } from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { VkStorageKeys } from \"../../../bridge/storageKeys\";\nimport { deleteRoom } from \"../../../serverApi/serverApi\";\nimport { AlertManagerContext, DeleteErrorAlert } from \"../../contexts/AlertProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AlterActionSheet(_ref) {\n  _s();\n\n  let {\n    roomInfo,\n    returnBack,\n    handleActiveEditMode,\n    userIsAdmin\n  } = _ref;\n  const [actionSheetVisible, setActionSheetVisible] = useState(false);\n  const alertManager = useContext(AlertManagerContext);\n  const nameTargetRef = useRef();\n\n  const handleExitRoom = async () => {\n    const idFromStorage = await getFromStorage(VkStorageKeys.JoinedRooms);\n    const updatedString = idFromStorage.replace(new RegExp(\",\" + roomInfo.id, 'g'), \"\");\n    pushToStorage(VkStorageKeys.JoinedRooms, updatedString);\n    returnBack();\n  };\n\n  const handleShareRoom = async () => {\n    await shareInviteLink(roomInfo.id);\n  };\n\n  const renderActionSheetItem = (onClick, icon, text, mode) => /*#__PURE__*/_jsxDEV(ActionSheetItem, {\n    onClick: onClick,\n    autoClose: true,\n    before: icon,\n    mode: mode,\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n\n  const actionSheetItems = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [renderActionSheetItem(handleShareRoom, /*#__PURE__*/_jsxDEV(Icon28ShareOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 49\n      }, this), Locales.ActionSheetName.ShareRoom), userIsAdmin && renderActionSheetItem(handleActiveEditMode, /*#__PURE__*/_jsxDEV(Icon28EditOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 69\n      }, this), Locales.ActionSheetName.EditRoom), userIsAdmin ? renderActionSheetItem(handleDeleteRoom, /*#__PURE__*/_jsxDEV(Icon28DeleteOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 64\n      }, this), Locales.ActionSheetName.DeleteRoom, \"destructive\") : renderActionSheetItem(handleExitRoom, /*#__PURE__*/_jsxDEV(Icon28DoorArrowRightOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 49\n      }, this), Locales.ActionSheetName.ExitRoom)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: nameTargetRef,\n      onClick: () => setActionSheetVisible(true),\n      style: {\n        marginRight: '10px'\n      },\n      children: roomInfo.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), actionSheetVisible && /*#__PURE__*/_jsxDEV(ActionSheet, {\n      onClose: () => setActionSheetVisible(false),\n      placement: \"center\",\n      toggleRef: nameTargetRef,\n      children: actionSheetItems()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AlterActionSheet, \"AJ9yNYNVsYgi9RrOEmuJVP3HuG0=\");\n\n_c = AlterActionSheet;\nexport default AlterActionSheet;\n\nvar _c;\n\n$RefreshReg$(_c, \"AlterActionSheet\");","map":{"version":3,"names":["React","useContext","useState","Icon16MoreVertical","Icon20DeleteOutline","Icon20ShareOutline","Icon20WriteOutline","Icon28DeleteOutline","Icon28DoorArrowRightOutline","Icon28EditOutline","Icon28ShareOutline","ActionSheet","ActionSheetItem","copyToClipboard","createInviteURL","getFromStorage","perfomAppText","pushToStorage","removeFromStorage","shareInviteLink","Locales","VkStorageKeys","deleteRoom","AlertManagerContext","DeleteErrorAlert","AlterActionSheet","roomInfo","returnBack","handleActiveEditMode","userIsAdmin","actionSheetVisible","setActionSheetVisible","alertManager","nameTargetRef","useRef","handleExitRoom","idFromStorage","JoinedRooms","updatedString","replace","RegExp","id","handleShareRoom","renderActionSheetItem","onClick","icon","text","mode","actionSheetItems","ActionSheetName","ShareRoom","EditRoom","handleDeleteRoom","DeleteRoom","ExitRoom","marginRight","name"],"sources":["/Users/mirustal/Documents/project/rooms/front/rooms/src/components/views/Channels/AlterActionSheet.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport {\n  Icon16MoreVertical,\n  Icon20DeleteOutline,\n  Icon20ShareOutline,\n  Icon20WriteOutline,\n  Icon28DeleteOutline,\n  Icon28DoorArrowRightOutline,\n  Icon28EditOutline,\n  Icon28ShareOutline,\n} from \"@vkontakte/icons\";\n\nimport { ActionSheet, ActionSheetItem } from \"@vkontakte/vkui\";\nimport {\n  copyToClipboard,\n  createInviteURL,\n  getFromStorage,\n  perfomAppText,\n  pushToStorage,\n  removeFromStorage,\n  shareInviteLink,\n} from \"../../../bridge/bridgeLib\";\nimport { Locales } from \"../../../locales/locales\";\nimport { VkStorageKeys } from \"../../../bridge/storageKeys\";\nimport { deleteRoom } from \"../../../serverApi/serverApi\";\nimport {\n  AlertManagerContext,\n  DeleteErrorAlert,\n} from \"../../contexts/AlertProvider\";\nfunction AlterActionSheet({ roomInfo, returnBack, handleActiveEditMode, userIsAdmin }) {\n  const [actionSheetVisible, setActionSheetVisible] = useState(false);\n  const alertManager = useContext(AlertManagerContext);\n  const nameTargetRef = useRef();\n\n  const handleExitRoom = async () => {\n    const idFromStorage = await getFromStorage(VkStorageKeys.JoinedRooms);\n    const updatedString = idFromStorage.replace(new RegExp(\",\" + roomInfo.id, 'g'), \"\");\n    pushToStorage(VkStorageKeys.JoinedRooms, updatedString);\n    returnBack();\n  };\n\n  const handleShareRoom = async () => {\n    await shareInviteLink(roomInfo.id);\n  };\n\n \n\n  const renderActionSheetItem = (onClick, icon, text, mode) => (\n    <ActionSheetItem onClick={onClick} autoClose before={icon} mode={mode}>\n      {text}\n    </ActionSheetItem>\n  );\n\n  const actionSheetItems = () => {\n    return (\n      <>\n        {renderActionSheetItem(handleShareRoom, <Icon28ShareOutline />, Locales.ActionSheetName.ShareRoom)}\n        {userIsAdmin && renderActionSheetItem(handleActiveEditMode, <Icon28EditOutline />, Locales.ActionSheetName.EditRoom)}\n        {userIsAdmin ? renderActionSheetItem(handleDeleteRoom, <Icon28DeleteOutline />, Locales.ActionSheetName.DeleteRoom, \"destructive\") :\n          renderActionSheetItem(handleExitRoom, <Icon28DoorArrowRightOutline />, Locales.ActionSheetName.ExitRoom)}\n      </>\n    );\n  };\n\n  return (\n    <>\n      <div ref={nameTargetRef} onClick={() => setActionSheetVisible(true)} style={{ marginRight: '10px' }}> \n        {roomInfo.name}\n      </div>\n\n      {actionSheetVisible && (\n        <ActionSheet onClose={() => setActionSheetVisible(false)} placement=\"center\" toggleRef={nameTargetRef}>\n          {actionSheetItems()}\n        </ActionSheet>\n      )}\n    </>\n  );\n}\n\nexport default AlterActionSheet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}