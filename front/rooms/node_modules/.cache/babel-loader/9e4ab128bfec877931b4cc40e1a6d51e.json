{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries\";\nimport { useId } from \"../../hooks/useId\";\nimport { useOrientationChange } from \"../../hooks/useOrientationChange\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { SizeType } from \"../../lib/adaptivity\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { Platform } from \"../../lib/platform\";\nimport { multiRef } from \"../../lib/utils\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton\";\nimport { ModalRootContext, useModalRegistry } from \"../ModalRoot/ModalRootContext\";\nimport { ModalType } from \"../ModalRoot/types\";\nimport { RootComponent } from \"../RootComponent/RootComponent\";\nimport { ModalPageContext } from \"./ModalPageContext\";\nvar sizeClassName = {\n  s: \"vkuiModalPage--size-s\",\n  m: \"vkuiModalPage--size-m\",\n  l: \"vkuiModalPage--size-l\"\n};\nvar warn = warnOnce(\"ModalPage\");\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport var ModalPage = function (_param) {\n  var children = _param.children,\n    header = _param.header,\n    tmp = _param.size,\n    sizeProp = tmp === void 0 ? \"s\" : tmp,\n    onOpen = _param.onOpen,\n    onOpened = _param.onOpened,\n    onClose = _param.onClose,\n    onClosed = _param.onClosed,\n    settlingHeight = _param.settlingHeight,\n    dynamicContentHeight = _param.dynamicContentHeight,\n    getModalContentRef = _param.getModalContentRef,\n    nav = _param.nav,\n    idProp = _param.id,\n    _param_hideCloseButton = _param.hideCloseButton,\n    hideCloseButton = _param_hideCloseButton === void 0 ? false : _param_hideCloseButton,\n    height = _param.height,\n    modalContentTestId = _param.modalContentTestId,\n    restProps = _object_without_properties(_param, [\"children\", \"header\", \"size\", \"onOpen\", \"onOpened\", \"onClose\", \"onClosed\", \"settlingHeight\", \"dynamicContentHeight\", \"getModalContentRef\", \"nav\", \"id\", \"hideCloseButton\", \"height\", \"modalContentTestId\"]);\n  var generatingId = useId();\n  var id = idProp || generatingId;\n  var updateModalHeight = React.useContext(ModalRootContext).updateModalHeight;\n  var platform = usePlatform();\n  var orientation = useOrientationChange();\n  var _useAdaptivityWithJSMediaQueries = useAdaptivityWithJSMediaQueries(),\n    sizeX = _useAdaptivityWithJSMediaQueries.sizeX,\n    isDesktop = _useAdaptivityWithJSMediaQueries.isDesktop;\n  React.useEffect(function () {\n    if (dynamicContentHeight) {\n      updateModalHeight();\n    }\n  }, [children, dynamicContentHeight, orientation, updateModalHeight]);\n  var isCloseButtonShown = !hideCloseButton && isDesktop;\n  var size = isDesktop ? sizeProp : \"s\";\n  var modalContext = React.useContext(ModalRootContext);\n  var refs = useModalRegistry(getNavId({\n    nav: nav,\n    id: id\n  }, warn), ModalType.PAGE).refs;\n  var contextValue = React.useMemo(function () {\n    return {\n      labelId: \"\".concat(id, \"-label\")\n    };\n  }, [id]);\n  return /*#__PURE__*/React.createElement(ModalPageContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(RootComponent, _object_spread_props(_object_spread({}, restProps), {\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    \"aria-labelledby\": contextValue.labelId,\n    id: id,\n    baseClassName: classNames(\"vkuiModalPage\", platform === Platform.IOS && \"vkuiModalPage--ios\", isDesktop && \"vkuiModalPage--desktop\", sizeX === SizeType.REGULAR && \"vkuiInternalModalPage--sizeX-regular\", typeof size === \"string\" && sizeClassName[size])\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__in-wrap\",\n    style: {\n      maxWidth: typeof size === \"number\" ? size : undefined,\n      height: height\n    },\n    ref: refs.innerElement\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__in\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__header\",\n    ref: refs.headerElement\n  }, header), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__content-wrap\"\n  }, /*#__PURE__*/React.createElement(\"div\", _object_spread({\n    className: \"vkuiModalPage__content\",\n    ref: multiRef(refs.contentElement, getModalContentRef)\n  }, modalContentTestId && {\n    \"data-testid\": modalContentTestId\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalPage__content-in\"\n  }, children)), /*#__PURE__*/React.createElement(\"div\", {\n    ref: refs.bottomInset,\n    className: \"vkuiModalPage__bottom-inset\"\n  })), isCloseButtonShown && /*#__PURE__*/React.createElement(ModalDismissButton, {\n    onClick: onClose || modalContext.onClose\n  })))));\n};","map":{"version":3,"names":["React","classNames","useAdaptivityWithJSMediaQueries","useId","useOrientationChange","usePlatform","SizeType","getNavId","Platform","multiRef","warnOnce","ModalDismissButton","ModalRootContext","useModalRegistry","ModalType","RootComponent","ModalPageContext","sizeClassName","s","m","l","warn","ModalPage","_param","children","header","tmp","size","sizeProp","onOpen","onOpened","onClose","onClosed","settlingHeight","dynamicContentHeight","getModalContentRef","nav","idProp","id","_param_hideCloseButton","hideCloseButton","height","modalContentTestId","restProps","_object_without_properties","generatingId","updateModalHeight","useContext","platform","orientation","_useAdaptivityWithJSMediaQueries","sizeX","isDesktop","useEffect","isCloseButtonShown","modalContext","refs","PAGE","contextValue","useMemo","labelId","concat","createElement","Provider","value","_object_spread_props","_object_spread","role","baseClassName","IOS","REGULAR","className","style","maxWidth","undefined","ref","innerElement","headerElement","contentElement","bottomInset","onClick"],"sources":["../../../src/components/ModalPage/ModalPage.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useId } from '../../hooks/useId';\nimport { useOrientationChange } from '../../hooks/useOrientationChange';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { Platform } from '../../lib/platform';\nimport { multiRef } from '../../lib/utils';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { ModalRootContext, useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { ModalType } from '../ModalRoot/types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { ModalPageContext } from './ModalPageContext';\nimport styles from './ModalPage.module.css';\n\nconst sizeClassName = {\n  s: styles['ModalPage--size-s'],\n  m: styles['ModalPage--size-m'],\n  l: styles['ModalPage--size-l'],\n};\n\nexport interface ModalPageProps extends HTMLAttributesWithRootRef<HTMLDivElement>, NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: React.ReactNode;\n  /**\n   * Задаёт контенту максимальную ширину для десктопной версии.\n   */\n  size?: 's' | 'm' | 'l' | number;\n  /**\n   * Задаёт модальному окну фиксированную высоту.\n   * Можно передать числовое значение в пикселях, а можно строкой, в том числе и в процентах \"50%\".\n   * В мобильной версии 'settlingHeight' будет считаться относительно заданного height.\n   */\n  height?: string | number;\n  /**\n   * Будет вызвано при начале открытия модалки.\n   */\n  onOpen?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном открытии модалки.\n   */\n  onOpened?: VoidFunction;\n  /**\n   * Будет вызвано при начале закрытия модалки.\n   */\n  onClose?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном закрытии модалки.\n   */\n  onClosed?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: React.Ref<HTMLDivElement>;\n  /**\n   * Скрывает кнопку закрытия (актуально для iOS, т.к. можно отрисовать кнопку закрытия внутри модалки)\n   */\n  hideCloseButton?: boolean;\n  modalContentTestId?: string;\n}\n\nconst warn = warnOnce('ModalPage');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport const ModalPage = ({\n  children,\n  header,\n  size: sizeProp = 's',\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n  settlingHeight, // 75\n  dynamicContentHeight,\n  getModalContentRef,\n  nav,\n  id: idProp,\n  hideCloseButton = false,\n  height,\n  modalContentTestId,\n  ...restProps\n}: ModalPageProps) => {\n  const generatingId = useId();\n  const id = idProp || generatingId;\n\n  const { updateModalHeight } = React.useContext(ModalRootContext);\n\n  const platform = usePlatform();\n  const orientation = useOrientationChange();\n  const { sizeX, isDesktop } = useAdaptivityWithJSMediaQueries();\n\n  React.useEffect(() => {\n    if (dynamicContentHeight) {\n      updateModalHeight();\n    }\n  }, [children, dynamicContentHeight, orientation, updateModalHeight]);\n\n  const isCloseButtonShown = !hideCloseButton && isDesktop;\n  const size = isDesktop ? sizeProp : 's';\n\n  const modalContext = React.useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId({ nav, id }, warn), ModalType.PAGE);\n\n  const contextValue = React.useMemo(() => ({ labelId: `${id}-label` }), [id]);\n\n  return (\n    <ModalPageContext.Provider value={contextValue}>\n      <RootComponent\n        {...restProps}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby={contextValue.labelId}\n        id={id}\n        baseClassName={classNames(\n          styles['ModalPage'],\n          platform === Platform.IOS && styles['ModalPage--ios'],\n          isDesktop && styles['ModalPage--desktop'],\n          sizeX === SizeType.REGULAR && 'vkuiInternalModalPage--sizeX-regular',\n          typeof size === 'string' && sizeClassName[size],\n        )}\n      >\n        <div\n          className={styles['ModalPage__in-wrap']}\n          style={{\n            maxWidth: typeof size === 'number' ? size : undefined,\n            height,\n          }}\n          ref={refs.innerElement}\n        >\n          <div className={styles['ModalPage__in']}>\n            <div className={styles['ModalPage__header']} ref={refs.headerElement}>\n              {header}\n            </div>\n\n            <div className={styles['ModalPage__content-wrap']}>\n              <div\n                className={styles['ModalPage__content']}\n                ref={multiRef<HTMLDivElement>(refs.contentElement, getModalContentRef)}\n                {...(modalContentTestId && { 'data-testid': modalContentTestId })}\n              >\n                <div className={styles['ModalPage__content-in']}>{children}</div>\n              </div>\n              <div ref={refs.bottomInset} className={styles['ModalPage__bottom-inset']} />\n            </div>\n            {isCloseButtonShown && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n          </div>\n        </div>\n      </RootComponent>\n    </ModalPageContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}