{"ast":null,"code":"import { detectIOS, noop } from \"@vkontakte/vkjs\";\nexport var System;\n(function (System) {\n  System[\"IOS\"] = \"ios\";\n  System[\"UNKNOWN\"] = \"\";\n})(System || (System = {}));\nvar memoized = {};\nexport function computeBrowserInfo() {\n  var userAgent = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"\";\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n  var systemVersion = null;\n  var system = \"\";\n  var _detectIOS = detectIOS(userAgent),\n    isIOS = _detectIOS.isIOS,\n    iosMajor = _detectIOS.iosMajor,\n    iosMinor = _detectIOS.iosMinor;\n  if (isIOS) {\n    system = \"ios\";\n    systemVersion = {\n      major: iosMajor,\n      minor: iosMinor\n    };\n  }\n  var browserInfo = {\n    userAgent: userAgent,\n    system: system,\n    systemVersion: systemVersion\n  };\n  memoized[userAgent] = browserInfo;\n  return browserInfo;\n}\n/**\n * Эмуляция функции `window.matchMedia` для SSR.\n *\n * ⚠️ Желательно избегать использование этой эмуляции в SSR.\n */\nexport function mediaQueryNull(query) {\n  return {\n    matches: false,\n    media: query,\n    onchange: noop,\n    addListener: noop,\n    removeListener: noop,\n    addEventListener: noop,\n    removeEventListener: noop,\n    dispatchEvent: function dispatchEvent() {\n      return false;\n    }\n  };\n}","map":{"version":3,"names":["detectIOS","noop","System","memoized","computeBrowserInfo","userAgent","arguments","length","systemVersion","system","_detectIOS","isIOS","iosMajor","iosMinor","major","minor","browserInfo","mediaQueryNull","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent"],"sources":["../../src/lib/browser.ts"],"sourcesContent":["import { detectIOS, noop } from '@vkontakte/vkjs';\nimport type { Version } from '../types';\n\nexport enum System {\n  IOS = 'ios',\n  UNKNOWN = '',\n}\n\nexport interface BrowserInfo {\n  userAgent: string;\n  system: System;\n  systemVersion: Version | null;\n}\n\nconst memoized: { [index: string]: BrowserInfo } = {};\n\nexport function computeBrowserInfo(userAgent = ''): BrowserInfo {\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n\n  let systemVersion: Version | null = null;\n  let system = System.UNKNOWN;\n\n  const { isIOS, iosMajor, iosMinor } = detectIOS(userAgent);\n\n  if (isIOS) {\n    system = System.IOS;\n    systemVersion = {\n      major: iosMajor,\n      minor: iosMinor,\n    };\n  }\n\n  const browserInfo: BrowserInfo = {\n    userAgent,\n    system,\n    systemVersion,\n  };\n\n  memoized[userAgent] = browserInfo;\n\n  return browserInfo;\n}\n\n/**\n * Эмуляция функции `window.matchMedia` для SSR.\n *\n * ⚠️ Желательно избегать использование этой эмуляции в SSR.\n */\nexport function mediaQueryNull(query: string): MediaQueryList {\n  return {\n    matches: false,\n    media: query,\n    onchange: noop,\n    addListener: noop,\n    removeListener: noop,\n    addEventListener: noop,\n    removeEventListener: noop,\n    dispatchEvent() {\n      return false;\n    },\n  };\n}\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,IAAI,QAAQ;;WAGpBC,MAAA;;;GAAAA,MAAA,KAAAA,MAAA;AAWZ,IAAMC,QAAA,GAA6C,CAAC;AAEpD,OAAO,SAASC,mBAAA;MAAmBC,SAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,iBAAAA,SAAA,MAAY;EAC7C,IAAIH,QAAQ,CAACE,SAAA,CAAU,EAAE;IACvB,OAAOF,QAAQ,CAACE,SAAA,CAAU;EAC5B;EAEA,IAAIG,aAAA,GAAgC;EACpC,IAAIC,MAAA;EAEJ,IAAsCC,UAAA,GAAAV,SAAA,CAAUK,SAAA;IAAxCM,KAAA,GAA8BD,UAAA,CAA9BC,KAAA;IAAOC,QAAA,GAAuBF,UAAA,CAAvBE,QAAA;IAAUC,QAAA,GAAaH,UAAA,CAAbG,QAAA;EAEzB,IAAIF,KAAA,EAAO;IACTF,MAAA;IACAD,aAAA,GAAgB;MACdM,KAAA,EAAOF,QAAA;MACPG,KAAA,EAAOF;IACT;EACF;EAEA,IAAMG,WAAA,GAA2B;IAC/BX,SAAA,EAAAA,SAAA;IACAI,MAAA,EAAAA,MAAA;IACAD,aAAA,EAAAA;EACF;EAEAL,QAAQ,CAACE,SAAA,CAAU,GAAGW,WAAA;EAEtB,OAAOA,WAAA;AACT;AAEA;;;;;AAKA,OAAO,SAASC,eAAeC,KAAa;EAC1C,OAAO;IACLC,OAAA,EAAS;IACTC,KAAA,EAAOF,KAAA;IACPG,QAAA,EAAUpB,IAAA;IACVqB,WAAA,EAAarB,IAAA;IACbsB,cAAA,EAAgBtB,IAAA;IAChBuB,gBAAA,EAAkBvB,IAAA;IAClBwB,mBAAA,EAAqBxB,IAAA;IACrByB,aAAA,WAAAA,cAAA;MACE,OAAO;IACT;EACF;AACF"},"metadata":{},"sourceType":"module"}