{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { Icon20Cancel } from \"@vkontakte/icons\";\nimport { classNames, hasReactNode } from \"@vkontakte/vkjs\";\nimport { useAdaptivityWithJSMediaQueries } from \"../../hooks/useAdaptivityWithJSMediaQueries\";\nimport { useId } from \"../../hooks/useId\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { Platform } from \"../../lib/platform\";\nimport { stopPropagation } from \"../../lib/utils\";\nimport { useScrollLock } from \"../AppRoot/ScrollContext\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap\";\nimport { IconButton } from \"../IconButton/IconButton\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton\";\nimport { PopoutWrapper } from \"../PopoutWrapper/PopoutWrapper\";\nimport { AlertActions } from \"./AlertActions\";\nimport { AlertHeader, AlertText } from \"./AlertTypography\";\n/**\n * @see https://vkcom.github.io/VKUI/#/Alert\n */\nexport var Alert = function (_param) {\n  var _param_actions = _param.actions,\n    actions = _param_actions === void 0 ? [] : _param_actions,\n    _param_actionsLayout = _param.actionsLayout,\n    actionsLayout = _param_actionsLayout === void 0 ? \"horizontal\" : _param_actionsLayout,\n    children = _param.children,\n    className = _param.className,\n    style = _param.style,\n    text = _param.text,\n    header = _param.header,\n    onClose = _param.onClose,\n    _param_dismissLabel = _param.dismissLabel,\n    dismissLabel = _param_dismissLabel === void 0 ? \"Закрыть предупреждение\" : _param_dismissLabel,\n    renderAction = _param.renderAction,\n    actionsAlign = _param.actionsAlign,\n    _param_dismissButtonMode = _param.dismissButtonMode,\n    dismissButtonMode = _param_dismissButtonMode === void 0 ? \"outside\" : _param_dismissButtonMode,\n    getRootRef = _param.getRootRef,\n    restProps = _object_without_properties(_param, [\"actions\", \"actionsLayout\", \"children\", \"className\", \"style\", \"text\", \"header\", \"onClose\", \"dismissLabel\", \"renderAction\", \"actionsAlign\", \"dismissButtonMode\", \"getRootRef\"]);\n  var generatedId = useId();\n  var headerId = \"vkui-alert-\".concat(generatedId, \"-header\");\n  var textId = \"vkui-alert-\".concat(generatedId, \"-text\");\n  var platform = usePlatform();\n  var isDesktop = useAdaptivityWithJSMediaQueries().isDesktop;\n  var waitTransitionFinish = useWaitTransitionFinish().waitTransitionFinish;\n  var _React_useState = _sliced_to_array(React.useState(false), 2),\n    closing = _React_useState[0],\n    setClosing = _React_useState[1];\n  var isDismissButtonVisible = isDesktop && platform !== Platform.IOS;\n  var elementRef = React.useRef(null);\n  var timeout = platform === Platform.IOS ? 300 : 200;\n  var close = React.useCallback(function () {\n    setClosing(true);\n    waitTransitionFinish(elementRef.current, function (e) {\n      if (!e || e.propertyName === \"opacity\") {\n        onClose();\n      }\n    }, timeout);\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n  var onItemClick = React.useCallback(function (item) {\n    var action = item.action,\n      autoClose = item.autoClose;\n    if (autoClose) {\n      setClosing(true);\n      waitTransitionFinish(elementRef.current, function (e) {\n        if (!e || e.propertyName === \"opacity\") {\n          onClose();\n          action && action();\n        }\n      }, timeout);\n    } else {\n      action && action();\n    }\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n  useScrollLock();\n  return /*#__PURE__*/React.createElement(PopoutWrapper, {\n    className: className,\n    closing: closing,\n    style: style,\n    onClick: close,\n    getRootRef: getRootRef\n  }, /*#__PURE__*/React.createElement(FocusTrap, _object_spread_props(_object_spread({}, restProps), {\n    getRootRef: elementRef,\n    onClick: stopPropagation,\n    onClose: close,\n    timeout: timeout,\n    className: classNames(\"vkuiAlert\", platform === Platform.IOS && \"vkuiAlert--ios\", platform === Platform.VKCOM && \"vkuiAlert--vkcom\", closing && \"vkuiAlert--closing\", isDesktop && \"vkuiAlert--desktop\"),\n    role: \"alertdialog\",\n    \"aria-modal\": true,\n    \"aria-labelledby\": headerId,\n    \"aria-describedby\": textId\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiAlert__content\", dismissButtonMode === \"inside\" && \"vkuiAlert__content--withButton\")\n  }, hasReactNode(header) && /*#__PURE__*/React.createElement(AlertHeader, {\n    id: headerId\n  }, header), hasReactNode(text) && /*#__PURE__*/React.createElement(AlertText, {\n    id: textId\n  }, text), children, isDismissButtonVisible && dismissButtonMode === \"inside\" && /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": dismissLabel,\n    className: classNames(\"vkuiAlert__dismiss\", \"vkuiInternalAlert__dismiss\"),\n    onClick: close,\n    hoverMode: \"opacity\",\n    activeMode: \"opacity\"\n  }, /*#__PURE__*/React.createElement(Icon20Cancel, null))), /*#__PURE__*/React.createElement(AlertActions, {\n    actions: actions,\n    actionsAlign: actionsAlign,\n    actionsLayout: actionsLayout,\n    renderAction: renderAction,\n    onItemClick: onItemClick\n  }), isDismissButtonVisible && dismissButtonMode === \"outside\" && /*#__PURE__*/React.createElement(ModalDismissButton, {\n    onClick: close,\n    \"aria-label\": dismissLabel\n  })));\n};","map":{"version":3,"names":["React","Icon20Cancel","classNames","hasReactNode","useAdaptivityWithJSMediaQueries","useId","usePlatform","useWaitTransitionFinish","Platform","stopPropagation","useScrollLock","FocusTrap","IconButton","ModalDismissButton","PopoutWrapper","AlertActions","AlertHeader","AlertText","Alert","_param","actions","_param_actions","_param_actionsLayout","actionsLayout","children","className","style","text","header","onClose","_param_dismissLabel","dismissLabel","renderAction","actionsAlign","_param_dismissButtonMode","dismissButtonMode","getRootRef","restProps","_object_without_properties","generatedId","headerId","concat","textId","platform","isDesktop","waitTransitionFinish","_React_useState","_sliced_to_array","useState","closing","setClosing","isDismissButtonVisible","IOS","elementRef","useRef","timeout","close","useCallback","current","e","propertyName","onItemClick","item","action","autoClose","createElement","onClick","_object_spread_props","_object_spread","VKCOM","role","id","hoverMode","activeMode"],"sources":["../../../src/components/Alert/Alert.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon20Cancel } from '@vkontakte/icons';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useId } from '../../hooks/useId';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { Platform } from '../../lib/platform';\nimport { stopPropagation } from '../../lib/utils';\nimport { AlignType, AnchorHTMLAttributesOnly, HasDataAttribute, HasRootRef } from '../../types';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { ButtonProps } from '../Button/Button';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { IconButton } from '../IconButton/IconButton';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { AlertActionProps } from './AlertAction';\nimport { AlertActions } from './AlertActions';\nimport { AlertHeader, AlertText } from './AlertTypography';\nimport styles from './Alert.module.css';\n\ntype AlertActionMode = 'cancel' | 'destructive' | 'default';\n\nexport interface AlertActionInterface\n  extends Pick<ButtonProps, 'Component'>,\n    AnchorHTMLAttributesOnly,\n    HasDataAttribute {\n  title: string;\n  action?: VoidFunction;\n  autoClose?: boolean;\n  mode: AlertActionMode;\n}\n\nexport interface AlertProps extends React.HTMLAttributes<HTMLElement>, HasRootRef<HTMLDivElement> {\n  actionsLayout?: 'vertical' | 'horizontal';\n  actionsAlign?: AlignType;\n  actions?: AlertActionInterface[];\n  renderAction?: (props: AlertActionProps) => React.ReactNode;\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  onClose: VoidFunction;\n\n  /**\n   * `aria-label` для кнопки закрытия. Необходим, чтобы кнопка была доступной.\n   */\n  dismissLabel?: string;\n  /**\n   * Расположение кнопки закрытия (внутри и вне `popout'a`)\n   * Доступно только в `compact`-режиме, не отображается на `iOS`\n   */\n  dismissButtonMode?: 'inside' | 'outside';\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Alert\n */\nexport const Alert = ({\n  actions = [],\n  actionsLayout = 'horizontal',\n  children,\n  className,\n  style,\n  text,\n  header,\n  onClose,\n  dismissLabel = 'Закрыть предупреждение',\n  renderAction,\n  actionsAlign,\n  dismissButtonMode = 'outside',\n  getRootRef,\n  ...restProps\n}: AlertProps) => {\n  const generatedId = useId();\n\n  const headerId = `vkui-alert-${generatedId}-header`;\n  const textId = `vkui-alert-${generatedId}-text`;\n\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n\n  const [closing, setClosing] = React.useState(false);\n  const isDismissButtonVisible = isDesktop && platform !== Platform.IOS;\n\n  const elementRef = React.useRef<HTMLDivElement>(null);\n\n  const timeout = platform === Platform.IOS ? 300 : 200;\n\n  const close = React.useCallback(() => {\n    setClosing(true);\n    waitTransitionFinish(\n      elementRef.current,\n      (e?: TransitionEvent) => {\n        if (!e || e.propertyName === 'opacity') {\n          onClose();\n        }\n      },\n      timeout,\n    );\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n\n  const onItemClick = React.useCallback(\n    (item: AlertActionInterface) => {\n      const { action, autoClose } = item;\n\n      if (autoClose) {\n        setClosing(true);\n        waitTransitionFinish(\n          elementRef.current,\n          (e?: TransitionEvent) => {\n            if (!e || e.propertyName === 'opacity') {\n              onClose();\n              action && action();\n            }\n          },\n          timeout,\n        );\n      } else {\n        action && action();\n      }\n    },\n    [elementRef, waitTransitionFinish, onClose, timeout],\n  );\n\n  useScrollLock();\n\n  return (\n    <PopoutWrapper\n      className={className}\n      closing={closing}\n      style={style}\n      onClick={close}\n      getRootRef={getRootRef}\n    >\n      <FocusTrap\n        {...restProps}\n        getRootRef={elementRef}\n        onClick={stopPropagation}\n        onClose={close}\n        timeout={timeout}\n        className={classNames(\n          styles['Alert'],\n          platform === Platform.IOS && styles['Alert--ios'],\n          platform === Platform.VKCOM && styles['Alert--vkcom'],\n          closing && styles['Alert--closing'],\n          isDesktop && styles['Alert--desktop'],\n        )}\n        role=\"alertdialog\"\n        aria-modal\n        aria-labelledby={headerId}\n        aria-describedby={textId}\n      >\n        <div\n          className={classNames(\n            styles['Alert__content'],\n            dismissButtonMode === 'inside' && styles['Alert__content--withButton'],\n          )}\n        >\n          {hasReactNode(header) && <AlertHeader id={headerId}>{header}</AlertHeader>}\n          {hasReactNode(text) && <AlertText id={textId}>{text}</AlertText>}\n          {children}\n          {isDismissButtonVisible && dismissButtonMode === 'inside' && (\n            <IconButton\n              aria-label={dismissLabel}\n              className={classNames(styles['Alert__dismiss'], 'vkuiInternalAlert__dismiss')}\n              onClick={close}\n              hoverMode=\"opacity\"\n              activeMode=\"opacity\"\n            >\n              <Icon20Cancel />\n            </IconButton>\n          )}\n        </div>\n        <AlertActions\n          actions={actions}\n          actionsAlign={actionsAlign}\n          actionsLayout={actionsLayout}\n          renderAction={renderAction}\n          onItemClick={onItemClick}\n        />\n        {isDismissButtonVisible && dismissButtonMode === 'outside' && (\n          <ModalDismissButton onClick={close} aria-label={dismissLabel} />\n        )}\n      </FocusTrap>\n    </PopoutWrapper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}